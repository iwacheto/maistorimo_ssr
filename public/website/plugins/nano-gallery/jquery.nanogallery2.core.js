(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'&&typeof require==='function'){factory(require('jquery'));}else{factory(jQuery);}}(function($){"use strict";function ColorHelperToRGB(color){var obj=document.getElementById('ngyColorHelperToRGB');if(obj===null){obj=document.createElement('div');obj.id="ngyColorHelperToRGB";obj.style.cssText='display: none; color:'+color+';';document.body.appendChild(obj);}
var rgb=getComputedStyle(obj).color;return rgb;}
function ShadeBlendConvert(p,from,to){var rgba='';if(from.toUpperCase().substring(0,5)=='RGBA('){rgba='a';from='rgb('+from.substring(5);}
if(typeof(p)!="number"||p<-1||p>1||typeof(from)!="string"||(from[0]!='r'&&from[0]!='#')||(typeof(to)!="string"&&typeof(to)!="undefined"))return null;function sbcRip(d){var l=d.length,RGB=new Object();if(l>9){d=d.split(",");if(d.length<3||d.length>4)return null;RGB[0]=i(d[0].slice(4)),RGB[1]=i(d[1]),RGB[2]=i(d[2]),RGB[3]=d[3]?parseFloat(d[3]):-1;}else{if(l==8||l==6||l<4)return null;if(l<6)d="#"+d[1]+d[1]+d[2]+d[2]+d[3]+d[3]+(l>4?d[4]+""+d[4]:"");d=i(d.slice(1),16),RGB[0]=d>>16&255,RGB[1]=d>>8&255,RGB[2]=d&255,RGB[3]=l==9||l==5?r(((d>>24&255)/255)*10000)/10000:-1;}
return RGB;}
var i=parseInt,r=Math.round,h=from.length>9,h=typeof(to)=="string"?to.length>9?true:to=="c"?!h:false:h,b=p<0,p=b?p*-1:p,to=to&&to!="c"?to:b?"#000000":"#FFFFFF",f=sbcRip(from),t=sbcRip(to);if(!f||!t)return null;if(h)return"rgb"+rgba+"("+r((t[0]-f[0])*p+f[0])+","+r((t[1]-f[1])*p+f[1])+","+r((t[2]-f[2])*p+f[2])+(f[3]<0&&t[3]<0?")":","+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*10000)/10000:t[3]<0?f[3]:t[3])+")");else return"#"+(0x100000000+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*255):t[3]>-1?r(t[3]*255):f[3]>-1?r(f[3]*255):255)*0x1000000+r((t[0]-f[0])*p+f[0])*0x10000+r((t[1]-f[1])*p+f[1])*0x100+r((t[2]-f[2])*p+f[2])).toString(16).slice(f[3]>-1||t[3]>-1?1:3);}
function cloneJSObject(obj){if(obj===null||typeof obj!=='object'){return obj;}
var temp=obj.constructor();for(var key in obj){temp[key]=cloneJSObject(obj[key]);}
return temp;}
function getViewport(){var $win=jQuery(window);return{l:$win.scrollLeft(),t:$win.scrollTop(),w:$win.width(),h:$win.height()}}
function inViewport($elt,threshold){var wp=getViewport(),eltOS=$elt.offset(),th=$elt.outerHeight(true),tw=$elt.outerWidth(true);if(eltOS.top>=(wp.t-threshold)&&(eltOS.top+th)<=(wp.t+wp.h+threshold)&&eltOS.left>=(wp.l-threshold)&&(eltOS.left+tw)<=(wp.l+wp.w+threshold)){return true;}
else{return false;}}
function inViewportVert($elt,threshold){var wp=getViewport(),eltOS=$elt.offset(),th=$elt.outerHeight(true);if(wp.t==0&&(eltOS.top)<=(wp.t+wp.h)){return true;}
if(eltOS.top>=(wp.t)&&(eltOS.top+th)<=(wp.t+wp.h-threshold)){return true;}
else{return false;}}
function set2ElementsOnTop(start,elt1,elt2){var highest_index=0;if(start==''){start='*';}
jQuery(start).each(function(){var cur=parseInt(jQuery(this).css('z-index'));highest_index=cur>highest_index?cur:highest_index;});highest_index++;jQuery(elt2).css('z-index',highest_index+1);jQuery(elt1).css('z-index',highest_index);}
function setElementOnTop(start,elt){var highest_index=0;if(start==''){start='*';}
jQuery(start).each(function(){var cur=parseInt(jQuery(this).css('z-index'));highest_index=cur>highest_index?cur:highest_index;});highest_index++;jQuery(elt).css('z-index',highest_index);}
var toType=function(obj){return({}).toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase()};$.nanogallery2=function(elt,options){var _this=this;_this.$e=jQuery(elt);_this.e=elt;_this.$e.data('nanogallery2data',_this);_this.init=function(){if(typeof window.NGY2Item==='undefined'){window.NGY2Tools=(function(){function NGY2Tools(){var nextId=1;}
NGY2Tools.FilterAlbumName=function(title,ID){var s=title.toUpperCase();if(this.albumList.length>0){for(var j=0;j<this.albumList.length;j++){if(s===this.albumList[j].toUpperCase()||ID===this.albumList[j]){return true;}}}
else{var found=false;if(this.whiteList!==null){for(var j=0;j<this.whiteList.length;j++){if(s.indexOf(this.whiteList[j])!==-1){found=true;}}
if(!found){return false;}}
if(this.blackList!==null){for(var j=0;j<this.blackList.length;j++){if(s.indexOf(this.blackList[j])!==-1){return false;}}}
return true;}};NGY2Tools.NanoAlert=function(context,msg,verbose){NGY2Tools.NanoConsoleLog.call(context,msg);if(context.$E.conConsole!=null){context.$E.conConsole.css({visibility:'visible',minHeight:'100px'});if(verbose==false){context.$E.conConsole.append('<p>'+msg+'</p>');}
else{context.$E.conConsole.append('<p>nanogallery2: '+msg+' ['+context.baseEltID+']</p>');}}};NGY2Tools.NanoConsoleLog=function(context,msg){if(window.console){console.log('nanogallery2: '+msg+' ['+context.baseEltID+']');}};NGY2Tools.PreloaderDisplay=function(display){if(display===true){this.$E.conLoadingB.removeClass('nanoGalleryLBarOff').addClass('nanoGalleryLBar');}
else{this.$E.conLoadingB.removeClass('nanoGalleryLBar').addClass('nanoGalleryLBarOff');}};NGY2Tools.AreaShuffle=function(o){for(var j,x,i=o.length;i;j=Math.floor(Math.random()*i),x=o[--i],o[i]=o[j],o[j]=x);return o;};NGY2Tools.GetImageTitleFromURL=function(imageURL){if(this.O.thumbnailLabel.get('title')=='%filename'){return(imageURL.split('/').pop()).replace('_',' ');}
if(this.O.thumbnailLabel.get('title')=='%filenameNoExt'){var s=imageURL.split('/').pop();return(s.split('.').shift()).replace('_',' ');}
return'';};NGY2Tools.AlbumPostProcess=function(albumID){var sortOrder=this.gallerySorting[this.GOM.curNavLevel];var maxItems=this.galleryMaxItems[this.GOM.curNavLevel];if(sortOrder!=''||maxItems>0){var currentAlbum=this.I.filter(function(obj){return(obj.albumID==albumID&&obj.kind!='albumUp');});switch(sortOrder){case'RANDOM':currentAlbum=NGY2Tools.AreaShuffle(currentAlbum);break;case'REVERSED':currentAlbum=currentAlbum.reverse();break;case'TITLEASC':currentAlbum.sort(function(a,b){return((a.title.toUpperCase()<b.title.toUpperCase())?-1:((a.title.toUpperCase()>b.title.toUpperCase())?1:0));});break;case'TITLEDESC':currentAlbum.sort(function(a,b){return((a.title.toUpperCase()>b.title.toUpperCase())?-1:((a.title.toUpperCase()<b.title.toUpperCase())?1:0));});break;}
if(maxItems>0&&currentAlbum.length>maxItems){currentAlbum.splice(maxItems-1,currentAlbum.length-maxItems);}
this.I.removeIf(function(obj){return(obj.albumID==albumID&&obj.kind!='albumUp');});this.I.push.apply(this.I,currentAlbum);}};return NGY2Tools;})();window.NGY2Item=(function(){var nextId=1;function NGY2Item(itemID){var ID=0;if(itemID===undefined||itemID===null){ID=nextId++;}
else{ID=itemID;}
this.GetID=function(){return ID;};this.kind='';this.mediaKind='img';this.mediaMarkup='';this.G=null;this.title='';this.description='';this.albumID=0;this.src='';this.width=0;this.height=0;this.destinationURL='';this.downloadURL='';this.author='';this.left=0;this.top=0;this.width=0;this.height=0;this.resizedContentWidth=0;this.resizedContentHeight=0;this.thumbs={url:{l1:{xs:'',sm:'',me:'',la:'',xl:''},lN:{xs:'',sm:'',me:'',la:'',xl:''}},width:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}},height:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}}};this.thumbnailImgRevealed=false;this.imageDominantColors=null;this.imageDominantColor=null;this.featured=false;this.flickrThumbSizes={};this.picasaThumbs=null;this.hovered=false;this.hoverInitDone=false;this.contentIsLoaded=false;this.contentLength=0;this.numberItems=0;this.mediaNumber=0;this.imageCounter=0;this.eltTransform=[];this.eltFilter=[];this.eltEffect=[];this.authkey='';this.paginationLastPage=0;this.paginationLastWidth=0;this.customData={};this.selected=false;this.imageWidth=0;this.imageHeight=0;this.$elt=null;this.$Elts=[];this.tags=[];this.albumTagList=[];this.albumTagListSel=[];this.exif={exposure:'',flash:'',focallength:'',fstop:'',iso:'',model:'',time:'',location:''};this.deleted=false;this.rotationAngle=0;}
NGY2Item.Get=function(instance,ID){var l=instance.I.length;for(var i=0;i<l;i++){if(instance.I[i].GetID()==ID){return instance.I[i];}}
return null;};NGY2Item.GetIdx=function(instance,ID){var l=instance.I.length;for(var i=0;i<l;i++){if(instance.I[i].GetID()==ID){return i;}}
return-1;};NGY2Item.New=function(instance,title,description,ID,albumID,kind,tags){var album=NGY2Item.Get(instance,albumID);if(albumID!=-1&&albumID!=0&&title!='image gallery by nanogallery2 [build]'){if(instance.O.thumbnailLevelUp&&album.getContentLength(false)==0&&instance.O.album==''){var item=new NGY2Item('0');instance.I.push(item);album.contentLength+=1;item.title='UP';item.albumID=albumID;item.kind='albumUp';item.G=instance;jQuery.extend(true,item.thumbs.width,instance.tn.defaultSize.width);jQuery.extend(true,item.thumbs.height,instance.tn.defaultSize.height);}}
var item=NGY2Item.Get(instance,ID);if(item===null){item=new NGY2Item(ID);instance.I.push(item);if(albumID!=-1&&title!='image gallery by nanogallery2 [build]'){album.contentLength+=1;}}
item.G=instance;item.albumID=albumID;item.kind=kind;if(kind=='image'){album.imageCounter+=1;item.mediaNumber=album.imageCounter;}
var kw=instance.O.thumbnailFeaturedKeyword;if(kw!=''){kw=kw.toUpperCase();var p=title.toUpperCase().indexOf(kw);if(p>-1){item.featured=true;title=title.substring(0,p)+title.substring(p+kw.length,title.length);}
p=description.toUpperCase().indexOf(kw);if(p>-1){item.featured=true;description=description.substring(0,p)+description.substring(p+kw.length,description.length);}}
if(typeof instance.galleryFilterTags.Get()=='string'){switch(instance.galleryFilterTags.Get().toUpperCase()){case'TITLE':var re=/(?:^|\W)#(\w+)(?!\w)/g,match,matches=[];var tags="";while(match=re.exec(title)){matches.push(match[1].replace(/^\s*|\s*$/,''));}
item.setTags(matches);title=title.split('#').join('');break;case'DESCRIPTION':var re=/(?:^|\W)#(\w+)(?!\w)/g,match,matches=[];var tags="";while(match=re.exec(description)){matches.push(match[1].replace(/^\s*|\s*$/,''));}
item.setTags(matches);description=description.split('#').join('');break;}}
else{if(tags!=''&&tags!=undefined){item.setTags(tags.split(' '));}}
item.title=escapeHtml(instance,title);item.description=escapeHtml(instance,description);return item;};NGY2Item.prototype.delete=function(){this.deleted=true;this.G.I[NGY2Item.GetIdx(this.G,this.albumID)].contentLength--;this.G.I[NGY2Item.GetIdx(this.G,this.albumID)].numberItems--;var nbTn=this.G.GOM.items.length;var ID=this.GetID();var foundIdx=-1;var foundGOMidx=-1;for(var i=0;i<nbTn;i++){var curTn=this.G.GOM.items[i];var item=this.G.I[curTn.thumbnailIdx];if(item.GetID()==ID){if(!curTn.neverDisplayed){foundIdx=curTn.thumbnailIdx;foundGOMidx=i;}}
else{if(foundIdx!=-1){if(!curTn.neverDisplayed){item.$getElt('.nGY2GThumbnail').data('index',i-1);item.$getElt('.nGY2GThumbnailImg').data('index',i-1);}}}}
if(foundIdx!=-1){var G=this.G;if(this.selected==true){this.selected=false;G.GOM.nbSelected--;}
if(G.I[foundIdx].$elt!==null){G.I[foundIdx].$elt.remove();}
G.GOM.items.splice(foundGOMidx,1);if(G.GOM.lastDisplayedIdx!=-1){G.GOM.lastDisplayedIdx-=1;}}}
NGY2Item.prototype.addToGOM=function(){var ID=this.GetID();var l=this.G.I.length;for(var idx=0;idx<l;idx++){var item=this.G.I[idx];if(item.GetID()==ID){var w=item.thumbImg().width;var h=item.thumbImg().height;if(h==0){h=this.G.tn.defaultSize.getHeight();}
if(w==0){w=this.G.tn.defaultSize.getWidth();}
var tn=new this.G.GOM.GTn(idx,w,h);this.G.GOM.items.push(tn);break;}}}
var entityMap={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;'};function escapeHtml(instance,string){if(instance.O.allowHTMLinData==true){return string;}
else{return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s];});}}
NGY2Item.get_nextId=function(){return nextId;};NGY2Item.prototype.$getElt=function(elt,forceRefresh){if(this.$elt==null){return null;}
if(this.$Elts[elt]!==undefined&&!forceRefresh==true){return this.$Elts[elt];}
else{if(elt=='.nGY2GThumbnail'){this.$Elts[elt]=this.$elt;}
else{this.$Elts[elt]=this.$elt.find(elt);}
return this.$Elts[elt];}};NGY2Item.prototype.removeElt=function(elt){if(this.$elt==null){return;}
if(this.$Elts[elt]==undefined){return;}
this.$Elts[elt].remove();var index=this.$Elts.indexOf(elt);this.$Elts.splice(index,1);};NGY2Item.prototype.album=function(){return this.G.I[NGY2Item.GetIdx(this.G,this.albumID)];};NGY2Item.prototype.mediaTransition=function(){if(this.G.O.viewerTransitionMediaKind.indexOf(this.mediaKind)>-1){return true;}
return false;};NGY2Item.prototype.imageSet=function(src,w,h){this.src=src;this.width=w;this.height=h;};NGY2Item.prototype.thumbSet=function(src,w,h,screenSize,level){var lst=['xs','sm','me','la','xl'];if(typeof screenSize==='undefined'||screenSize==''||screenSize==null){for(var i=0;i<lst.length;i++){if(typeof level==='undefined'||level==''){this.thumbs.url.l1[lst[i]]=src;this.thumbs.height.l1[lst[i]]=h;this.thumbs.width.l1[lst[i]]=w;this.thumbs.url.lN[lst[i]]=src;this.thumbs.height.lN[lst[i]]=h;this.thumbs.width.lN[lst[i]]=w;}
else{this.thumbs.url[level][lst[i]]=src;this.thumbs.height[level][lst[i]]=h;this.thumbs.width[level][lst[i]]=w;}}}
else{if(typeof level==='undefined'||level==''||level==null){this.thumbs.url.l1[screenSize]=src;this.thumbs.height.l1[screenSize]=h;this.thumbs.width.l1[screenSize]=w;this.thumbs.url.lN[screenSize]=src;this.thumbs.height.lN[screenSize]=h;this.thumbs.width.lN[screenSize]=w;}
else{this.thumbs.url[level][screenSize]=src;this.thumbs.height[level][screenSize]=h;this.thumbs.width[level][screenSize]=w;}}
var lst=['xs','sm','me','la','xl'];for(var i=0;i<lst.length;i++){this.thumbs.height.l1[lst[i]]=h;}
for(var i=0;i<lst.length;i++){if(this.G.tn.settings.height.lN[lst[i]]==this.G.tn.settings.getH()&&this.G.tn.settings.width.l1[lst[i]]==this.G.tn.settings.getW()){this.thumbs.height.lN[lst[i]]=h;}}};NGY2Item.prototype.thumbSetImgHeight=function(h){var lst=['xs','sm','me','la','xl'];for(var i=0;i<lst.length;i++){if(this.G.tn.settings.height.l1[lst[i]]==this.G.tn.settings.getH()&&this.G.tn.settings.width.l1[lst[i]]==this.G.tn.settings.getW()){this.thumbs.height.l1[lst[i]]=h;}}
for(var i=0;i<lst.length;i++){if(this.G.tn.settings.height.lN[lst[i]]==this.G.tn.settings.getH()&&this.G.tn.settings.width.l1[lst[i]]==this.G.tn.settings.getW()){this.thumbs.height.lN[lst[i]]=h;}}};NGY2Item.prototype.thumbSetImgWidth=function(w){var lst=['xs','sm','me','la','xl'];for(var i=0;i<lst.length;i++){if(this.G.tn.settings.height.l1[lst[i]]==this.G.tn.settings.getH()&&this.G.tn.settings.width.l1[lst[i]]==this.G.tn.settings.getW()){this.thumbs.width.l1[lst[i]]=w;}}
for(var i=0;i<lst.length;i++){if(this.G.tn.settings.height.lN[lst[i]]==this.G.tn.settings.getH()&&this.G.tn.settings.width.l1[lst[i]]==this.G.tn.settings.getW()){this.thumbs.width.lN[lst[i]]=w;}}};NGY2Item.prototype.thumbImg=function(){var tnImg={src:'',width:0,height:0};if(this.title=='image gallery by nanogallery2 [build]'){tnImg.src=this.G.emptyGif;tnImg.url=this.G.emptyGif;return tnImg;}
tnImg.src=this.thumbs.url[this.G.GOM.curNavLevel][this.G.GOM.curWidth];tnImg.width=this.thumbs.width[this.G.GOM.curNavLevel][this.G.GOM.curWidth];tnImg.height=this.thumbs.height[this.G.GOM.curNavLevel][this.G.GOM.curWidth];return tnImg;};NGY2Item.prototype.setTags=function(tags){if(tags.length>0){this.tags=tags;var lstTags=this.album().albumTagList;for(var i=0;i<tags.length;i++){var tfound=false;for(var j=0;j<lstTags.length;j++){if(tags[i].toUpperCase()==lstTags[j].toUpperCase()){tfound=true;}}
if(tfound==false){this.album().albumTagList.push(tags[i])
this.album().albumTagListSel.push(tags[i])}}}};NGY2Item.prototype.checkTagFilter=function(){if(this.G.galleryFilterTags.Get()!=false&&this.album().albumTagList.length>0){if(this.G.O.thumbnailLevelUp&&this.kind=='albumUp'){return true;}
var found=false;var lstTags=this.album().albumTagListSel;for(var i=0;i<this.tags.length;i++){for(var j=0;j<lstTags.length;j++){if(this.tags[i].toUpperCase()==lstTags[j].toUpperCase()){found=true;break;}}}
return found;}
else
return true;};NGY2Item.prototype.isSearchTagFound=function(){if(this.G.GOM.albumSearchTags==''){return true;}
if(this.G.O.thumbnailLevelUp&&this.kind=='albumUp'){return true;}
for(var i=0;i<this.tags.length;i++){if(this.tags[i].toUpperCase().indexOf(this.G.GOM.albumSearchTags)>=0){return true;}}
return false;};NGY2Item.prototype.setMediaURL=function(url,mediaKind){this.src=url;this.mediaKind=mediaKind;if(mediaKind=='img'){this.mediaMarkup='<img class="nGY2ViewerMedia" src="'+url+'" alt=" " itemprop="contentURL" draggable="false">';}};NGY2Item.prototype.isToDisplay=function(albumID){return this.albumID==albumID&&this.checkTagFilter()&&this.isSearchFound()&&this.isSearchTagFound()&&this.deleted==false;};NGY2Item.prototype.getContentLength=function(filterTags){if(filterTags==false||this.albumTagList.length==0||this.G.galleryFilterTags.Get()==false){return this.contentLength;}
else{var l=this.G.I.length;var cnt=0;var albumID=this.GetID();for(var idx=0;idx<l;idx++){var item=this.G.I[idx];if(item.isToDisplay(albumID)){cnt++;}}
return cnt;}};NGY2Item.prototype.isSearchFound=function(){if(this.G.GOM.albumSearch!=''){if(this.title.toUpperCase().indexOf(this.G.GOM.albumSearch)==-1){return false;}}
return true;}
NGY2Item.prototype.responsiveURL=function(){var url='';switch(this.G.O.kind){case'':url=this.src;break;case'flickr':url=this.src;break;case'picasa':case'google':case'google2':default:url=this.src;break;}
return url;};NGY2Item.prototype.ThumbnailImageReveal=function(){if(this.thumbnailImgRevealed==false){this.thumbnailImgRevealed=true;new NGTweenable().tween({from:{opacity:0},to:{opacity:1},attachment:{item:this},delay:30,duration:400,easing:'easeOutQuart',step:function(state,att){var $e=att.item.$getElt('.nGY2TnImg');if($e!=null){$e.css(state);}}});}};function ValueApplyPercent(str,percent){str=String(str);if(str==='0'||percent==1){return str;}
var n=Number(str.replace(/[a-zA-Z]/g,''));var ar=str.match(/([^\-0-9\.]+)/g);var a='';if(ar!=null&&ar.length>0){a=ar.join();}
if(isNaN(n)||n==0){return str;}
n=n*percent;return n+a;}
NGY2Item.prototype.CSSTransformApply=function(eltClass){var obj=this.eltTransform[eltClass];if(eltClass=='.nGY2GThumbnail'){var nbStacks=obj.$elt.length-1;var pTranslateX=1;var pTranslateY=1;var pTranslateZ=1;var pTranslate=1;var pRotateX=1;var pRotateY=1;var pRotateZ=1;var pRotate=1;var pScale=1;for(var n=nbStacks;n>=0;n--){var v='translateX('+ValueApplyPercent(obj.translateX,pTranslateX)+') translateY('+ValueApplyPercent(obj.translateY,pTranslateY)+') translateZ('+ValueApplyPercent(obj.translateZ,pTranslateZ)+') scale('+ValueApplyPercent(obj.scale,pScale)+') translate('+ValueApplyPercent(obj.translate,pTranslate)+')';if(!(this.G.IE<=9)&&!this.G.isGingerbread){v+=' rotateX('+ValueApplyPercent(obj.rotateX,pRotateX)+') rotateY('+ValueApplyPercent(obj.rotateY,pRotateY)+') rotateZ('+ValueApplyPercent(obj.rotateZ,pRotateZ)+') rotate('+ValueApplyPercent(obj.rotate,pRotate)+')';}
else{v+=' rotate('+ValueApplyPercent(obj.rotateZ,pRotateZ)+')';}
obj.$elt[n].style[this.G.CSStransformName]=v;if(nbStacks>0){pTranslateX-=this.G.tn.opt.Get('stacksTranslateX');pTranslateY-=this.G.tn.opt.Get('stacksTranslateY');pTranslateZ-=this.G.tn.opt.Get('stacksTranslateZ');pRotateX-=this.G.tn.opt.Get('stacksRotateX');pRotateY-=this.G.tn.opt.Get('stacksRotateY');pRotateZ-=this.G.tn.opt.Get('stacksRotateZ');pScale-=this.G.tn.opt.Get('stacksScale');}}}
else{if(obj.$elt!=null){for(var n=0;n<obj.$elt.length;n++){if(obj.$elt[n]!=undefined){var v='translateX('+obj.translateX+') translateY('+obj.translateY+') translateZ('+obj.translateZ+') scale('+obj.scale+') translate('+obj.translate+')';if(!(this.G.IE<=9)&&!this.G.isGingerbread){v+=' rotateX('+obj.rotateX+') rotateY('+obj.rotateY+') rotateZ('+obj.rotateZ+') rotate('+obj.rotate+')';}
else{v+=' rotate('+obj.rotateZ+')';}
obj.$elt[n].style[this.G.CSStransformName]=v;}}}}};NGY2Item.prototype.CSSTransformSet=function(eltClass,transform,value,forceRefresh){if(this.eltTransform[eltClass]==undefined){this.eltTransform[eltClass]={translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,scale:1,translate:'0px,0px',rotate:0};this.eltTransform[eltClass].$elt=this.$getElt(eltClass);}
this.eltTransform[eltClass][transform]=value;if(forceRefresh===true){this.eltTransform[eltClass].$elt=this.$getElt(eltClass,true);}};NGY2Item.prototype.CSSFilterApply=function(eltClass){var obj=this.eltFilter[eltClass];var v='blur('+obj.blur+') brightness('+obj.brightness+') grayscale('+obj.grayscale+') sepia('+obj.sepia+') contrast('+obj.contrast+') opacity('+obj.opacity+') saturate('+obj.saturate+')';if(obj.$elt!=null){for(var n=0;n<obj.$elt.length;n++){if(obj.$elt[n]!=undefined){obj.$elt[n].style.WebkitFilter=v;obj.$elt[n].style.filter=v;}}}};NGY2Item.prototype.CSSFilterSet=function(eltClass,filter,value,forceRefresh){if(this.eltFilter[eltClass]==undefined){this.eltFilter[eltClass]={blur:0,brightness:'100%',grayscale:'0%',sepia:'0%',contrast:'100%',opacity:'100%',saturate:'100%'};this.eltFilter[eltClass].$elt=this.$getElt(eltClass);}
this.eltFilter[eltClass][filter]=value;if(forceRefresh===true){this.eltTransform[eltClass].$elt=this.$getElt(eltClass,true);}};NGY2Item.prototype.animate=function(effect,delay,hoverIn){if(this.$getElt()==null){return;}
var context={};context.G=this.G;context.item=this;context.effect=effect;context.hoverIn=hoverIn;context.cssKind='';if(hoverIn){if(this.eltEffect[effect.element]==undefined){this.eltEffect[effect.element]=[];}
if(this.eltEffect[effect.element][effect.type]==undefined){this.eltEffect[effect.element][effect.type]={initialValue:0,lastValue:0};}
if(effect.firstKeyframe){this.eltEffect[effect.element][effect.type]={initialValue:effect.from,lastValue:effect.from};}
context.animeFrom=effect.from;context.animeTo=effect.to;context.animeDuration=parseInt(effect.duration);context.animeDelay=30+parseInt(effect.delay+delay);context.animeEasing=effect.easing;}
else{if(effect.firstKeyframe){context.animeFrom=this.eltEffect[effect.element][effect.type].lastValue;context.animeTo=this.eltEffect[effect.element][effect.type].initialValue;}
else{context.animeFrom=this.eltEffect[effect.element][effect.type].lastValue;context.animeTo=this.eltEffect[effect.element][effect.type].initialValue;}
context.animeDuration=parseInt(effect.durationBack);context.animeDelay=30+parseInt(effect.delayBack+delay);context.animeEasing=effect.easingBack;}
var transform=['translateX','translateY','translateZ','scale','rotateX','rotateY','rotateZ'];for(var i=0;i<transform.length;i++){if(effect.type==transform[i]){context.cssKind='transform';break;}}
var filter=['blur','brightness','grayscale','sepia','contrast','opacity','saturate'];for(var i=0;i<filter.length;i++){if(effect.type==filter[i]){context.cssKind='filter';break;}}
if(hoverIn&&effect.element=='.nGY2GThumbnail'&&(effect.type=='scale'||effect.type=='rotateX')){this.G.GOM.lastZIndex++;this.$getElt(effect.element).css('z-index',this.G.GOM.lastZIndex);}
var tweenable=new NGTweenable();context.tweenable=tweenable;tweenable.tween({attachment:context,from:{'v':context.animeFrom},to:{'v':context.animeTo},duration:context.animeDuration,delay:context.animeDelay,easing:context.animeEasing,step:function(state,att){if(att.item.$getElt()==null){att.tweenable.stop(false);return;}
if(att.hoverIn&&!att.item.hovered){att.tweenable.stop(false);return;}
if(att.G.VOM.viewerDisplayed){att.tweenable.stop(false);return;}
if(state.v==att.animeFrom){return;}
switch(att.cssKind){case'transform':att.item.CSSTransformSet(att.effect.element,att.effect.type,state.v);att.item.CSSTransformApply(att.effect.element);break;case'filter':att.item.CSSFilterSet(att.effect.element,att.effect.type,state.v);att.item.CSSFilterApply(att.effect.element);break;default:var v=state.v;if(state.v.substring(0,4)=='rgb('||state.v.substring(0,5)=='rgba('){v=ShadeBlendConvert(0,v);}
att.item.$getElt(att.effect.element).css(att.effect.type,v);break;}
if(hoverIn){att.item.eltEffect[att.effect.element][att.effect.type].lastValue=state.v;}},finish:function(state,att){if(hoverIn){att.item.eltEffect[att.effect.element][att.effect.type].lastValue=state.v;}
if(att.item.$getElt()==null){return;}
if(att.hoverIn&&!att.item.hovered){return;}
if(att.G.VOM.viewerDisplayed){return;}
switch(att.cssKind){case'transform':att.item.CSSTransformSet(att.effect.element,att.effect.type,att.animeTo);att.item.CSSTransformApply(att.effect.element);break;case'filter':att.item.CSSFilterSet(att.effect.element,att.effect.type,att.animeTo);att.item.CSSFilterApply(att.effect.element);break;default:att.item.$getElt(att.effect.element).css(att.effect.type,att.animeTo);break;}}});};return NGY2Item;})();}
_this.options=jQuery.extend(true,{},jQuery.nanogallery2.defaultOptions,options);_this.nG2=null;_this.nG2=new nanoGALLERY2();_this.nG2.initiateGallery2(_this.e,_this.options);};_this.test=function(){}
_this.init();};jQuery.nanogallery2.defaultOptions={kind:'',userID:'',photoset:'',album:'',blackList:'scrapbook|profil|auto backup',whiteList:'',albumList:'',albumList2:null,RTL:false,poogleplusUseUrlCrossDomain:true,flickrSkipOriginal:true,breadcrumbAutoHideTopLevel:true,displayBreadcrumb:true,breadcrumbOnlyCurrentLevel:true,breadcrumbHideIcons:true,theme:'nGY2',galleryTheme:'dark',viewerTheme:'dark',items:null,itemsBaseURL:'',thumbnailSelectable:false,dataProvider:'',dataCharset:'Latin',allowHTMLinData:false,locationHash:true,slideshowDelay:3000,slideshowAutoStart:false,debugMode:false,galleryDisplayMoreStep:2,galleryDisplayMode:'fullContent',galleryL1DisplayMode:null,galleryPaginationMode:'rectangles',galleryMaxRows:2,galleryL1MaxRows:null,galleryLastRowFull:false,galleryLayoutEngine:'default',paginationSwipe:true,paginationVisiblePages:10,galleryFilterTags:false,galleryL1FilterTags:null,galleryMaxItems:0,galleryL1MaxItems:null,gallerySorting:'',galleryL1Sorting:null,galleryDisplayTransition:'none',galleryL1DisplayTransition:null,galleryDisplayTransitionDuration:1000,galleryL1DisplayTransitionDuration:null,galleryResizeAnimation:true,galleryRenderDelay:60,thumbnailCrop:true,thumbnailL1Crop:null,thumbnailCropScaleFactor:1.5,thumbnailLevelUp:false,thumbnailAlignment:'fillWidth',thumbnailWidth:300,thumbnailL1Width:null,thumbnailHeight:200,thumbnailL1Height:null,thumbnailBaseGridHeight:0,thumbnailL1BaseGridHeight:null,thumbnailGutterWidth:2,thumbnailL1GutterWidth:null,thumbnailGutterHeight:2,thumbnailL1GutterHeight:null,thumbnailBorderVertical:2,thumbnailBorderHorizontal:2,thumbnailFeaturedKeyword:'*featured',thumbnailAlbumDisplayImage:false,thumbnailHoverEffect2:'toolsAppear',thumbnailBuildInit2:'',thumbnailStacks:0,thumbnailL1Stacks:null,thumbnailStacksTranslateX:0,thumbnailL1StacksTranslateX:null,thumbnailStacksTranslateY:0,thumbnailL1StacksTranslateY:null,thumbnailStacksTranslateZ:0,thumbnailL1StacksTranslateZ:null,thumbnailStacksRotateX:0,thumbnailL1StacksRotateX:null,thumbnailStacksRotateY:0,thumbnailL1StacksRotateY:null,thumbnailStacksRotateZ:0,thumbnailL1StacksRotateZ:null,thumbnailStacksScale:0,thumbnailL1StacksScale:null,thumbnailDisplayOutsideScreen:true,thumbnailWaitImageLoaded:true,thumbnailSliderDelay:2000,galleryBuildInit2:'',portable:false,eventsDebounceDelay:30,touchAnimation:true,touchAnimationL1:undefined,touchAutoOpenDelay:0,thumbnailLabel:{position:'overImageOnBottom',align:'center',display:true,displayDescription:false,titleMaxLength:0,titleMultiLine:false,descriptionMaxLength:0,descriptionMultiLine:false,hideIcons:true,title:''},thumbnailToolbarImage:{topLeft:'select',topRight:'featured'},thumbnailToolbarAlbum:{topLeft:'select',topRight:'counter'},thumbnailDisplayInterval:15,thumbnailL1DisplayInterval:null,thumbnailDisplayTransition:'fadeIn',thumbnailL1DisplayTransition:null,thumbnailDisplayTransitionDuration:240,thumbnailL1DisplayTransitionDuration:null,thumbnailOpenImage:true,thumbnailOpenOriginal:false,thumbnailGlobalImageTitle:'',thumbnailGlobalAlbumTitle:'',viewer:'internal',viewerFullscreen:false,viewerDisplayLogo:false,imageTransition:'swipe2',viewerTransitionMediaKind:'img',viewerZoom:true,viewerImageDisplay:'',openOnStart:'',viewerHideToolsDelay:3000,viewerToolbar:{display:true,position:'bottomOverImage',fullWidth:true,align:'center',autoMinimize:0,standard:'minimizeButton,label',minimized:'minimizeButton,label,infoButton,shareButton,downloadButton,linkOriginalButton,fullscreenButton'},viewerTools:{topLeft:'pageCounter,playPauseButton',topRight:'rotateLeft,rotateRight,fullscreenButton,closeButton'},breakpointSizeSM:480,breakpointSizeME:992,breakpointSizeLA:1200,breakpointSizeXL:1800,fnThumbnailInit:null,fnThumbnailHoverInit:null,fnThumbnailHover:null,fnThumbnailHoverOut:null,fnThumbnailDisplayEffect:null,fnViewerInfo:null,fnImgToolbarCustInit:null,fnImgToolbarCustDisplay:null,fnImgToolbarCustClick:null,fnProcessData:null,fnThumbnailSelection:null,fnGalleryRenderStart:null,fnGalleryRenderEnd:null,fnGalleryObjectModelBuilt:null,fnGalleryLayoutApplied:null,fnThumbnailClicked:null,fnShoppingCartUpdated:null,fnThumbnailToolCustAction:null,fnThumbnailOpen:null,fnImgDisplayed:null,i18n:{'breadcrumbHome':'Galleries','breadcrumbHome_FR':'Galeries','thumbnailImageTitle':'','thumbnailAlbumTitle':'','thumbnailImageDescription':'','thumbnailAlbumDescription':'','infoBoxPhoto':'Photo','infoBoxDate':'Date','infoBoxAlbum':'Album','infoBoxDimensions':'Dimensions','infoBoxFilename':'Filename','infoBoxFileSize':'File size','infoBoxCamera':'Camera','infoBoxFocalLength':'Focal length','infoBoxExposure':'Exposure','infoBoxFNumber':'F Number','infoBoxISO':'ISO','infoBoxMake':'Make','infoBoxFlash':'Flash','infoBoxViews':'Views','infoBoxComments':'Comments'},icons:{thumbnailAlbum:'<i class="nGY2Icon-folder-empty"></i>',thumbnailImage:'<i class="nGY2Icon-picture"></i>',breadcrumbAlbum:'<i class="nGY2Icon-folder-empty"></i>',breadcrumbHome:'<i class="nGY2Icon-home"></i>',breadcrumbSeparator:'<i class="nGY2Icon-left-open"></i>',breadcrumbSeparatorRtl:'<i class="nGY2Icon-right-open"></i>',navigationFilterSelected:'<i style="color:#fff;" class="nGY2Icon-toggle-on"></i>',navigationFilterUnselected:'<i style="color:#ddd;" class="nGY2Icon-toggle-off"></i>',navigationFilterSelectedAll:'<i class="nGY2Icon-toggle-on"></i><i class="nGY2Icon-ok"></i>',thumbnailSelected:'<i style="color:#bff;" class="nGY2Icon-ok-circled"></i>',thumbnailUnselected:'<i style="color:#bff;" class="nGY2Icon-circle-empty"></i>',thumbnailFeatured:'<i style="color:#dd5;" class="nGY2Icon-star"></i>',thumbnailCounter:'<i class="nGY2Icon-picture"></i>',thumbnailShare:'<i class="nGY2Icon-ngy2_share2"></i>',thumbnailDownload:'<i class="nGY2Icon-ngy2_download2"></i>',thumbnailInfo:'<i class="nGY2Icon-ngy2_info2"></i>',thumbnailCart:'<i class="nGY2Icon-basket"></i>',thumbnailDisplay:'<i class="nGY2Icon-ngy2_zoom_in2"></i>',thumbnailCustomTool1:'T1',thumbnailCustomTool2:'T2',thumbnailCustomTool3:'T3',thumbnailCustomTool4:'T4',thumbnailCustomTool5:'T5',thumbnailCustomTool6:'T6',thumbnailCustomTool7:'T7',thumbnailCustomTool8:'T8',thumbnailCustomTool9:'T9',thumbnailCustomTool10:'T10',thumbnailAlbumUp:'<i style="font-size: 3em;" class="nGY2Icon-ngy2_chevron_up2"></i>',paginationNext:'<i class="nGY2Icon-right-open"></i>',paginationPrevious:'<i class="nGY2Icon-left-open"></i>',galleryMoreButton:'<i class="nGY2Icon-picture"></i> &nbsp; <i class="nGY2Icon-right-open"></i>',buttonClose:'<i class="nGY2Icon-ngy2_close2"></i>',viewerPrevious:'<i class="nGY2Icon-ngy2_chevron-left"></i>',viewerNext:'<i class="nGY2Icon-ngy2_chevron-right"></i>',viewerImgPrevious:'<i class="nGY2Icon-ngy2_chevron_left3"></i>',viewerImgNext:'<i class="nGY2Icon-ngy2_chevron_right3"></i>',viewerDownload:'<i class="nGY2Icon-ngy2_download2"></i>',viewerToolbarMin:'<i class="nGY2Icon-ellipsis-vert"></i>',viewerToolbarStd:'<i class="nGY2Icon-menu"></i>',viewerPlay:'<i class="nGY2Icon-play"></i>',viewerPause:'<i class="nGY2Icon-pause"></i>',viewerFullscreenOn:'<i class="nGY2Icon-resize-full"></i>',viewerFullscreenOff:'<i class="nGY2Icon-resize-small"></i>',viewerZoomIn:'<i class="nGY2Icon-ngy2_zoom_in2"></i>',viewerZoomOut:'<i class="nGY2Icon-ngy2_zoom_out2"></i>',viewerLinkOriginal:'<i class="nGY2Icon-ngy2_external2"></i>',viewerInfo:'<i class="nGY2Icon-ngy2_info2"></i>',viewerShare:'<i class="nGY2Icon-ngy2_share2"></i>',viewerRotateLeft:'<i class="nGY2Icon-ccw"></i>',viewerRotateRight:'<i class="nGY2Icon-cw"></i>',user:'<i class="nGY2Icon-user"></i>',location:'<i class="nGY2Icon-location"></i>',config:'<i class="nGY2Icon-wrench"></i>',shareFacebook:'<i style="color:#3b5998;" class="nGY2Icon-facebook-squared"></i>',shareTwitter:'<i style="color:#00aced;" class="nGY2Icon-twitter-squared"></i>',shareTumblr:'<i style="color:#32506d;" class="nGY2Icon-tumblr-squared"></i>',sharePinterest:'<i style="color:#cb2027;" class="nGY2Icon-pinterest-squared"></i>',shareVK:'<i style="color:#3b5998;" class="nGY2Icon-vkontakte"></i>',shareMail:'<i style="color:#555;" class="nGY2Icon-mail-alt"></i>',viewerCustomTool1:'T1',viewerCustomTool2:'T2',viewerCustomTool3:'T3',viewerCustomTool4:'T4',viewerCustomTool5:'T5',viewerCustomTool6:'T6',viewerCustomTool7:'T7',viewerCustomTool8:'T8',viewerCustomTool9:'T9',viewerCustomTool10:'T10'}};jQuery.fn.nanogallery2=function(args,option,value){if(typeof jQuery(this).data('nanogallery2data')==='undefined'){if(args=='destroy'){return;}
return this.each(function(){(new jQuery.nanogallery2(this,args));});}
else{var nG2=$(this).data('nanogallery2data').nG2;switch(args){case'displayItem':nG2.DisplayItem(option);break;case'search':return(nG2.Search(option));break;case'search2':return nG2.Search2(option,value);break;case'search2Execute':return nG2.Search2Execute();break;case'refresh':nG2.Refresh();break;case'resize':nG2.Resize();break;case'instance':return nG2;break;case'data':nG2.data={items:nG2.I,gallery:nG2.GOM,lightbox:nG2.VOM};return nG2.data;break;case'reload':nG2.ReloadAlbum();return $(this);break;case'itemsSelectedGet':return nG2.ItemsSelectedGet();break;case'itemsSetSelectedValue':nG2.ItemsSetSelectedValue(option,value);break;case'option':if(typeof value==='undefined'){return nG2.Get(option);}else{nG2.Set(option,value);if(option=='demoViewportWidth'){$(window).trigger('resize');}}
break;case'destroy':nG2.Destroy();$(this).removeData('nanogallery2data');break;case'shoppingCartGet':return nG2.shoppingCart;break;case'shoppingCartUpdate':if(typeof value==='undefined'||typeof option==='undefined'){return false;}
var ID=option;var cnt=value;for(var i=0;i<nG2.shoppingCart.length;i++){if(nG2.shoppingCart[i].ID=ID){nG2.shoppingCart[i].cnt=cnt;}}
var fu=G.O.fnShoppingCartUpdated;if(fu!==null){typeof fu=='function'?fu(nG2.shoppingCart,NGY2Item.Get(G,ID)):window[fu](nG2.shoppingCart,NGY2Item.Get(G,ID));}
return nG2.shoppingCart;break;case'shoppingCartRemove':if(typeof option==='undefined'){return false;}
var ID=option;for(var i=0;i<nG2.shoppingCart.length;i++){if(nG2.shoppingCart[i].ID=ID){nG2.shoppingCart.splice(i,1);break;}}
var fu=G.O.fnShoppingCartUpdated;if(fu!==null){typeof fu=='function'?fu(nG2.shoppingCart,NGY2Item.Get(G,ID)):window[fu](nG2.shoppingCart,NGY2Item.Get(G,ID));}
return nG2.shoppingCart;break;case'closeViewer':nG2.CloseViewer();break;case'minimizeToolbar':nG2.MinimizeToolbar();break;case'maximizeToolbar':nG2.MaximizeToolbar();break;case'paginationPreviousPage':nG2.PaginationPreviousPage();break;case'paginationNextPage':nG2.paginationNextPage();break;case'paginationGotoPage':nG2.PaginationGotoPage(option);break;case'paginationCountPages':nG2.PaginationCountPages();break;}
return $(this);}};function nanoGALLERY2(){"use strict";this.ReloadAlbum=function(){if(G.O.kind===''){throw'Not supported for this content source:'+G.O.kind;}
var albumIdx=G.GOM.albumIdx;if(albumIdx==-1){throw('Current album not found.');}
var albumID=G.I[albumIdx].GetID();var l=G.I.length;for(var i=0;i<l;i++){var item=G.I[i];if(item.albumID==albumID){item.selected=false;}}
G.I[albumIdx].contentIsLoaded=false;DisplayAlbum('-1',albumID);};this.ItemsSetSelectedValue=function(items,value){var l=items.length;for(var j=0;j<l;j++){ThumbnailSelectionSet(items[j],value);}};this.ItemsSelectedGet=function(){var selectedItems=[];var l=G.I.length;for(var i=0;i<l;i++){if(G.I[i].selected==true){selectedItems.push(G.I[i]);}}
return selectedItems;};this.Get=function(option){return G.O[option];};this.Set=function(option,value){G.O[option]=value;switch(option){case'thumbnailSelectable':ThumbnailSelectionClear();GalleryRender(G.GOM.albumIdx);break;}};this.Refresh=function(){GalleryRender(G.GOM.albumIdx);};this.Resize=function(){GalleryResize();};this.DisplayItem=function(itemID){var IDs=parseIDs(itemID);if(IDs.imageID!='0'){DisplayPhoto(IDs.imageID,IDs.albumID);}
else{DisplayAlbum('-1',IDs.albumID);}};var CountItemsToDisplay=function(gIdx){if(G.I[gIdx]==undefined){return 0;}
var albumID=G.I[gIdx].GetID();var l=G.I.length;var cnt=0;for(var idx=0;idx<l;idx++){var item=G.I[idx];if(item.isToDisplay(albumID)){cnt++;}}
return cnt;}
this.Search=function(search){G.GOM.albumSearch=search.toUpperCase();var gIdx=G.GOM.albumIdx;GalleryRender(G.GOM.albumIdx);return CountItemsToDisplay(gIdx);};this.Search2=function(searchTitle,searchTags){if(searchTitle!=null&&searchTitle!=undefined){G.GOM.albumSearch=searchTitle.toUpperCase();}
else{G.GOM.albumSearch='';}
if(searchTags!=null&&searchTags!=undefined){G.GOM.albumSearchTags=searchTags.toUpperCase();}
else{G.GOM.albumSearchTags='';}
return CountItemsToDisplay(G.GOM.albumIdx);};this.Search2Execute=function(){var gIdx=G.GOM.albumIdx;GalleryRender(G.GOM.albumIdx);return CountItemsToDisplay(gIdx);};this.Destroy=function(){if(G.GOM.hammertime!=null){G.GOM.hammertime.destroy();G.GOM.hammertime=null;}
if(G.VOM.hammertime!=null){G.VOM.hammertime.destroy();G.VOM.hammertime=null;}
$('#ngycs_'+G.baseEltID).remove()
G.GOM.items=[];NGY2Item.New(G,G.i18nTranslations.breadcrumbHome,'','0','-1','album');G.GOM.navigationBar.$newContent=null;G.$E.base.empty();G.$E.base.removeData();if(G.O.locationHash){jQuery(window).off('hashchange.nanogallery2.'+G.baseEltID);}
jQuery(window).off('resize.nanogallery2.'+G.baseEltID);jQuery(window).off('orientationChange.nanogallery2.'+G.baseEltID);jQuery(window).off('scroll.nanogallery2.'+G.baseEltID);G.GOM.firstDisplay=false;};this.CloseViewer=function(){CloseInternalViewer(null);return false;};this.MinimizeToolbar=function(){ViewerToolbarForVisibilityMin();return false;};this.MaximizeToolbar=function(){ViewerToolbarForVisibilityStd();return false;};this.PaginationPreviousPage=function(){paginationPreviousPage();return false;};this.PaginationNextPage=function(){paginationNextPage();return false;};this.PaginationGotoPage=function(page){var aIdx=G.$E.conPagin.data('galleryIdx');if(page>1){page--;}
G.GOM.pagination.currentPage=page;if(!inViewportVert(G.$E.base,0)){$('html, body').animate({scrollTop:G.$E.base.offset().top},200);}
GalleryDisplayPart1(true);GalleryDisplayPart2(true);return false;};this.PaginationCountPages=function(){if(G.GOM.items.length==0){return 0;}
var nbPages=Math.ceil((G.GOM.items[G.GOM.items.length-1].row+1)/G.galleryMaxRows.Get());return nbPages;};var throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:new Date().getTime();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null;};return function(){var now=new Date().getTime();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null;}
previous=now;result=func.apply(context,args);if(!timeout)context=args=null;}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}
return result;};};var debounce=function(func,threshold,execAsap){var timeout;return function debounced(){var obj=this,args=arguments;function delayed(){if(!execAsap)
func.apply(obj,args);timeout=null;};if(timeout)
clearTimeout(timeout);else if(execAsap)
func.apply(obj,args);timeout=setTimeout(delayed,threshold||100);};}
window.ng_draf=function(cb){return requestAnimationFrame(function(){window.requestAnimationFrame(cb)})}
window.requestTimeout=function(fn,delay){return window.setTimeout(fn,delay);var start=new Date().getTime(),handle=new Object();function loop(){var current=new Date().getTime(),delta=current-start;delta=delay;delta>=delay?fn.call():handle.value=requestAnimFrame(loop);};handle.value=requestAnimFrame(loop);return handle;};window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1000/60);};})();window.clearRequestTimeout=function(handle){window.cancelAnimationFrame?window.cancelAnimationFrame(handle.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(handle.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(handle.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(handle.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(handle.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(handle.value):clearTimeout(handle);};var G=this;G.I=[];G.Id=[];G.O=null;G.baseEltID=null;G.$E={base:null,conTnParent:null,conLoadingB:null,conConsole:null,conNavigationBar:null,conTnBottom:null};G.shoppingCart=[];G.layout={internal:true,engine:'',support:{rows:false},prerequisite:{imageSize:false},SetEngine:function(){if(G.layout.internal){if(G.tn.settings.width[G.GOM.curNavLevel][G.GOM.curWidth]=='auto'||G.tn.settings.width[G.GOM.curNavLevel][G.GOM.curWidth]==''){G.layout.engine='JUSTIFIED';G.layout.support.rows=true;G.layout.prerequisite.imageSize=true;return;}
if(G.tn.settings.height[G.GOM.curNavLevel][G.GOM.curWidth]=='auto'||G.tn.settings.height[G.GOM.curNavLevel][G.GOM.curWidth]==''){G.layout.engine='CASCADING';G.layout.support.rows=false;G.layout.prerequisite.imageSize=true;return;}
if(G.tn.settings.getMosaic()!=null){G.layout.engine='MOSAIC';G.layout.support.rows=true;G.layout.prerequisite.imageSize=false;return;}
G.layout.engine='GRID';G.layout.support.rows=true;G.layout.prerequisite.imageSize=false;}}};G.galleryResizeEventEnabled=false;G.galleryMaxRows={l1:0,lN:0,Get:function(){return G.galleryMaxRows[G.GOM.curNavLevel];}};G.galleryMaxItems={l1:0,lN:0,Get:function(){return G.galleryMaxItems[G.GOM.curNavLevel];}};G.galleryFilterTags={l1:0,lN:0,Get:function(){return G.galleryFilterTags[G.GOM.curNavLevel];}};G.galleryDisplayMode={l1:'FULLCONTENT',lN:'FULLCONTENT',Get:function(){return G.galleryDisplayMode[G.GOM.curNavLevel];}};G.galleryLastRowFull={l1:false,lN:false,Get:function(){return G.galleryLastRowFull[G.GOM.curNavLevel];}};G.gallerySorting={l1:'',lN:'',Get:function(){return G.gallerySorting[G.GOM.curNavLevel];}};G.galleryDisplayTransition={l1:'none',lN:'none',Get:function(){return G.galleryDisplayTransition[G.GOM.curNavLevel];}};G.galleryDisplayTransitionDuration={l1:500,lN:500,Get:function(){return G.galleryDisplayTransitionDuration[G.GOM.curNavLevel];}};G.$currentTouchedThumbnail=null;G.tn={opt:{l1:{crop:true,stacks:0,stacksTranslateX:0,stacksTranslateY:0,stacksTranslateZ:0,stacksRotateX:0,stacksRotateY:0,stacksRotateZ:0,stacksScale:0,gutterHeight:0,gutterWidth:0,baseGridHeight:0,displayTransition:'FADEIN',displayTransitionStartVal:0,displayTransitionEasing:'easeOutQuart',displayTransitionDuration:240,displayInterval:15},lN:{crop:true,stacks:0,stacksTranslateX:0,stacksTranslateY:0,stacksTranslateZ:0,stacksRotateX:0,stacksRotateY:0,stacksRotateZ:0,stacksScale:0,gutterHeight:0,gutterWidth:0,baseGridHeight:0,displayTransition:'FADEIN',displayTransitionStartVal:0,displayTransitionEasing:'easeOutQuart',displayTransitionDuration:240,displayInterval:15},Get:function(opt){return G.tn.opt[G.GOM.curNavLevel][opt];}},scale:1,borderWidth:0,borderHeight:0,labelHeight:{l1:0,lN:0,get:function(){return G.tn.labelHeight[G.GOM.curNavLevel];}},defaultSize:{width:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}},height:{l1:{xs:0,sm:0,me:0,la:0,xl:0},lN:{xs:0,sm:0,me:0,la:0,xl:0}},getWidth:function(){return G.tn.defaultSize.width[G.GOM.curNavLevel][G.GOM.curWidth];},getOuterWidth:function(){return G.tn.defaultSize.width[G.GOM.curNavLevel][G.GOM.curWidth]+G.tn.borderWidth*2;},getHeight:function(){return G.tn.defaultSize.height[G.GOM.curNavLevel][G.GOM.curWidth];},getOuterHeight:function(){return G.tn.defaultSize.height[G.GOM.curNavLevel][G.GOM.curWidth]+G.tn.borderHeight*2;}},settings:{width:{l1:{xs:0,sm:0,me:0,la:0,xl:0,xsc:'u',smc:'u',mec:'u',lac:'u',xlc:'u'},lN:{xs:0,sm:0,me:0,la:0,xl:0,xsc:'u',smc:'u',mec:'u',lac:'u',xlc:'u'}},height:{l1:{xs:0,sm:0,me:0,la:0,xl:0,xsc:'u',smc:'u',mec:'u',lac:'u',xlc:'u'},lN:{xs:0,sm:0,me:0,la:0,xl:0,xsc:'u',smc:'u',mec:'u',lac:'u',xlc:'u'}},getH:function(l,w){var cl=(l==undefined?G.GOM.curNavLevel:l);var cw=(w==undefined?G.GOM.curWidth:w);if(G.layout.engine=='MOSAIC'){return G.tn.settings.height[cl][cw]*G.tn.settings.mosaic[cl+'Factor']['h'][cw];}
else{return G.tn.settings.height[cl][cw];}},getW:function(l,w){var cl=(l==undefined?G.GOM.curNavLevel:l);var cw=(w==undefined?G.GOM.curWidth:w);if(G.layout.engine=='MOSAIC'){return G.tn.settings.width[cl][cw]*G.tn.settings.mosaic[cl+'Factor']['w'][cw];}
else{return G.tn.settings.width[cl][cw];}},mosaic:{l1:{xs:null,sm:null,me:null,la:null,xl:null},lN:{xs:null,sm:null,me:null,la:null,xl:null},l1Factor:{h:{xs:1,sm:1,me:1,la:1,xl:1},w:{xs:1,sm:1,me:1,la:1,xl:1}},lNFactor:{h:{xs:1,sm:1,me:1,la:1,xl:1},w:{xs:1,sm:1,me:1,la:1,xl:1}}},getMosaic:function(){return G.tn.settings.mosaic[G.GOM.curNavLevel][G.GOM.curWidth];},mosaicCalcFactor:function(l,w){var maxW=1;var maxH=1;for(var n=0;n<G.tn.settings.mosaic[l][w].length;n++){maxW=Math.max(maxW,G.tn.settings.mosaic[l][w][n]['w']);maxH=Math.max(maxH,G.tn.settings.mosaic[l][w][n]['h']);}
G.tn.settings.mosaic[l+'Factor']['h'][w]=maxH;G.tn.settings.mosaic[l+'Factor']['w'][w]=maxW;}},hoverEffects:{std:[],level1:[],get:function(){if(G.GOM.curNavLevel=='l1'&&G.tn.hoverEffects.level1.length!==0){return G.tn.hoverEffects.level1;}
else{return G.tn.hoverEffects.std;}}},buildInit:{std:[],level1:[],get:function(){if(G.GOM.curNavLevel=='l1'&&G.tn.buildInit.level1.length!==0){return G.tn.buildInit.level1;}
else{return G.tn.buildInit.std;}}},toolbar:{album:{topLeft:'',topRight:'',bottomLeft:'',bottomRight:''},image:{topLeft:'',topRight:'',bottomLeft:'',bottomRight:''},albumUp:{topLeft:'',topRight:'',bottomLeft:'',bottomRight:''},get:function(item){return G.tn.toolbar[item.kind];},},style:{l1:{label:'',title:'',desc:''},lN:{label:'',title:'',desc:''},getTitle:function(){return('style="'+G.tn.style[G.GOM.curNavLevel].title+'"');},getDesc:function(){return('style="'+G.tn.style[G.GOM.curNavLevel].desc+'"');},getLabel:function(){var s='style="'+G.tn.style[G.GOM.curNavLevel].label;s+=(G.O.RTL?'"direction:RTL;"':'');s+='"';return s;}}};G.scrollTimeOut=0;G.i18nTranslations={'paginationPrevious':'Previous','paginationNext':'Next','breadcrumbHome':'List of Albums','thumbnailImageTitle':'','thumbnailAlbumTitle':'','thumbnailImageDescription':'','thumbnailAlbumDescription':''};G.emptyGif='data:image/gif;base64,R0lGODlhEAAQAIAAAP///////yH5BAEKAAEALAAAAAAQABAAAAIOjI+py+0Po5y02ouzPgUAOw==';G.CSStransformName=FirstSupportedPropertyName(["transform","msTransform","MozTransform","WebkitTransform","OTransform"]);G.CSStransformStyle=FirstSupportedPropertyName(["transformStyle","msTransformStyle","MozTransformStyle","WebkitTransformStyle","OTransformStyle"]);G.CSSperspective=FirstSupportedPropertyName(["perspective","msPerspective","MozPerspective","WebkitPerspective","OPerspective"]);G.CSSbackfaceVisibilityName=FirstSupportedPropertyName(["backfaceVisibility","msBackfaceVisibility","MozBackfaceVisibility","WebkitBackfaceVisibility","OBackfaceVisibility"]);G.CSStransitionName=FirstSupportedPropertyName(["transition","msTransition","MozTransition","WebkitTransition","OTransition"]);G.CSSanimationName=FirstSupportedPropertyName(["animation","msAnimation","MozAnimation","WebkitAnimation","OAnimation"]);G.GalleryResizeThrottled=throttle(GalleryResize,30,{leading:false});G.blackList=null;G.whiteList=null;G.albumList=[];G.locationHashLastUsed='';G.custGlobals={};G.touchAutoOpenDelayTimerID=0;G.i18nLang='';G.timeLastTouchStart=0;G.custGlobals={};G.markupOrApiProcessed=false;G.GOM={albumIdx:-1,clipArea:{top:0,height:0},displayArea:{width:0,height:0},displayAreaLast:{width:0,height:0},displayedMoreSteps:0,items:[],$imgPreloader:[],thumbnails2Display:[],itemsDisplayed:0,firstDisplay:true,firstDisplayTime:0,navigationBar:{displayed:false,$newContent:''},cache:{viewport:null,containerOffset:null,areaWidth:100},nbSelected:0,pagination:{currentPage:0},panThreshold:60,panYOnly:false,lastFullRow:-1,lastDisplayedIdx:-1,displayInterval:{from:0,len:0},userEvents:null,hammertime:null,curNavLevel:'l1',curWidth:'me',albumSearch:'',albumSearchTags:'',lastZIndex:0,lastRandomValue:0,slider:{hostIdx:-1,hostItem:null,currentIdx:0,nextIdx:0,timerID:0,tween:null},NGY2Item:function(idx){if(G.GOM.items[idx]==undefined||G.GOM.items[idx]==null){return null;}
var i=G.GOM.items[idx].thumbnailIdx;return G.I[i];},GTn:function(index,width,height){this.thumbnailIdx=index;this.width=0;this.height=0;this.top=0;this.left=0;this.row=0;this.imageWidth=width;this.imageHeight=height;this.resizedContentWidth=0;this.resizedContentHeight=0;this.displayed=false;this.neverDisplayed=true;this.inDisplayArea=false;}};G.VOM={viewerDisplayed:false,viewerIsFullscreen:false,infoDisplayed:false,toolbarsDisplayed:true,toolsHide:null,saveOverflowX:'visible',saveOverflowY:'visible',zoom:{posX:0,posY:0,userFactor:1,isZooming:false},padding:{H:0,V:0},window:{lastWidth:0,lastHeight:0},$cont:null,$viewer:null,$toolbar:null,$toolbarTL:null,$toolbarTR:null,$content:null,$mediaPrevious:null,$mediaCurrent:null,$mediaNext:null,toolbarMode:'std',playSlideshow:false,playSlideshowTimerID:0,slideshowDelay:3000,albumID:-1,currItemIdx:-1,viewerMediaIsChanged:false,items:[],NGY2Item:function(n){switch(n){case-1:var idx=this.IdxPrevious();return G.I[this.items[idx].ngy2ItemIdx];break;case 1:var idx=this.IdxNext();return G.I[this.items[idx].ngy2ItemIdx];break;case 0:default:return G.I[this.items[G.VOM.currItemIdx].ngy2ItemIdx];break;}},IdxNext:function(){var n=0;if(G.VOM.currItemIdx!=(G.VOM.items.length-1)){n=G.VOM.currItemIdx+1;}
return n;},IdxPrevious:function(){var n=G.VOM.currItemIdx-1;if(G.VOM.currItemIdx==0){n=G.VOM.items.length-1;}
return n;},userEvents:null,hammertime:null,swipePosX:0,panPosX:0,panPosY:0,panThreshold:60,panXOnly:false,viewerTheme:'',timeImgChanged:0,ImageLoader:{maxChecks:1000,list:[],intervalHandle:null,loadImage:function(callback,ngitem){if(ngitem.mediaKind!='img'){return;}
var img=new Image();img.src=ngitem.responsiveURL();if(img.width&&img.height){callback(img.width,img.height,ngitem,0);}
else{var obj={image:img,url:ngitem.responsiveURL(),ngitem:ngitem,callback:callback,checks:1};var i;for(i=0;i<this.list.length;i++){if(this.list[i]==null)
break;}
this.list[i]=obj;if(!this.intervalHandle)
this.intervalHandle=setInterval(this.interval,50);}},interval:function(){var count=0;var list=G.VOM.ImageLoader.list,item;for(var i=0;i<list.length;i++){item=list[i];if(item!=null){if(item.image.width&&item.image.height){G.VOM.ImageLoader.list[i]=null;item.callback(item.image.width,item.image.height,item.ngitem,item.checks);}
else if(item.checks>G.VOM.ImageLoader.maxChecks){G.VOM.ImageLoader.list[i]=null;item.callback(0,0,item.ngitem,item.checks);}
else{count++;item.checks++;}}}
if(count==0){G.VOM.ImageLoader.list=[];clearInterval(G.VOM.ImageLoader.intervalHandle);delete G.VOM.ImageLoader.intervalHandle;}}}}
function VImg(index){this.$e=null;this.ngy2ItemIdx=index;this.mediaNumber=0;this.posX=0;this.posY=0;}
G.popup={isDisplayed:false,$elt:null,close:function(){if(this.$elt!=null){var tweenable=new NGTweenable();tweenable.tween({from:{opacity:1},to:{opacity:0},attachment:{t:this},easing:'easeInOutSine',duration:100,step:function(state,att){if(att.t.$elt!=null){att.t.$elt.css('opacity',state.opacity);}},finish:function(state,att){if(att.t.$elt!=null){att.t.$elt.remove();att.t.$elt=null;}
att.t.isDisplayed=false;}});}}}
G.galleryTheme_dark={navigationBar:{background:'none',borderTop:'',borderBottom:'',borderRight:'',borderLeft:''},navigationBreadcrumb:{background:'#111',color:'#fff',colorHover:'#ccc',borderRadius:'4px'},navigationFilter:{color:'#ddd',background:'#111',colorSelected:'#fff',backgroundSelected:'#111',borderRadius:'4px'},thumbnail:{background:'#444',backgroundImage:'linear-gradient(315deg, #111 0%, #445 90%)',borderColor:'#000',labelOpacity:1,labelBackground:'rgba(34, 34, 34, 0)',titleColor:'#fff',titleBgColor:'transparent',titleShadow:'',descriptionColor:'#ccc',descriptionBgColor:'transparent',descriptionShadow:'',stackBackground:'#aaa'},thumbnailIcon:{padding:'5px',color:'#fff'},pagination:{background:'#181818',backgroundSelected:'#666',color:'#fff',borderRadius:'2px',shapeBorder:'3px solid #666',shapeColor:'#444',shapeSelectedColor:'#aaa'}};G.galleryTheme_light={navigationBar:{background:'none',borderTop:'',borderBottom:'',borderRight:'',borderLeft:''},navigationBreadcrumb:{background:'#eee',color:'#000',colorHover:'#333',borderRadius:'4px'},navigationFilter:{background:'#eee',color:'#222',colorSelected:'#000',backgroundSelected:'#eee',borderRadius:'4px'},thumbnail:{background:'#444',backgroundImage:'linear-gradient(315deg, #111 0%, #445 90%)',borderColor:'#000',labelOpacity:1,labelBackground:'rgba(34, 34, 34, 0)',titleColor:'#fff',titleBgColor:'transparent',titleShadow:'',descriptionColor:'#ccc',descriptionBgColor:'transparent',descriptionShadow:'',stackBackground:'#888'},thumbnailIcon:{padding:'5px',color:'#fff'},pagination:{background:'#eee',backgroundSelected:'#aaa',color:'#000',borderRadius:'2px',shapeBorder:'3px solid #666',shapeColor:'#444',shapeSelectedColor:'#aaa'}};G.viewerTheme_dark={background:'#000',imageBorder:'none',imageBoxShadow:'none',barBackground:'rgba(4, 4, 4, 0.2)',barBorder:'0px solid #111',barColor:'#eee',barDescriptionColor:'#aaa'};G.viewerTheme_border={background:'rgba(1, 1, 1, 0.75)',imageBorder:'4px solid #f8f8f8',imageBoxShadow:'#888 0px 0px 20px',barBackground:'rgba(4, 4, 4, 0.2)',barBorder:'0px solid #111',barColor:'#eee',barDescriptionColor:'#aaa'};G.viewerTheme_light={background:'#f8f8f8',imageBorder:'none',imageBoxShadow:'none',barBackground:'rgba(4, 4, 4, 0.7)',barBorder:'0px solid #111',barColor:'#eee',barDescriptionColor:'#aaa'};var NanoAlert=NGY2Tools.NanoAlert;var NanoConsoleLog=NGY2Tools.NanoConsoleLog;this.initiateGallery2=function(element,params){G.O=params;G.$E.base=jQuery(element);G.baseEltID=G.$E.base.attr('id');if(G.baseEltID==undefined){G.baseEltID='my_nanogallery';G.$E.base.attr('id',G.baseEltID)}
G.O.$markup=[];DefineVariables();SetPolyFills();BuildSkeleton();G.GOM.firstDisplayTime=Date.now();SetGlobalEvents();var albumToDisplay=G.O.album;if(albumToDisplay==''&&G.O.photoset!=''){albumToDisplay=G.O.photoset;G.O.album=G.O.photoset;}
if(albumToDisplay!=''){G.O.displayBreadcrumb=false;if(albumToDisplay.toUpperCase()!='NONE'){var p=albumToDisplay.indexOf('&authkey=');if(p==-1){p=albumToDisplay.indexOf('?authkey=');}
if(p>0){G.O.locationHash=false;var albumID=albumToDisplay.substring(0,p);var opt=albumToDisplay.substring(p);if(opt.indexOf('Gv1sRg')==-1){opt='&authkey=Gv1sRg'+opt.substring(9);}
var newItem=NGY2Item.New(G,'','',albumID,'-1','album');newItem.authkey=opt;DisplayAlbum('-1',albumID);}
else{if(G.O.kind=="nano_photos_provider2"){if(albumToDisplay==decodeURIComponent(albumToDisplay)){albumToDisplay=encodeURIComponent(albumToDisplay);G.O.album=albumToDisplay;}}
NGY2Item.New(G,'','',albumToDisplay,'-1','album');if(!ProcessLocationHash()){DisplayAlbum('-1',albumToDisplay);}}
return;}}
NGY2Item.New(G,G.i18nTranslations.breadcrumbHome,'','0','-1','album');processStartOptions();}
function processStartOptions(){if(!ProcessLocationHash()){processStartOptionsPart2();}}
function processStartOptionsPart2(){if(G.O.openOnStart!=''){var IDs=parseIDs(G.O.openOnStart);if(IDs.imageID!='0'){DisplayPhoto(IDs.imageID,IDs.albumID);}
else{DisplayAlbum('-1',IDs.albumID);}}
else{DisplayAlbum('-1',0);}}
function parseIDs(IDs){var r={albumID:'0',imageID:'0'};var t=IDs.split('/');if(t.length>0){r.albumID=t[0];if(t.length>1){r.imageID=t[1];}}
return r;}
function DisplayAlbum(imageID,albumID){if(G.VOM.viewerDisplayed){CloseInternalViewer(null);}
var albumIdx=NGY2Item.GetIdx(G,albumID);G.GOM.curNavLevel='lN';if(albumIdx==0){G.GOM.curNavLevel='l1';}
G.layout.SetEngine();G.galleryResizeEventEnabled=false;if(albumIdx==-1){NGY2Item.New(G,'','',albumID,'0','album');albumIdx=G.I.length-1;}
if(!G.I[albumIdx].contentIsLoaded){AlbumGetContent(albumID,DisplayAlbum,imageID,albumID);return;}
ThumbnailSelectionClear();G.GOM.pagination.currentPage=0;SetLocationHash(albumID,'');GalleryRender(albumIdx);}
function GalleryBottomManage(){switch(G.galleryDisplayMode.Get()){case'PAGINATION':if(G.layout.support.rows&&G.galleryMaxRows.Get()>0){ManagePagination(G.GOM.albumIdx);}
break;case'MOREBUTTON':G.$E.conTnBottom.off('click');var nb=G.GOM.items.length-G.GOM.itemsDisplayed;if(nb==0){G.$E.conTnBottom.empty();}
else{G.$E.conTnBottom.html('<div class="nGY2GalleryMoreButton"><div class="nGY2GalleryMoreButtonAnnotation">+'+nb+' '+G.O.icons.galleryMoreButton+'</div></div>');G.$E.conTnBottom.on('click',function(e){G.GOM.displayedMoreSteps++;GalleryResize();});}
break;case'FULLCONTENT':default:break;}}
function breadcrumbAdd(albumIdx){var ic='';if(!G.O.breadcrumbHideIcons){ic=G.O.icons.breadcrumbAlbum;if(albumIdx==0){ic=G.O.icons.breadcrumbHome;}}
var $newDiv=jQuery('<div class="oneItem">'+ic+G.I[albumIdx].title+'</div>').appendTo(G.GOM.navigationBar.$newContent.find('.nGY2Breadcrumb'));if(G.O.breadcrumbOnlyCurrentLevel){if(albumIdx==0){jQuery($newDiv).data('albumID','0');}
else{jQuery($newDiv).data('albumID',G.I[albumIdx].albumID);}}
else{jQuery($newDiv).data('albumID',G.I[albumIdx].GetID());}
$newDiv.click(function(){var cAlbumID=jQuery(this).data('albumID');DisplayAlbum('-1',cAlbumID);return;});}
function breadcrumbAddSeparator(lastAlbumID){var $newSep=jQuery('<div class="oneItem">'+(G.O.RTL?G.O.icons.breadcrumbSeparatorRtl:G.O.icons.breadcrumbSeparator)+'</div>').appendTo(G.GOM.navigationBar.$newContent.find('.nGY2Breadcrumb'));jQuery($newSep).data('albumIdx',lastAlbumID);$newSep.click(function(){var sepAlbumIdx=jQuery(this).data('albumIdx');DisplayAlbum('-1',G.I[sepAlbumIdx].GetID());return;});}
function GalleryNavigationBar(albumIdx){G.GOM.navigationBar.$newContent=jQuery('<div class="nGY2Navigationbar"></div>');if(G.O.displayBreadcrumb==true&&!G.O.thumbnailAlbumDisplayImage){var newLevel=0,lstItems=[];if(albumIdx!=0){var l=G.I.length,parentID=0;lstItems.push(albumIdx);var curIdx=albumIdx;newLevel++;while(G.I[curIdx].albumID!=0&&G.I[curIdx].albumID!=-1){for(var i=1;i<l;i++){if(G.I[i].GetID()==G.I[curIdx].albumID){curIdx=i;lstItems.push(curIdx);newLevel++;break;}}}}
if(!(G.O.breadcrumbAutoHideTopLevel&&newLevel==0)){BreadcrumbBuild(lstItems);}}
if(G.galleryFilterTags.Get()!=false){var nTags=G.I[albumIdx].albumTagList.length;if(nTags>0){for(var i=0;i<nTags;i++){var s=G.I[albumIdx].albumTagList[i];var ic=G.O.icons.navigationFilterUnselected;var tagClass='Unselected';if(jQuery.inArray(s,G.I[albumIdx].albumTagListSel)>=0){tagClass='Selected';ic=G.O.icons.navigationFilterSelected;}
var $newTag=jQuery('<div class="nGY2NavigationbarItem nGY2NavFilter'+tagClass+'">'+ic+' '+s+'</div>').appendTo(G.GOM.navigationBar.$newContent);$newTag.click(function(){var $this=jQuery(this);var tag=$this.text().replace(/^\s*|\s*$/,'');if($this.hasClass('nGY2NavFilterUnselected')){G.I[albumIdx].albumTagListSel.push(tag);}
else{var tidx=jQuery.inArray(tag,G.I[albumIdx].albumTagListSel);if(tidx!=-1){G.I[albumIdx].albumTagListSel.splice(tidx,1);}}
$this.toggleClass('nGY2NavFilters-oneTagUnselected nGY2NavFilters-oneTagSelected');DisplayAlbum('-1',G.I[albumIdx].GetID());});}
var $newClearFilter=jQuery('<div class="nGY2NavigationbarItem nGY2NavFilterSelectAll">'+G.O.icons.navigationFilterSelectedAll+'</div>').appendTo(G.GOM.navigationBar.$newContent);$newClearFilter.click(function(){var nTags=G.I[albumIdx].albumTagList.length;G.I[albumIdx].albumTagListSel=[];for(var i=0;i<nTags;i++){var s=G.I[albumIdx].albumTagList[i];G.I[albumIdx].albumTagListSel.push(s);}
DisplayAlbum('-1',G.I[albumIdx].GetID());});}}}
function BreadcrumbBuild(lstItems){jQuery('<div class="nGY2NavigationbarItem nGY2Breadcrumb"></div>').appendTo(G.GOM.navigationBar.$newContent);if(G.O.breadcrumbOnlyCurrentLevel){if(lstItems.length==0){breadcrumbAdd(0);}
else{var last=lstItems.length-1;if(lstItems.length==1){breadcrumbAddSeparator(0);}
else{breadcrumbAddSeparator(lstItems[0]);}
breadcrumbAdd(lstItems[0]);}}
else{breadcrumbAdd(0);if(lstItems.length>0){breadcrumbAddSeparator(0);for(var i=lstItems.length-1;i>=0;i--){breadcrumbAdd(lstItems[i]);if(i>0){breadcrumbAddSeparator(lstItems[i-1]);}}}}}
function ManagePagination(albumIdx){G.$E.conTnBottom.css('opacity',0);G.$E.conTnBottom.children().remove();if(G.GOM.items.length==0){return;}
var nbPages=Math.ceil((G.GOM.items[G.GOM.items.length-1].row+1)/G.galleryMaxRows.Get());if(nbPages==1){return;}
if(G.GOM.pagination.currentPage>(nbPages-1)){G.GOM.pagination.currentPage=nbPages-1;}
GalleryRenderGetInterval();if(G.GOM.displayInterval.len==0){return;}
if(G.O.galleryPaginationMode=='NUMBERS'&&G.GOM.pagination.currentPage>0){var $eltPrev=jQuery('<div class="nGY2PaginationPrev">'+G.O.icons.paginationPrevious+'</div>').appendTo(G.$E.conTnBottom);$eltPrev.click(function(e){paginationPreviousPage();});}
var firstPage=0;var lastPage=nbPages;if(G.O.galleryPaginationMode!='NUMBERS'){firstPage=0;}
else{var vp=G.O.paginationVisiblePages;var numberOfPagesToDisplay=G.O.paginationVisiblePages;if(numberOfPagesToDisplay>=nbPages){firstPage=0;}
else{var nbBeforeAfter=0;if(isOdd(numberOfPagesToDisplay)){nbBeforeAfter=(numberOfPagesToDisplay+1)/2;}
else{nbBeforeAfter=numberOfPagesToDisplay/2;}
if(G.GOM.pagination.currentPage<nbBeforeAfter){firstPage=0;lastPage=numberOfPagesToDisplay-1;if(lastPage>nbPages){lastPage=nbPages-1;}}
else{firstPage=G.GOM.pagination.currentPage-nbBeforeAfter;lastPage=firstPage+numberOfPagesToDisplay;if(lastPage>nbPages){lastPage=nbPages-1;}}
if((lastPage-firstPage)<numberOfPagesToDisplay){firstPage=lastPage-numberOfPagesToDisplay;if(firstPage<0){firstPage=0;}}}}
for(var i=firstPage;i<lastPage;i++){var c='';var p='';switch(G.O.galleryPaginationMode){case'NUMBERS':c='nGY2paginationItem';p=i+1;break;case'DOTS':c='nGY2paginationDot';break;case'RECTANGLES':c='nGY2paginationRectangle';break;}
if(i==G.GOM.pagination.currentPage){c+='CurrentPage';}
var elt$=jQuery('<div class="'+c+'">'+p+'</div>').appendTo(G.$E.conTnBottom);elt$.data('pageNumber',i);elt$.click(function(e){G.GOM.pagination.currentPage=jQuery(this).data('pageNumber');TriggerCustomEvent('pageChanged');if(!inViewportVert(G.$E.base,0)){$('html, body').animate({scrollTop:G.$E.base.offset().top},200);}
GalleryDisplayPart1(true);GalleryDisplayPart2(true);});}
if(G.O.galleryPaginationMode=='NUMBERS'&&(G.GOM.pagination.currentPage+1)<nbPages){var $eltNext=jQuery('<div class="nGY2PaginationNext">'+G.O.icons.paginationNext+'</div>').appendTo(G.$E.conTnBottom);$eltNext.click(function(e){paginationNextPage();});}
G.$E.conTnBottom.css('opacity',1);}
function isOdd(num){return(num%2)==1;}
function paginationNextPage(){var aIdx=G.GOM.albumIdx,n1=0;ThumbnailHoverOutAll();if(G.galleryMaxRows.Get()>0){n1=(G.GOM.items[G.GOM.items.length-1].row+1)/G.galleryMaxRows.Get();}
var n2=Math.ceil(n1);var pn=G.GOM.pagination.currentPage;if(pn<(n2-1)){pn++;}
else{pn=0;}
G.GOM.pagination.currentPage=pn;TriggerCustomEvent('pageChanged');if(!inViewportVert(G.$E.base,0)){$('html, body').animate({scrollTop:G.$E.base.offset().top},200);}
GalleryDisplayPart1(true);GalleryDisplayPart2(true);}
function paginationPreviousPage(){var aIdx=G.GOM.albumIdx,n1=0;ThumbnailHoverOutAll();if(G.galleryMaxRows.Get()>0){n1=(G.GOM.items[G.GOM.items.length-1].row+1)/G.galleryMaxRows.Get();}
var n2=Math.ceil(n1);var pn=G.GOM.pagination.currentPage;if(pn>0){pn--;}
else{pn=n2-1;}
G.GOM.pagination.currentPage=pn;TriggerCustomEvent('pageChanged');if(!inViewportVert(G.$E.base,0)){$('html, body').animate({scrollTop:G.$E.base.offset().top},200);}
GalleryDisplayPart1(true);GalleryDisplayPart2(true);}
function GalleryRenderGetInterval(){G.GOM.displayInterval.from=0;G.GOM.displayInterval.len=G.I.length;switch(G.galleryDisplayMode.Get()){case'PAGINATION':if(G.layout.support.rows){var nbTn=G.GOM.items.length;var firstRow=G.GOM.pagination.currentPage*G.galleryMaxRows.Get();var lastRow=firstRow+G.galleryMaxRows.Get();var firstTn=-1;G.GOM.displayInterval.len=0;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.row>=firstRow&&curTn.row<lastRow){if(firstTn==-1){G.GOM.displayInterval.from=i;firstTn=i;}
G.GOM.displayInterval.len++;}}}
break;case'MOREBUTTON':if(G.layout.support.rows){var nbTn=G.GOM.items.length;var lastRow=G.O.galleryDisplayMoreStep*(G.GOM.displayedMoreSteps+1);G.GOM.displayInterval.len=0;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.row<lastRow){G.GOM.displayInterval.len++;}}}
break;case'ROWS':if(G.layout.support.rows){var nbTn=G.GOM.items.length;var lastRow=G.galleryMaxRows.Get();if(G.galleryLastRowFull.Get()&&G.GOM.lastFullRow!=-1){if(lastRow>(G.GOM.lastFullRow+1)){lastRow=G.GOM.lastFullRow+1;}}
G.GOM.displayInterval.len=0;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.row<lastRow){G.GOM.displayInterval.len++;}}}
break;default:case'FULLCONTENT':if(G.layout.support.rows&&G.galleryLastRowFull.Get()&&G.GOM.lastFullRow!=-1){var nbTn=G.GOM.items.length;var lastRow=G.GOM.lastFullRow+1;G.GOM.displayInterval.len=0;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.row<lastRow){G.GOM.displayInterval.len++;}}}
break;}}
function GalleryRender(albumIdx){TriggerCustomEvent('galleryRenderStart');clearTimeout(G.GOM.slider.timerID);G.GOM.slider.hostIdx=-1;var fu=G.O.fnGalleryRenderStart;if(fu!==null){typeof fu=='function'?fu(albumIdx):window[fu](albumIdx);}
G.layout.SetEngine();G.galleryResizeEventEnabled=false;G.GOM.albumIdx=-1;G.GOM.lastDisplayedIdx=-1;if(G.$E.conTnBottom!==undefined){G.$E.conTnBottom.empty();}
GalleryNavigationBar(albumIdx);if(G.GOM.firstDisplay){G.GOM.firstDisplay=false;var d=Date.now()-G.GOM.firstDisplayTime;if(d<G.O.galleryRenderDelay){requestTimeout(function(){GalleryRenderPart1(albumIdx)},G.O.galleryRenderDelay-d);}
else{GalleryRenderPart1(albumIdx);}
G.O.galleryRenderDelay=0;}
else{var hideNavigationBar=false;if(G.GOM.navigationBar.$newContent.children().length==0){hideNavigationBar=true;}
var tweenable=new NGTweenable();tweenable.tween({from:{'opacity':1},to:{'opacity':0},duration:300,easing:'easeInQuart',attachment:{h:hideNavigationBar},step:function(state,att){G.$E.conTnParent.css({'opacity':state.opacity});if(att.h){G.$E.conNavigationBar.css({'opacity':state.opacity});}},finish:function(state,att){if(att.h){G.$E.conNavigationBar.css({'opacity':0,'display':'none'});}
var galleryOTop=G.$E.base.offset().top;if(galleryOTop<G.GOM.cache.viewport.t){jQuery('html, body').animate({scrollTop:galleryOTop},500,"linear",function(){GalleryRenderPart1(albumIdx);});}
else{GalleryRenderPart1(albumIdx);}}});}}
function GalleryRenderPart1(albumIdx){var oldN=G.$E.conNavigationBar.children().length;G.$E.conNavigationBar.empty();G.GOM.navigationBar.$newContent.children().clone(true,true).appendTo(G.$E.conNavigationBar);if(G.$E.conNavigationBar.children().length>0&&oldN==0){G.$E.conNavigationBar.css({'opacity':0,'display':'block'});var tweenable=new NGTweenable();tweenable.tween({from:{opacity:0},to:{opacity:1},duration:200,easing:'easeInQuart',step:function(state){G.$E.conNavigationBar.css(state);},finish:function(state){G.$E.conNavigationBar.css({'opacity':1});requestTimeout(function(){GalleryRenderPart2(albumIdx)},60);}});}
else{requestTimeout(function(){GalleryRenderPart2(albumIdx)},60);}}
function GalleryRenderPart2(albumIdx){G.GOM.lastZIndex=parseInt(G.$E.base.css('z-index'));if(isNaN(G.GOM.lastZIndex)){G.GOM.lastZIndex=0;}
G.$E.conTnParent.css({'opacity':0});G.$E.conTn.off().empty();var l=G.I.length;for(var i=0;i<l;i++){var item=G.I[i];item.hovered=false;item.$elt=null;item.$Elts=[];item.eltTransform=[];item.eltFilter=[];item.width=0;item.height=0;item.left=0;item.top=0;item.resizedContentWidth=0;item.resizedContentHeight=0;item.thumbnailImgRevealed=false;}
if(G.CSStransformName==null){G.$E.conTn.css('left','0px');}
else{G.$E.conTn.css(G.CSStransformName,'none');}
requestTimeout(function(){GalleryRenderPart3(albumIdx)},60);}
function GalleryRenderPart3(albumIdx){var d=new Date();G.$E.conTnParent.css('opacity',1);G.GOM.items=[];G.GOM.displayedMoreSteps=0;if(G.O.thumbnailLabel.get('position')=='onBottom'){G.tn.labelHeight[G.GOM.curNavLevel]=ThumbnailGetLabelHeight();}
else{G.tn.labelHeight[G.GOM.curNavLevel]=0;}
G.GOM.albumIdx=albumIdx;TriggerCustomEvent('galleryRenderEnd');var fu=G.O.fnGalleryRenderEnd;if(fu!==null){typeof fu=='function'?fu(albumIdx):window[fu](albumIdx);}
if(GalleryPopulateGOM()){GallerySetLayout();GalleryAppear();GalleryDisplayPart1(false);requestTimeout(function(){GalleryDisplayPart2(false)},120);}
else{G.galleryResizeEventEnabled=true;}
if(G.O.debugMode){console.log('GalleryRenderPart3: '+(new Date()-d));}}
function GalleryResize(){var d=new Date();G.galleryResizeEventEnabled=false;if(GallerySetLayout()==false){G.galleryResizeEventEnabled=true;if(G.O.debugMode){console.log('GalleryResize1: '+(new Date()-d));}
return;}
if(G.O.debugMode){console.log('GalleryResizeSetLayout: '+(new Date()-d));}
GalleryDisplayPart1(false);GalleryDisplayPart2(false);if(G.O.debugMode){console.log('GalleryResizeFull: '+(new Date()-d));}}
function GalleryPopulateGOM(){var preloadImages='';var imageSizeRequested=false;var albumID=G.I[G.GOM.albumIdx].GetID();var l=G.I.length;var cnt=0;for(var idx=0;idx<l;idx++){var item=G.I[idx];if(item.isToDisplay(albumID)){var w=item.thumbImg().width;var h=item.thumbImg().height;if(G.layout.prerequisite.imageSize&&(w==0||h==0)){imageSizeRequested=true;preloadImages+='<img src="'+item.thumbImg().src+'" data-idx="'+cnt+'" data-albumidx="'+G.GOM.albumIdx+'">';}
if(h==0){h=G.tn.defaultSize.getHeight();}
if(w==0){w=G.tn.defaultSize.getWidth();}
var tn=new G.GOM.GTn(idx,w,h);G.GOM.items.push(tn);cnt++;}}
TriggerCustomEvent('galleryObjectModelBuilt');var fu=G.O.fnGalleryObjectModelBuilt;if(fu!==null){typeof fu=='function'?fu():window[fu]();}
if(imageSizeRequested){var $newImg=jQuery(preloadImages);var gi_imgLoad=ngimagesLoaded($newImg);$newImg=null;gi_imgLoad.on('progress',function(instance,image){if(image.isLoaded){var idx=image.img.getAttribute('data-idx');var albumIdx=image.img.getAttribute('data-albumidx');if(albumIdx==G.GOM.albumIdx){var curTn=G.GOM.items[idx];curTn.imageWidth=image.img.naturalWidth;curTn.imageHeight=image.img.naturalHeight;var item=G.I[curTn.thumbnailIdx];item.thumbs.width[G.GOM.curNavLevel][G.GOM.curWidth]=curTn.imageWidth;item.thumbs.height[G.GOM.curNavLevel][G.GOM.curWidth]=curTn.imageHeight;G.GalleryResizeThrottled();var object=item.thumbs.width.l1;for(var property in object){if(object.hasOwnProperty(property)){if(property!=G.GOM.curWidth){if(G.tn.settings.width.l1[property]==G.tn.settings.getW()&&G.tn.settings.height.l1[property]==G.tn.settings.getH()){item.thumbs.width.l1[property]=curTn.imageWidth;item.thumbs.height.l1[property]=curTn.imageHeight;}}}}
object=item.thumbs.width.lN;for(var property in object){if(object.hasOwnProperty(property)){if(property!=G.GOM.curWidth){if(G.tn.settings.width.lN[property]==G.tn.settings.getW()&&G.tn.settings.height.lN[property]==G.tn.settings.getH()){item.thumbs.width.lN[property]=curTn.imageWidth;item.thumbs.height.lN[property]=curTn.imageHeight;}}}}}}});G.galleryResizeEventEnabled=true;return false;}
else{return true;}}
function GallerySetLayout(){var r=true;G.GOM.cache.areaWidth=G.$E.conTnParent.width();G.GOM.displayArea={width:0,height:0};switch(G.layout.engine){case'JUSTIFIED':r=GallerySetLayoutWidthtAuto();break;case'CASCADING':r=GallerySetLayoutHeightAuto();break;case'MOSAIC':r=GallerySetLayoutMosaic();break;case'GRID':default:r=GallerySetLayoutGrid();break;}
TriggerCustomEvent('galleryLayoutApplied');var fu=G.O.fnGalleryLayoutApplied;if(fu!==null){typeof fu=='function'?fu():window[fu]();}
return r;}
function GallerySetLayoutHeightAuto(){var curCol=0,areaWidth=G.GOM.cache.areaWidth,curRow=0,colHeight=[],maxCol=NbThumbnailsPerRow(areaWidth),gutterWidth=0,gutterHeight=G.tn.opt.Get('gutterHeight');var w=0;var scaleFactor=1;var tnWidth=G.tn.defaultSize.getOuterWidth();var nbTn=G.GOM.items.length;var curPosY=0;if(G.O.thumbnailAlignment=='justified'){maxCol=Math.min(maxCol,nbTn);gutterWidth=(maxCol==1?0:(areaWidth-(maxCol*tnWidth))/(maxCol-1));}
else{gutterWidth=G.tn.opt.Get('gutterWidth');}
var borderWidth=G.tn.borderWidth*2;var borderHeight=G.tn.borderHeight*2;G.GOM.lastFullRow=-1;if(G.O.thumbnailAlignment=='fillWidth'){var totalGutterWidth=(maxCol-1)*gutterWidth;scaleFactor=(areaWidth-totalGutterWidth)/(maxCol*tnWidth);if(scaleFactor>1){maxCol++;}
totalGutterWidth=(maxCol-1)*gutterWidth;scaleFactor=Math.min((areaWidth-totalGutterWidth)/(maxCol*tnWidth),1);}
tnWidth=tnWidth*scaleFactor;var contentWidth=tnWidth-borderWidth;var baseHeight=G.tn.opt.Get('baseGridHeight')*scaleFactor;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.deleted==true){break;}
if(curTn.imageHeight>0&&curTn.imageWidth>0){var curPosX=0,curPosY=0;var imageRatio=curTn.imageHeight/curTn.imageWidth;curTn.resizedContentWidth=contentWidth;curTn.resizedContentHeight=curTn.resizedContentWidth*imageRatio;if(baseHeight>0){var t=Math.max(Math.trunc(curTn.resizedContentHeight/baseHeight),1);curTn.resizedContentHeight=baseHeight*t+((t-1)*(borderHeight+gutterHeight));}
curTn.height=curTn.resizedContentHeight+borderHeight+G.tn.labelHeight.get();curTn.width=tnWidth;curTn.row=0;if(curRow==0){curPosX=curCol*(tnWidth+gutterWidth);colHeight[curCol]=curTn.height+gutterHeight;curCol++;if(curCol>=maxCol){curCol=0;curRow++;}}
else{var c=0,minColHeight=colHeight[0];for(var j=1;j<maxCol;j++){if((colHeight[j]+5)<minColHeight){minColHeight=colHeight[j];c=j;}}
curPosY=colHeight[c];curPosX=c*(tnWidth+gutterWidth);colHeight[c]=curPosY+curTn.height+gutterHeight;}
var x=curPosX;if(G.O.RTL){x=w-curPosX-tnWidth;}
curTn.left=x;curTn.top=curPosY;}}
G.GOM.displayArea.width=maxCol*(tnWidth+gutterWidth)-gutterWidth;return true;}
function GallerySetLayoutWidthtAuto(){var curWidth=0,areaWidth=G.GOM.cache.areaWidth,lastPosX=0,curPosY=0,rowLastItem=[],rowNum=0,rowHeight=[],bNewRow=false,cnt=0,gutterWidth=G.tn.opt.Get('gutterWidth'),gutterHeight=G.tn.opt.Get('gutterHeight');var maxRowHeightVertical=0;var maxRowHeightHorizontal=0;var rowHasVertical=false;var rowHasHorizontal=false;var tnHeight=G.tn.defaultSize.getOuterHeight();var borderWidth=G.tn.borderWidth*2;var borderHeight=G.tn.borderHeight*2;var nbTnInCurrRow=1;var nbTn=G.GOM.items.length;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.deleted==true){break;}
if(curTn.imageWidth>0){var imageRatio=curTn.imageWidth/curTn.imageHeight;var imageWidth=Math.floor(tnHeight*imageRatio);if(bNewRow){bNewRow=false;rowNum++;curWidth=0;rowHasVertical=false;rowHasHorizontal=false;nbTnInCurrRow=1;}
if(curTn.imageHeight>curTn.imageWidth){rowHasVertical=true;}
else{rowHasHorizontal=true;}
if((curWidth+gutterWidth+imageWidth)<(areaWidth-(nbTnInCurrRow*borderWidth))){curWidth+=imageWidth+gutterWidth;rowHeight[rowNum]=tnHeight;var rowHeightLimit=Math.max(rowHasVertical?maxRowHeightVertical:0,rowHasHorizontal?maxRowHeightHorizontal:0);if(rowHeightLimit>0){rowHeight[rowNum]=Math.min(rowHeight[rowNum],rowHeightLimit);}
rowLastItem[rowNum]=i;}
else{curWidth+=gutterWidth+imageWidth;var ratio=(areaWidth-nbTnInCurrRow*borderWidth)/curWidth;var rH=Math.floor(tnHeight*ratio);rowHeight[rowNum]=rH;if(rowHasVertical){maxRowHeightVertical=Math.max(maxRowHeightVertical,rH);}
if(rowHasHorizontal){maxRowHeightHorizontal=Math.max(maxRowHeightHorizontal,rH);}
rowLastItem[rowNum]=i;bNewRow=true;}
cnt++;nbTnInCurrRow++;}}
rowNum=0;curPosY=0;lastPosX=0;cnt=0;G.GOM.lastFullRow=0;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.imageWidth>0){var imageRatio=curTn.imageWidth/curTn.imageHeight;var imageWidth=Math.floor(imageRatio*rowHeight[rowNum]);if(i==rowLastItem[rowNum]){if(rowLastItem.length!=(rowNum+1)){imageWidth=areaWidth-lastPosX-borderWidth;}
else{if((lastPosX+gutterWidth+imageWidth+borderWidth)>areaWidth){imageWidth=areaWidth-lastPosX-borderWidth;}}}
var rh=parseInt(rowHeight[rowNum]);imageWidth=parseInt(imageWidth);curTn.resizedContentWidth=imageWidth;curTn.resizedContentHeight=rh;curTn.width=imageWidth+borderWidth;curTn.height=rh+G.tn.labelHeight.get()+borderHeight;curTn.row=rowNum;curTn.top=curPosY;var x=lastPosX;if(G.O.RTL){x=areaWidth-lastPosX-curTn.width;}
curTn.left=x;lastPosX+=curTn.width+gutterWidth;if(i==rowLastItem[rowNum]){curPosY+=curTn.height+gutterHeight;G.GOM.lastFullRow=rowNum-1;rowNum++;lastPosX=0;}
cnt++;}
else{return false;}}
if(false){var newTop=0;if(typeof GOMidx!=='undefined'){if(G.GOM.albumIdx!=-1){var hoveredTn=G.GOM.items[GOMidx];var item=G.I[hoveredTn.thumbnailIdx];hoveredTn.width+=40;hoveredTn.height+=40;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.imageWidth>0){if(curTn.row==hoveredTn.row){newTop=40;if(hoveredTn.thumbnailIdx!=curTn.thumbnailIdx){curTn.top+=30;curTn.width-=20;curTn.height-=20;}}
else{if(curTn.row==0){}
else{curTn.top+=newTop;}}}}}}}
G.GOM.displayArea.width=areaWidth;return true;}
function GallerySetLayoutMosaic(){var areaWidth=G.GOM.cache.areaWidth;var gutterHeight=G.tn.opt.Get('gutterHeight');var gutterWidth=G.tn.opt.Get('gutterWidth');var borderWidth=G.tn.borderWidth*2;var borderHeight=G.tn.borderHeight*2;var nbTn=G.GOM.items.length;var row=0;var h=0;var n=0;var nbCols=0;var maxW=0;var mosaicPattern=G.tn.settings.getMosaic();for(var i=0;i<nbTn;i++){var curPatternElt=mosaicPattern[n];var cLeft=(curPatternElt.c-1)*G.tn.defaultSize.getOuterWidth()+(curPatternElt.c-1)*gutterWidth;var cWidth=curPatternElt.w*G.tn.defaultSize.getOuterWidth()+(curPatternElt.w-1)*gutterWidth;maxW=Math.max(maxW,cLeft+cWidth);nbCols=Math.max(nbCols,(curPatternElt.c-1)+curPatternElt.w);n++;if(n>=mosaicPattern.length){break;}}
var totalGutterWidth=(nbCols-1)*gutterWidth;var scaleFactor=Math.min((areaWidth-totalGutterWidth)/(maxW-totalGutterWidth),1);row=0;n=0;var mosaicPattern=G.tn.settings.getMosaic();for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];var curPatternElt=mosaicPattern[n];curTn.top=(curPatternElt.r-1)*G.tn.defaultSize.getOuterHeight()*scaleFactor+(curPatternElt.r-1)*gutterHeight+row*h+(G.tn.labelHeight.get()*(curPatternElt.r-1));if(row>0){curTn.top+=gutterHeight;}
curTn.left=(curPatternElt.c-1)*G.tn.defaultSize.getOuterWidth()*scaleFactor+(curPatternElt.c-1)*gutterWidth;curTn.height=curPatternElt.h*G.tn.defaultSize.getOuterHeight()*scaleFactor+(curPatternElt.h-1)*gutterHeight+(G.tn.labelHeight.get()*curPatternElt.h);curTn.resizedContentHeight=curTn.height-G.tn.labelHeight.get()-borderHeight;curTn.width=curPatternElt.w*G.tn.defaultSize.getOuterWidth()*scaleFactor+(curPatternElt.w-1)*gutterWidth;curTn.resizedContentWidth=curTn.width-borderWidth;curTn.row=row;if(row==0){h=Math.max(h,curTn.top+curTn.height);}
n++;if(n>=mosaicPattern.length){n=0;row++;}}
G.GOM.displayArea.width=(maxW-totalGutterWidth)*scaleFactor+totalGutterWidth;return true;}
function GallerySetLayoutGrid(){var curPosX=0,curPosY=0,areaWidth=G.GOM.cache.areaWidth,gutterWidth=0,gutterHeight=G.tn.opt.Get('gutterHeight'),maxCol=NbThumbnailsPerRow(areaWidth),w=0,cols=[],curCol=0,newAreaWidth=areaWidth,tnWidth=G.tn.defaultSize.getOuterWidth();var scaleFactor=1;var nbTn=G.GOM.items.length;var borderWidth=G.tn.borderWidth*2;var borderHeight=G.tn.borderHeight*2;if(G.O.thumbnailAlignment=='justified'){maxCol=Math.min(maxCol,nbTn);gutterWidth=(maxCol==1?0:(areaWidth-(maxCol*tnWidth))/(maxCol-1));}
else{gutterWidth=G.tn.opt.Get('gutterWidth');}
if(G.O.RTL||G.O.thumbnailAlignment=='fillWidth'){var totalGutterWidth=(maxCol-1)*gutterWidth;scaleFactor=(areaWidth-totalGutterWidth)/(maxCol*tnWidth);if(scaleFactor>1){maxCol++;}
totalGutterWidth=(maxCol-1)*gutterWidth;scaleFactor=Math.min((areaWidth-totalGutterWidth)/(maxCol*tnWidth),1);newAreaWidth=(maxCol*tnWidth)+totalGutterWidth;}
G.GOM.lastFullRow=0;var lastPosY=0;var row=0;tnWidth=tnWidth*scaleFactor;var contentWidth=tnWidth-borderWidth;var tnHeight=G.tn.defaultSize.getOuterHeight()*scaleFactor+G.tn.labelHeight.get();var contentHeight=G.tn.defaultSize.getOuterHeight()*scaleFactor-borderHeight;for(var i=0;i<nbTn;i++){if(curPosY==0){curPosX=curCol*(tnWidth+gutterWidth)
cols[curCol]=curPosX;w=curPosX+tnWidth;}
else{curPosX=cols[curCol];}
var x=curPosX;if(G.O.RTL){x=parseInt(newAreaWidth)-curPosX-tnWidth;}
var curTn=G.GOM.items[i];curTn.top=curPosY;curTn.left=x;curTn.height=tnHeight;curTn.width=tnWidth;if(G.O.thumbnailAlignment=='fillWidth'){curTn.resizedContentWidth=contentWidth;curTn.resizedContentHeight=contentHeight;}
curTn.row=row;lastPosY=curPosY;curCol++;if(curCol>=maxCol){curCol=0;curPosY+=tnHeight+gutterHeight;G.GOM.lastFullRow=row;row++;}}
G.GOM.displayArea.width=w;return true;}
function GalleryDisplayPart1(forceTransition){if(G.CSStransformName==null){G.$E.conTn.css('left','0px');}
else{G.$E.conTn.css(G.CSStransformName,'none');}
CacheViewport();}
function CacheViewport(){G.GOM.cache.viewport=getViewport();G.GOM.cache.areaWidth=G.$E.conTnParent.width();G.GOM.cache.containerOffset=G.$E.conTnParent.offset();}
function GalleryDisplayPart2(forceTransition){var nbTn=G.GOM.items.length;G.GOM.itemsDisplayed=0;var threshold=50;var cnt=0;GalleryRenderGetInterval();for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(i>=G.GOM.displayInterval.from&&cnt<G.GOM.displayInterval.len){curTn.inDisplayArea=true;if(forceTransition){curTn.neverDisplayed=true;}
G.GOM.itemsDisplayed++;cnt++;}
else{curTn.inDisplayArea=false;}}
GalleryBottomManage();var tnToDisplay=[];var tnToReDisplay=[];G.GOM.clipArea.top=-1;cnt=0;var lastTnIdx=-1;G.GOM.clipArea.height=0;for(var i=0;i<nbTn;i++){var curTn=G.GOM.items[i];if(curTn.inDisplayArea){if(G.GOM.clipArea.top==-1){G.GOM.clipArea.top=curTn.top;}
if((curTn.top-G.GOM.clipArea.top)<=-1){G.GOM.clipArea.top=curTn.top;}
G.GOM.clipArea.height=Math.max(G.GOM.clipArea.height,curTn.top-G.GOM.clipArea.top+curTn.height);if(curTn.neverDisplayed){var top=G.GOM.cache.containerOffset.top+(curTn.top-G.GOM.clipArea.top);if((top+curTn.height)>=(G.GOM.cache.viewport.t-threshold)&&top<=(G.GOM.cache.viewport.t+G.GOM.cache.viewport.h+threshold)){var item=G.I[curTn.thumbnailIdx];if(item.$elt==null){ThumbnailBuild(item,curTn.thumbnailIdx,i,(i+1)==nbTn);}
tnToDisplay.push({idx:i,delay:cnt});cnt++;}}
else{tnToReDisplay.push({idx:i,delay:0});}
lastTnIdx=i;}
else{curTn.displayed=false;var item=G.I[curTn.thumbnailIdx];if(item.$elt!=null){item.$elt.css({opacity:0,display:'none'});}}}
var areaWidth=G.$E.conTnParent.width();if(G.GOM.displayArea.width!=G.GOM.displayAreaLast.width||G.GOM.clipArea.height!=G.GOM.displayAreaLast.height){G.$E.conTn.width(G.GOM.displayArea.width).height(G.GOM.clipArea.height);G.GOM.displayAreaLast.width=G.GOM.displayArea.width;G.GOM.displayAreaLast.height=G.GOM.clipArea.height;}
if(areaWidth!=G.$E.conTnParent.width()){G.GOM.cache.areaWidth=G.$E.conTnParent.width();GallerySetLayout();GalleryDisplayPart1(forceTransition);GalleryDisplayPart2(forceTransition);return;}
if(G.layout.support.rows){if(G.galleryDisplayMode.Get()=='ROWS'||(G.galleryDisplayMode.Get()=='FULLCONTENT'&&G.galleryLastRowFull.Get()&&G.GOM.lastFullRow!=-1)){if(lastTnIdx<(nbTn-1)){G.GOM.lastDisplayedIdxNew=lastTnIdx;}
else{G.GOM.lastDisplayedIdxNew=-1;}
if(G.GOM.lastDisplayedIdx!=-1){var item=G.I[G.GOM.items[G.GOM.lastDisplayedIdx].thumbnailIdx];item.$getElt('.nGY2GThumbnailIconsFullThumbnail').html('');}}}
var nbBuild=tnToDisplay.length;G.GOM.thumbnails2Display=[];for(var i=0;i<nbBuild;i++){ThumbnailSetPosition(tnToDisplay[i].idx,i);}
var n=tnToReDisplay.length;for(var i=0;i<n;i++){ThumbnailSetPosition(tnToReDisplay[i].idx,i);}
ThumbnailDisplayAnimBatch();if(G.tn.opt.Get('displayTransition')=='NONE'){G.galleryResizeEventEnabled=true;TriggerCustomEvent('galleryDisplayed');}
else{requestTimeout(function(){G.galleryResizeEventEnabled=true;TriggerCustomEvent('galleryDisplayed');},nbBuild*G.tn.opt.Get('displayInterval'));}}
function ThumbnailSetPosition(GOMidx,cnt){var newTop=0;var curTn=G.GOM.items[GOMidx];var idx=G.GOM.items[GOMidx].thumbnailIdx;var item=G.I[idx];if(curTn.neverDisplayed){var top=curTn.top-G.GOM.clipArea.top;if(G.tn.opt.Get('stacks')>0){item.$elt.last().css({display:'block'});item.$elt.css({top:top,left:curTn.left});}
else{item.$elt.css({display:'block',top:top,left:curTn.left});}
newTop=top;if(G.O.thumbnailWaitImageLoaded===true){var gi_imgLoad=ngimagesLoaded(item.$getElt('.nGY2TnImg2'));gi_imgLoad.on('progress',function(instance,image){if(image.isLoaded){var albumIdx=image.img.getAttribute('data-albumidx');if(albumIdx==G.GOM.albumIdx){var idx=image.img.getAttribute('data-idx');G.I[idx].ThumbnailImageReveal();}}});}
ThumbnailAppear(GOMidx,cnt);curTn.displayed=true;curTn.neverDisplayed=false;}
else{var topOld=G.GOM.cache.containerOffset.top+item.top;var top=G.GOM.cache.containerOffset.top+(curTn.top-G.GOM.clipArea.top);newTop=curTn.top-G.GOM.clipArea.top;var vp=G.GOM.cache.viewport;if(G.O.thumbnailDisplayOutsideScreen||(((topOld+curTn.height)>=(vp.t-vp.h)&&topOld<=(vp.t+vp.h*4))||((top+curTn.height)>=(vp.t-vp.h)&&top<=(vp.t+vp.h*4)))){if(curTn.displayed){if(item.top!=curTn.top||item.left!=curTn.left){if(G.O.galleryResizeAnimation==true){var tweenable=new NGTweenable();tweenable.tween({from:{top:item.top,left:item.left,height:item.height,width:item.width},to:{top:newTop,left:curTn.left,height:curTn.height,width:curTn.width},attachment:{$e:item.$elt},duration:100,delay:cnt*G.tn.opt.Get('displayInterval')/5,easing:'easeOutQuart',step:function(state,att){att.$e.css(state);},finish:function(state,att){var _this=this;_this.dispose();}});}
else{item.$elt.css({top:newTop,left:curTn.left});}}}
else{curTn.displayed=true;item.$elt.css({display:'block',top:newTop,left:curTn.left,opacity:1});ThumbnailAppearFinish(item);}}
else{curTn.displayed=false;item.$elt.css({display:'none'});}}
item.left=curTn.left;item.top=newTop;if(item.width!=curTn.width||item.height!=curTn.height){item.$elt.css({width:curTn.width,height:curTn.height});item.width=curTn.width;item.height=curTn.height;if(item.resizedContentWidth!=curTn.resizedContentWidth||item.resizedContentHeight!=curTn.resizedContentHeight){if(item.kind=='albumUp'){}
else{item.$getElt('.nGY2GThumbnailImage').css({'height':curTn.resizedContentHeight,'width':curTn.resizedContentWidth});if(G.layout.engine=='JUSTIFIED'){item.$getElt('.nGY2GThumbnailImg').css({'height':curTn.resizedContentHeight,'width':curTn.resizedContentWidth});}}
item.resizedContentWidth=curTn.resizedContentWidth;item.resizedContentHeight=curTn.resizedContentHeight;}}
if(G.GOM.lastDisplayedIdxNew==GOMidx&&G.layout.support.rows){if((G.galleryDisplayMode.Get()=='ROWS'&&G.galleryMaxRows.Get()>0)||(G.galleryDisplayMode.Get()=='FULLCONTENT'&&G.galleryLastRowFull.Get()&&G.GOM.lastFullRow!=-1)){var nb=G.GOM.items.length-GOMidx-1;if(item.albumID!='0'&&G.O.thumbnailLevelUp){nb--;}
if(nb>0){if(G.O.thumbnailOpenImage||G.O.thumbnailSliderDelay>0){item.$getElt('.nGY2GThumbnailIconsFullThumbnail').html('+'+nb);}
if(G.GOM.slider.hostItem!=G.GOM.NGY2Item(GOMidx)){GalleryThumbnailSliderSetContent(G.GOM.slider.hostItem);G.GOM.slider.hostIdx=GOMidx;G.GOM.slider.hostItem=G.GOM.NGY2Item(GOMidx);G.GOM.slider.nextIdx=GOMidx;G.GOM.slider.currentIdx=GOMidx;GalleryThumbnailSliderBuildAndStart();}}
else{GalleryThumbnailSliderSetContent(G.GOM.slider.hostItem);G.GOM.slider.hostIdx=-1;}
G.GOM.lastDisplayedIdx=GOMidx;}}}
function GalleryThumbnailSliderBuildAndStart(){if(G.O.thumbnailSliderDelay==0||G.GOM.slider.hostIdx==-1){return;}
clearTimeout(G.GOM.slider.timerID);var item=G.GOM.slider.hostItem;if(item.$getElt('.nGY2TnImgNext').length==0){item.$getElt('.nGY2TnImg').clone().removeClass('nGY2TnImg').addClass('nGY2TnImgNext').insertAfter(item.$getElt('.nGY2TnImg'));item.$getElt('.nGY2TnImgBack').clone().removeClass('nGY2TnImgBack').addClass('nGY2TnImgBackNext').insertAfter(item.$getElt('.nGY2TnImg',true));item.$getElt('.nGY2GThumbnailImage',true);item.$getElt('.nGY2GThumbnailImg',true);}
item.CSSTransformSet('.nGY2TnImgNext','translateX','100%',true);item.CSSTransformApply('.nGY2TnImgNext');item.CSSTransformSet('.nGY2TnImgBackNext','translateX','100%',true);item.CSSTransformApply('.nGY2TnImgBackNext');GalleryThumbnailSliderSetNextContent();G.GOM.slider.timerID=requestTimeout(function(){GalleryThumbnailSliderStartTransition()},G.O.thumbnailSliderDelay);}
function GalleryThumbnailSliderSetNextContent(){G.GOM.slider.nextIdx++;if(G.GOM.slider.nextIdx>=G.GOM.items.length){G.GOM.slider.nextIdx=G.GOM.slider.hostIdx;}
var newItem=G.GOM.NGY2Item(G.GOM.slider.nextIdx);var imgBlurred=G.emptyGif;var bgImg="url('"+G.emptyGif+"')";if(newItem.imageDominantColors!=null){imgBlurred=newItem.imageDominantColors;bgImg="url('"+newItem.imageDominantColors+"')";}
G.GOM.slider.hostItem.$getElt('.nGY2TnImgBackNext',true).css({'background-image':bgImg,opacity:1});G.GOM.slider.hostItem.$getElt('.nGY2TnImgNext',true).css({'background-image':"url('"+newItem.thumbImg().src+"')",opacity:1});G.GOM.slider.hostItem.$getElt('.nGY2TnImgNext .nGY2GThumbnailImg',true).attr('src',newItem.thumbImg().src);}
function GalleryThumbnailSliderStartTransition(){if(G.GOM.slider.hostItem.$getElt()!=null){var tweenable=new NGTweenable();G.GOM.slider.tween=tweenable;tweenable.tween({from:{'left':100},to:{'left':0},duration:800,delay:0,easing:'easeOutQuart',step:function(state){if(G.GOM.slider.hostItem.$getElt()==null){G.GOM.slider.tween.stop(false);return;}
G.GOM.slider.hostItem.CSSTransformSet('.nGY2TnImgBack','translateX',-(100-state.left)+'%');G.GOM.slider.hostItem.CSSTransformApply('.nGY2TnImgBack');G.GOM.slider.hostItem.CSSTransformSet('.nGY2TnImg','translateX',-(100-state.left)+'%');G.GOM.slider.hostItem.CSSTransformApply('.nGY2TnImg');G.GOM.slider.hostItem.CSSTransformSet('.nGY2TnImgBackNext','translateX',state.left+'%');G.GOM.slider.hostItem.CSSTransformApply('.nGY2TnImgBackNext');G.GOM.slider.hostItem.CSSTransformSet('.nGY2TnImgNext','translateX',state.left+'%');G.GOM.slider.hostItem.CSSTransformApply('.nGY2TnImgNext');},finish:function(state){if(G.GOM.slider.hostItem.$getElt()==null){return;}
if(G.GOM.NGY2Item(G.GOM.slider.nextIdx)==null){return;}
GalleryThumbnailSliderSetContent(G.GOM.NGY2Item(G.GOM.slider.nextIdx));G.GOM.slider.currentIdx=G.GOM.slider.nextIdx;GalleryThumbnailSliderSetNextContent();clearTimeout(G.GOM.slider.timerID);G.GOM.slider.timerID=requestTimeout(function(){GalleryThumbnailSliderStartTransition()},G.O.thumbnailSliderDelay);}});}}
function GalleryThumbnailSliderSetContent(ngy2itemContent){if(G.GOM.slider.hostIdx==-1){return;}
if(G.GOM.slider.tween!=null){if(G.GOM.slider.tween._isTweening==true){G.GOM.slider.tween.stop(false);}}
var bgImg="url('"+G.emptyGif+"')";if(ngy2itemContent.imageDominantColors!=null){bgImg="url('"+ngy2itemContent.imageDominantColors+"')";}
G.GOM.slider.hostItem.$getElt('.nGY2TnImgBack').css('background-image',bgImg);G.GOM.slider.hostItem.$getElt('.nGY2TnImg').css('background-image',"url('"+ngy2itemContent.thumbImg().src+"')");G.GOM.slider.hostItem.$getElt('.nGY2TnImg .nGY2GThumbnailImg').attr('src',ngy2itemContent.thumbImg().src);G.GOM.slider.hostItem.CSSTransformSet('.nGY2TnImgBack','translateX','0');G.GOM.slider.hostItem.CSSTransformApply('.nGY2TnImgBack');G.GOM.slider.hostItem.CSSTransformSet('.nGY2TnImg','translateX','0');G.GOM.slider.hostItem.CSSTransformApply('.nGY2TnImg');G.GOM.slider.hostItem.CSSTransformSet('.nGY2TnImgBackNext','translateX','100%',true);G.GOM.slider.hostItem.CSSTransformApply('.nGY2TnImgBackNext');G.GOM.slider.hostItem.CSSTransformSet('.nGY2TnImgNext','translateX','100%',true);G.GOM.slider.hostItem.CSSTransformApply('.nGY2TnImgNext');if(G.O.thumbnailLabel.get('display')==true){var icons=G.O.icons.thumbnailAlbum;if(ngy2itemContent.kind!='album'){icons=G.O.icons.thumbnailImage;}
G.GOM.slider.hostItem.$getElt('.nGY2GThumbnailTitle').html(icons+getThumbnailTitle(ngy2itemContent));G.GOM.slider.hostItem.$getElt('.nGY2GThumbnailDescription').html(icons+getTumbnailDescription(ngy2itemContent));}}
function ThumbnailGetLabelHeight(){var newElt=[],newEltIdx=0;if(G.O.thumbnailLabel.get('display')==false){return 0;}
var desc='';if(G.O.thumbnailLabel.get('displayDescription')==true){desc='aAzZjJ';}
newElt[newEltIdx++]='<div class="nGY2GThumbnail '+G.O.theme+'" style="display:block;visibility:hidden;position:absolute;top:-9999px;left:-9999px;" ><div class="nGY2GThumbnailSub">';if(G.O.thumbnailLabel.get('display')==true){newElt[newEltIdx++]='  <div class="nGY2GThumbnailLabel" '+G.tn.style.getLabel()+'>';newElt[newEltIdx++]='    <div class="nGY2GThumbnailAlbumTitle" '+G.tn.style.getTitle()+'>aAzZjJ</div>';if(G.O.thumbnailLabel.get('displayDescription')==true){newElt[newEltIdx++]='    <div class="nGY2GThumbnailDescription" '+G.tn.style.getDesc()+'>'+'aAzZjJ'+'</div>';}
newElt[newEltIdx++]='  </div>';}
newElt[newEltIdx++]='</div></div>';var $newDiv=jQuery(newElt.join('')).appendTo(G.$E.conTn);var h=$newDiv.find('.nGY2GThumbnailLabel').outerHeight(true);$newDiv.remove();return h;}
function ThumbnailBuildStacks(bgColor){var ns=G.tn.opt.Get('stacks');if(ns==0){return'';}
var s='';for(var i=0;i<ns;i++){s='<div class="nGY2GThumbnailStack " style="display:none;'+bgColor+'"></div>'+s;}
return s;}
function ThumbnailBuildAlbumpUp(item,idx,GOMidx){var newElt=[],newEltIdx=0;var mp='';if(G.O.thumbnailOpenImage===false){mp='cursor:default;'}
newElt[newEltIdx++]=ThumbnailBuildStacks('')+'<div class="nGY2GThumbnail" style="display:none;opacity:0;'+mp+'" >';newElt[newEltIdx++]='  <div class="nGY2GThumbnailSub">';var h=G.tn.defaultSize.getHeight(),w=G.tn.defaultSize.getWidth();newElt[newEltIdx++]='    <div class="nGY2GThumbnailImage" style="width:'+w+'px;height:'+h+'px;"><img class="nGY2GThumbnailImg" src="'+G.emptyGif+'" alt="" style="max-width:'+w+'px;max-height:'+h+'px;" ></div>';newElt[newEltIdx++]='    <div class="nGY2GThumbnailAlbumUp" >'+G.O.icons.thumbnailAlbumUp+'</div>';newElt[newEltIdx++]='  </div>';newElt[newEltIdx++]='</div>';var $newDiv=jQuery(newElt.join('')).appendTo(G.$E.conTn);item.$elt=$newDiv;$newDiv.data('index',GOMidx);item.$getElt('.nGY2GThumbnailImg').data('index',GOMidx);return;}
function ThumbnailBuild(item,idx,GOMidx,lastOne){item.eltTransform=[];item.eltFilter=[];item.hoverInitDone=false;item.$Elts=[];if(item.kind=='albumUp'){ThumbnailBuildAlbumpUp(item,idx,GOMidx);return;}
var newElt=[],newEltIdx=0;var mp='';if(G.O.thumbnailOpenImage===false){mp='cursor:default;'}
var src=(item.thumbImg().src).replace(/'/g,"%27"),sTitle=getThumbnailTitle(item);var bg='';var bgImg="background-image: url('"+G.emptyGif+"');";if(item.imageDominantColors!=null){bgImg="background-image: url('"+item.imageDominantColors+"');";}
else{if(item.imageDominantColor!=null){bg='background-color:'+item.imageDominantColor+';';}
else{bgImg='';}}
var op='opacity:1;';if(G.O.thumbnailWaitImageLoaded==true){op='opacity:0;';}
newElt[newEltIdx++]=ThumbnailBuildStacks(bg)+'<div class="nGY2GThumbnail" style="display:none;opacity:0;'+mp+'"><div class="nGY2GThumbnailSub '+(G.O.thumbnailSelectable&&item.selected?"nGY2GThumbnailSubSelected":"")+'">';var w=G.tn.settings.getW();var h=G.tn.settings.getH();if(G.tn.settings.getMosaic()!==null){w=G.GOM.items[GOMidx].width;h=G.GOM.items[GOMidx].height;}
var bgSize='contain';if(G.tn.opt.Get('crop')){bgSize='cover';}
var s1="position: absolute; top: 0px; left: 0px; width:"+w+"px; height:"+h+"px;"+bg+bgImg+" background-position: center center;  background-repeat: no-repeat; background-size:"+bgSize+"; overflow: hidden;";newElt[newEltIdx++]='<div class="nGY2GThumbnailImage nGY2TnImgBack" style="'+s1+'"></div>';var s2=op+"position: absolute; top: 0px; left: 0px; width:"+w+"px; height:"+h+"px; background-image: url('"+src+"'); background-position: center center; background-repeat: no-repeat; background-size:"+bgSize+"; overflow: hidden;";newElt[newEltIdx++]='<div class="nGY2GThumbnailImage nGY2TnImg" style="'+s2+'">';newElt[newEltIdx++]='  <img class="nGY2GThumbnailImg nGY2TnImg2" src="'+src+'" alt="'+sTitle+'" style="opacity:0;" data-idx="'+idx+'" data-albumidx="'+G.GOM.albumIdx+'" >';newElt[newEltIdx++]='</div>';newElt[newEltIdx++]='<div class="nGY2GThumbnailCustomLayer"></div>';if(G.O.thumbnailLabel.get('display')==true){newElt[newEltIdx++]='  <div class="nGY2GThumbnailLabel" '+G.tn.style.getLabel(item)+'>';if(item.kind=='album'){newElt[newEltIdx++]='    <div class="nGY2GThumbnailTitle nGY2GThumbnailAlbumTitle" '+G.tn.style.getTitle()+'>'+G.O.icons.thumbnailAlbum+sTitle+'</div>';}
else{newElt[newEltIdx++]='    <div class="nGY2GThumbnailTitle nGY2GThumbnailImageTitle" '+G.tn.style.getTitle()+'>'+G.O.icons.thumbnailImage+sTitle+'</div>';}
newElt[newEltIdx++]='    <div class="nGY2GThumbnailDescription" '+G.tn.style.getDesc()+'>'+getTumbnailDescription(item)+'</div>';newElt[newEltIdx++]='  </div>';}
newElt[newEltIdx++]=ThumbnailBuildTools(item,lastOne);newElt[newEltIdx++]='</div></div>';var $newDiv=jQuery(newElt.join('')).appendTo(G.$E.conTn);item.$elt=$newDiv;$newDiv.data('index',GOMidx);item.$getElt('.nGY2GThumbnailImg').data('index',GOMidx);var fu=G.O.fnThumbnailInit;if(fu!==null){typeof fu=='function'?fu($newDiv,item,GOMidx):window[fu]($newDiv,item,GOMidx);}
if(item.title!='image gallery by nanogallery2 [build]'){ThumbnailOverInit(GOMidx);}
return;}
function ThumbnailBuildTools(item,lastThumbnail){var tb=ThumbnailBuildToolbarOne(item,'topLeft')+ThumbnailBuildToolbarOne(item,'topRight')+ThumbnailBuildToolbarOne(item,'bottomLeft')+ThumbnailBuildToolbarOne(item,'bottomRight');tb+='<div class="nGY2GThumbnailIconsFullThumbnail"></div>';return tb;}
function ThumbnailBuildToolbarOne(item,position){var toolbar='';var tb=G.tn.toolbar.get(item);var width={xs:0,sm:1,me:2,la:3,xl:4};var cnt=0;if(tb[position]!=''){var pos='top: 0; right: 0; text-align: right;';switch(position){case'topLeft':pos='top: 0; left: 0; text-align: left;';break;case'bottomRight':pos='bottom: 0; right: 0; text-align: right;';break;case'bottomLeft':pos='bottom: 0; left: 0; text-align: left;';break;}
toolbar+='  <ul class="nGY2GThumbnailIcons" style="'+pos+'">';var icons=tb[position].split(',');var nb=icons.length;for(var i=0;i<nb;i++){var icon=icons[i].replace(/^\s*|\s*$/,'');var minWidth=icon.substring(0,2).toLowerCase();var tIcon=icon;var display=true;if(/xs|sm|me|la|xl/i.test(minWidth)){if(width[minWidth]>width[G.GOM.curWidth]){display=false;}
tIcon=icon.substring(2);}
if(display){var sp=(i+1<nb?'&nbsp;':'');switch(tIcon){case'COUNTER':if(item.kind=='album'){toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="">';toolbar+='      <div class="nGY2GThumbnailIconImageCounter"></div>';toolbar+='      <div class="nGY2GThumbnailIconText">'+G.O.icons.thumbnailCounter+Math.max((item.getContentLength(false)),item.numberItems)+sp+'</div>';toolbar+='    </li>';cnt++;}
break;case'COUNTER2':if(item.kind=='album'){toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="">';toolbar+='      <div class="nGY2GThumbnailIconTextBadge">'+G.O.icons.thumbnailCounter+Math.max((item.getContentLength(false)),item.numberItems)+sp+'</div>';toolbar+='    </li>';cnt++;}
break;case'SHARE':toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="'+tIcon+'">';toolbar+='      <div>'+G.O.icons.thumbnailShare+'</div>';toolbar+='    </li>';cnt++;break;case'DOWNLOAD':toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="'+tIcon+'">';toolbar+='      <div>'+G.O.icons.thumbnailDownload+'</div>';toolbar+='    </li>';cnt++;break;case'INFO':toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="'+tIcon+'">';toolbar+='      <div>'+G.O.icons.thumbnailInfo+'</div>';toolbar+='    </li>';cnt++;break;case'CART':toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="'+tIcon+'">';toolbar+='      <div>'+G.O.icons.thumbnailCart+'</div>';toolbar+='    </li>';cnt++;break;case'DISPLAY':toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="DISPLAY">';toolbar+='      <div class="nGY2GThumbnailIconImageShare">'+G.O.icons.thumbnailDisplay+'</div>';toolbar+='    </li>';cnt++;break;case'CUSTOM1':case'CUSTOM2':case'CUSTOM3':case'CUSTOM4':case'CUSTOM5':case'CUSTOM6':case'CUSTOM7':case'CUSTOM8':case'CUSTOM9':case'CUSTOM10':var cust=tIcon.replace('CUSTOM','');toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="'+tIcon.toLowerCase()+'">';toolbar+='      <div class="nGY2GThumbnailIconImageShare">'+G.O.icons['thumbnailCustomTool'+cust]+'</div>';toolbar+='    </li>';cnt++;break;case'FEATURED':if(item.featured===true){toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="">';toolbar+='      <div class="nGY2GThumbnailIconImageFeatured">'+G.O.icons.thumbnailFeatured+'</div>';toolbar+='    </li>';cnt++;}
break;case'SELECT':if(G.O.thumbnailSelectable==true){toolbar+='    <li class="nGY2GThumbnailIcon" data-ngy2action="TOGGLESELECT">';if(item.selected===true){toolbar+='      <div class="nGY2GThumbnailIconImageSelect nGY2ThumbnailSelected">'+G.O.icons.thumbnailSelected+'</div>';}
else{toolbar+='      <div class="nGY2GThumbnailIconImageSelect nGY2ThumbnailUnselected">'+G.O.icons.thumbnailUnselected+'</div>';}
toolbar+='    </li>';cnt++;}
break;}}}
toolbar+='  </ul>';}
if(cnt>0){return toolbar;}
else{return'';}}
function getThumbnailTitle(item){var sTitle=item.title;if(G.O.thumbnailLabel.get('display')==true){if(sTitle===undefined||sTitle.length==0){sTitle='&nbsp;';}
if(G.i18nTranslations.thumbnailImageTitle!=''){sTitle=G.i18nTranslations.thumbnailImageTitle;}
var ml=G.O.thumbnailLabel.get('titleMaxLength');if(ml>3&&sTitle.length>ml){sTitle=sTitle.substring(0,ml)+'...';}}
return sTitle;}
function getTumbnailDescription(item){var sDesc='';if(G.O.thumbnailLabel.get('displayDescription')==true){if(item.kind=='album'){if(G.i18nTranslations.thumbnailImageDescription!=''){sDesc=G.i18nTranslations.thumbnailAlbumDescription;}
else{sDesc=item.description;}}
else{if(G.i18nTranslations.thumbnailImageDescription!=''){sDesc=G.i18nTranslations.thumbnailImageDescription;}
else{sDesc=item.description;}}
var ml=G.O.thumbnailLabel.get('descriptionMaxLength');if(ml>3&&sDesc.length>ml){sDesc=sDesc.substring(0,ml)+'...';}
if(sDesc.length==0){sDesc='&nbsp;';}}
return sDesc;}
function NbThumbnailsPerRow(areaWidth){var tnW=G.tn.defaultSize.getOuterWidth();var nbMaxTn=0;if(G.O.thumbnailAlignment=='justified'){nbMaxTn=Math.floor((areaWidth)/(tnW));}
else{nbMaxTn=Math.floor((areaWidth+G.tn.opt.Get('gutterWidth'))/(tnW+G.tn.opt.Get('gutterWidth')));}
if(G.O.maxItemsPerLine>0&&nbMaxTn>G.O.maxItemsPerLine){nbMaxTn=G.O.maxItemsPerLine;}
if(nbMaxTn<1){nbMaxTn=1;}
return nbMaxTn}
function ThumbnailAppear(n,cnt){var curTn=G.GOM.items[n];var item=G.I[curTn.thumbnailIdx];if(G.tn.opt.Get('displayTransition')=='NONE'){item.$elt.css({opacity:1});ThumbnailAppearFinish(item);}
else{if(item.$elt==null){return;}
var top=G.GOM.cache.containerOffset.top+(curTn.top-G.GOM.clipArea.top);var vp=G.GOM.cache.viewport;if((top+(curTn.top-G.GOM.clipArea.top))>=(vp.t-50)&&top<=(vp.t+vp.h+50)){var delay=cnt*G.tn.opt.Get('displayInterval');if(G.tn.opt.Get('displayTransition')=='CUSTOM'){if(G.GOM.curNavLevel=='lN'){G.O.fnThumbnailDisplayEffect(item.$elt,item,n,delay);}
else{G.O.fnThumbnailL1DisplayEffect(item.$elt,item,n,delay);}}
else{G.GOM.thumbnails2Display.push({itm:item,d:delay});}
return;}
else{item.$elt.css({opacity:1});ThumbnailAppearFinish(item);}}}
function ThumbnailAppearFinish(item){var ns=G.tn.opt.Get('stacks');if(ns>0){item.$elt.css({display:'block'});var o=0.9;for(var i=ns-1;i>=0;i--){item.$elt.eq(i).css('opacity',o);o=o-0.2;}}}
function ThumbnailDisplayAnim2(item,delay){function randomIntFromInterval(min,max){return Math.floor(Math.random()*(max-min+1)+min);}
var oFrom={};var oTo={};switch(G.tn.opt.Get('displayTransition')){case'RANDOMSCALE':var scales=[0.95,1,1.05,1.1];var zi=[1,2,3,4];var r=randomIntFromInterval(0,3);while(r==G.GOM.lastRandomValue){r=randomIntFromInterval(0,3);}
G.GOM.lastRandomValue=r;var f=scales[r];item.$elt.css({'z-index':G.GOM.lastZIndex+zi[r],'box-shadow':'0px 0px 5px 3px rgba(0,0,0,0.74)'});oFrom={scale:0.5,opacity:0};oTo={scale:f,opacity:1};break;case'SCALEUP':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=0.6;}
oFrom={scale:f,opacity:0};oTo={scale:1,opacity:1};break;case'SCALEDOWN':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=1.3;}
oFrom={scale:f,opacity:0};oTo={scale:1,opacity:1};break;case'SLIDEUP':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=50;}
oFrom={opacity:0,translateY:f};oTo={opacity:1,translateY:0};break;case'SLIDEDOWN':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=-50;}
oFrom={opacity:0,translateY:f};oTo={opacity:1,translateY:0};break;case'FLIPUP':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=100;}
oFrom={opacity:0,translateY:f,rotateX:45};oTo={opacity:1,translateY:0,rotateX:0};break;case'FLIPDOWN':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=-100;}
oFrom={opacity:0,translateY:f,rotateX:-45};oTo={opacity:1,translateY:0,rotateX:0};break;case'SLIDEUP2':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=100;}
oFrom={opacity:0,translateY:f,rotateY:40};oTo={opacity:1,translateY:0,rotateY:0};break;case'SLIDEDOWN2':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=-100;}
oFrom={opacity:0,translateY:f,rotateY:40};oTo={opacity:1,translateY:0,rotateY:0};break;case'SLIDERIGHT':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=-150;}
oFrom={opacity:0,translateX:f};oTo={opacity:1,translateX:0};break;case'SLIDELEFT':var f=G.tn.opt.Get('displayTransitionStartVal');if(f==0){f=150;}
oFrom={opacity:0,translateX:f};oTo={opacity:1,translateX:0};break;case'FADEIN':oFrom={opacity:0};oTo={opacity:1};break;}
var tweenable=new NGTweenable();tweenable.tween({from:oFrom,to:oTo,attachment:{$e:item.$elt,item:item,tw:tweenable},delay:delay,duration:G.tn.opt.Get('displayTransitionDuration'),easing:G.tn.opt.Get('displayTransitionEasing'),step:function(state,att){window.requestAnimationFrame(function(){if(att.item.$elt===null){att.tw.stop(false);return;}
switch(G.tn.opt.Get('displayTransition')){case'RANDOMSCALE':att.$e.css(G.CSStransformName,'scale('+state.scale+')').css('opacity',state.opacity);break;case'SCALEUP':att.$e.css(G.CSStransformName,'scale('+state.scale+')').css('opacity',state.opacity);break;case'SCALEDOWN':att.item.$elt.last().css('opacity',state.opacity);att.item.CSSTransformSet('.nGY2GThumbnail','scale',state.scale);att.item.CSSTransformApply('.nGY2GThumbnail');break;case'SLIDEUP':att.item.$elt.css('opacity',state.opacity);att.item.CSSTransformSet('.nGY2GThumbnail','translate','0px, '+state.translateY+'px');att.item.CSSTransformApply('.nGY2GThumbnail');break;case'SLIDEDOWN':att.item.$elt.css('opacity',state.opacity);att.item.CSSTransformSet('.nGY2GThumbnail','translate','0px,'+state.translateY+'px');att.item.CSSTransformApply('.nGY2GThumbnail');break;case'FLIPUP':att.item.CSSTransformSet('.nGY2GThumbnail','translate','0px,'+state.translateY+'px');att.item.CSSTransformSet('.nGY2GThumbnail','rotateX',state.rotateX+'deg');att.item.$elt.css('opacity',state.opacity);att.item.CSSTransformApply('.nGY2GThumbnail');break;case'FLIPDOWN':att.item.$elt.css('opacity',state.opacity);att.item.CSSTransformSet('.nGY2GThumbnail','translate','0px,'+state.translateY+'px');att.item.CSSTransformSet('.nGY2GThumbnail','rotateX',state.rotateX+'deg');att.item.CSSTransformApply('.nGY2GThumbnail');break;case'SLIDEUP2':att.item.$elt.css('opacity',state.opacity);att.item.CSSTransformSet('.nGY2GThumbnail','translate','0px,'+state.translateY+'px');att.item.CSSTransformSet('.nGY2GThumbnail','rotateY',state.rotateY+'deg');att.item.CSSTransformApply('.nGY2GThumbnail');break;case'SLIDEDOWN2':att.item.$elt.css('opacity',state.opacity);att.item.CSSTransformSet('.nGY2GThumbnail','translate','0px, '+state.translateY+'px');att.item.CSSTransformSet('.nGY2GThumbnail','rotateY',state.rotateY+'deg');att.item.CSSTransformApply('.nGY2GThumbnail');break;case'SLIDERIGHT':att.item.$elt.css('opacity',state.opacity);att.item.CSSTransformSet('.nGY2GThumbnail','translate',state.translateX+'px, 0px');att.item.CSSTransformApply('.nGY2GThumbnail');break;case'SLIDELEFT':att.item.CSSTransformSet('.nGY2GThumbnail','translate',state.translateX+'px, 0px');att.item.$elt.css('opacity',state.opacity);att.item.CSSTransformApply('.nGY2GThumbnail');break;case'FADEIN':att.$e.css(state);break;}});},finish:function(state,att){window.requestAnimationFrame(function(){if(att.item.$elt===null){return;}
switch(G.tn.opt.Get('displayTransition')){case'RANDOMSCALE':att.$e.css(G.CSStransformName,'scale('+state.scale+')').css('opacity','');break;case'SCALEUP':att.$e.css(G.CSStransformName,'').css('opacity','');break;case'SCALEDOWN':att.item.$elt.last().css('opacity','');att.item.CSSTransformSet('.nGY2GThumbnail','scale',state.scale);att.item.CSSTransformApply('.nGY2GThumbnail');break;case'SLIDEUP':att.item.$elt.css('opacity','');break;case'SLIDEDOWN':att.item.$elt.css('opacity','');break;case'FLIPUP':att.item.$elt.css('opacity','');break;case'FLIPDOWN':att.item.$elt.css('opacity','');break;case'SLIDEUP2':att.item.$elt.css('opacity','');break;case'SLIDEDOWN2':att.item.$elt.css('opacity','');att.item.CSSTransformApply('.nGY2GThumbnail');break;case'SLIDERIGHT':att.item.$elt.css('opacity','');break;case'SLIDELEFT':att.item.$elt.css('opacity','');break;case'FADEIN':att.$e.css('opacity','');break;}
ThumbnailAppearFinish(att.item);});}});}
function ThumbnailDisplayAnimBatch(){G.GOM.thumbnails2Display.forEach(function(one){ThumbnailDisplayAnim2(one.itm,one.d);});G.GOM.thumbnails2Display=[];}
function GalleryAppear(){var d=G.galleryDisplayTransitionDuration.Get();switch(G.galleryDisplayTransition.Get()){case'ROTATEX':G.$E.base.css({perspective:'1000px','perspective-origin':'50% 0%'});var tweenable=new NGTweenable();tweenable.tween({from:{r:50},to:{r:0},attachment:{orgIdx:G.GOM.albumIdx},duration:d,easing:'easeOutCirc',step:function(state,att){if(att.orgIdx==G.GOM.albumIdx){G.$E.conTnParent.css(G.CSStransformName,'rotateX('+state.r+'deg)');}}});break;case'SLIDEUP':G.$E.conTnParent.css({opacity:0});var tweenable=new NGTweenable();tweenable.tween({from:{y:200,o:0},to:{y:0,o:1},attachment:{orgIdx:G.GOM.albumIdx},duration:d,easing:'easeOutCirc',step:function(state,att){if(att.orgIdx==G.GOM.albumIdx){G.$E.conTnParent.css(G.CSStransformName,'translate( 0px, '+state.y+'px)').css('opacity',state.o);}}});break;case'NONE':default:break;}}
function ThumbnailOverInit(GOMidx){var curTn=G.GOM.items[GOMidx];var item=G.I[curTn.thumbnailIdx];if(item.$elt==null){return;}
var fu=G.O.fnThumbnailHoverInit;if(fu!==null){typeof fu=='function'?fu($e,item,GOMidx):window[fu]($e,item,GOMidx);}
var inits=G.tn.buildInit.get();for(var j=0;j<inits.length;j++){switch(inits[j].property){case'scale':case'rotateX':case'rotateY':case'rotateZ':case'translateX':case'translateY':case'translateZ':item.CSSTransformSet(inits[j].element,inits[j].property,inits[j].value);item.CSSTransformApply(inits[j].element);break;case'blur':case'brightness':case'grayscale':case'sepia':case'contrast':case'opacity':case'saturate':item.CSSFilterSet(inits[j].element,inits[j].property,inits[j].value);item.CSSFilterApply(inits[j].element);break;default:var $t=item.$getElt(inits[j].element);$t.css(inits[j].property,inits[j].value);break;}}
var effects=G.tn.hoverEffects.get();for(var j=0;j<effects.length;j++){if(effects[j].firstKeyframe===true){switch(effects[j].type){case'scale':case'rotateX':case'rotateY':case'rotateZ':case'translateX':case'translateY':case'translateZ':item.CSSTransformSet(effects[j].element,effects[j].type,effects[j].from);item.CSSTransformApply(effects[j].element);break;case'blur':case'brightness':case'grayscale':case'sepia':case'contrast':case'opacity':case'saturate':item.CSSFilterSet(effects[j].element,effects[j].type,effects[j].from);item.CSSFilterApply(effects[j].element);break;default:var $t=item.$getElt(effects[j].element);$t.css(effects[j].type,effects[j].from);break;}}}
item.hoverInitDone=true;}
function ThumbnailHoverReInitAll(){if(G.GOM.albumIdx==-1){return;};var l=G.GOM.items.length;for(var i=0;i<l;i++){ThumbnailOverInit(i);G.I[G.GOM.items[i].thumbnailIdx].hovered=false;}}
function ThumbnailHover(GOMidx){if(G.GOM.albumIdx==-1||!G.galleryResizeEventEnabled){return;};if(G.GOM.slider.hostIdx==GOMidx){return;}
var curTn=G.GOM.items[GOMidx];var item=G.I[curTn.thumbnailIdx];if(item.kind=='albumUp'||item.$elt==null){return;}
item.hovered=true;var fu=G.O.fnThumbnailHover;if(fu!==null){typeof fu=='function'?fu(item.$elt,item,GOMidx):window[fu](item.$elt,item,GOMidx);}
var effects=G.tn.hoverEffects.get();try{for(var j=0;j<effects.length;j++){if(effects[j].hoverin===true){item.animate(effects[j],0,true);}}}
catch(e){NanoAlert(G,'error on hover: '+e.message);}}
function ThumbnailHoverOutAll(){if(G.GOM.albumIdx==-1){return;};var l=G.GOM.items.length;for(var i=0;i<l;i++){if(G.GOM.items[i].inDisplayArea){ThumbnailHoverOut(i);}
else{G.I[G.GOM.items[i].thumbnailIdx].hovered=false;}}}
function ThumbnailHoverOut(GOMidx){if(G.GOM.albumIdx==-1||!G.galleryResizeEventEnabled){return;}
if(G.GOM.slider.hostIdx==GOMidx){return;}
var curTn=G.GOM.items[GOMidx];var item=G.I[curTn.thumbnailIdx];if(item.kind=='albumUp'||!item.hovered){return;}
item.hovered=false;if(item.$elt==null){return;}
var fu=G.O.fnThumbnailHoverOut;if(fu!==null){typeof fu=='function'?fu(item.$elt,item,GOMidx):window[fu](item.$elt,item,GOMidx);}
var effects=G.tn.hoverEffects.get();try{for(var j=0;j<effects.length;j++){if(effects[j].hoverout===true){item.animate(effects[j],0,false);}}}
catch(e){NanoAlert(G,'error on hoverOut: '+e.message);}}
function DisplayPhoto(imageID,albumID){if(G.O.debugMode){console.log('#DisplayPhoto : '+albumID+'-'+imageID);}
var albumIdx=NGY2Item.GetIdx(G,albumID);if(albumIdx==0){G.GOM.curNavLevel='l1';}
else{G.GOM.curNavLevel='lN';}
if(albumIdx==-1){if(G.O.kind!=''){NGY2Item.New(G,'','',albumID,'0','album');albumIdx=G.I.length-1;}}
var ngy2ItemIdx=NGY2Item.GetIdx(G,imageID);if(ngy2ItemIdx==-1){AlbumGetContent(albumID,DisplayPhoto,imageID,albumID);return;}
if(G.O.debugMode){console.log('#DisplayPhoto : '+ngy2ItemIdx);}
DisplayPhotoIdx(ngy2ItemIdx);}
function albumGetInfo(albumIdx,fnToCall){var url='';var kind='image';switch(G.O.kind){case'json':case'flickr':case'picasa':case'google':case'google2':default:url=G.Google.url()+'user/'+G.O.userID+'/albumid/'+G.I[albumIdx].GetID()+'?alt=json&&max-results=1&fields=title';break;}
jQuery.ajaxSetup({cache:false});jQuery.support.cors=true;var tId=setTimeout(function(){NanoAlert(G,'Could not retrieve AJAX data...');},60000);jQuery.getJSON(url,function(data,status,xhr){clearTimeout(tId);fnToCall(G.I[albumIdx].GetID());}).fail(function(jqxhr,textStatus,error){clearTimeout(tId);var err=textStatus+', '+error;NanoAlert('Could not retrieve ajax data: '+err);});}
function AlbumGetContent(albumID,fnToCall,fnParam1,fnParam2){switch(G.O.kind){case'':AlbumGetMarkupOrApi(fnToCall,fnParam1,fnParam2);break;default:jQuery.nanogallery2['data_'+G.O.kind](G,'AlbumGetContent',albumID,fnToCall,fnParam1,fnParam2);}}
var mediaList={youtube:{getID:function(url){var s=url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);return s!=null?s[1]:null;},thumbUrl:function(id){return'https://img.youtube.com/vi/'+id+'/hqdefault.jpg';},url:function(id){return'https://www.youtube.com/embed/'+id;},markup:function(id){return'<iframe class="nGY2ViewerMedia" src="https://www.youtube.com/embed/'+id+'?rel=0" frameborder="0" allow="autoplay" allowfullscreen></iframe>';},kind:'iframe'},vimeo:{getID:function(url){var s=url.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);return s!=null?s[5]:null;},url:function(id){return'https://player.vimeo.com/video/'+id;},markup:function(id){return'<iframe class="nGY2ViewerMedia" src="https://player.vimeo.com/video/'+id+'?rel=0" frameborder="0" allow="autoplay" allowfullscreen></iframe>';},kind:'iframe'},dailymotion:{getID:function(url){var m=url.match(/^.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/);if(m!==null){if(m[4]!==undefined){return m[4];}
return m[2];}
return null;},thumbUrl:function(id){return'https://www.dailymotion.com/thumbnail/video/'+id;},url:function(id){return'https://www.dailymotion.com/embed/video/'+id;},markup:function(id){return'<iframe class="nGY2ViewerMedia" src="https://www.dailymotion.com/embed/video/'+id+'?rel=0" frameborder="0" allow="autoplay" allowfullscreen></iframe>';},kind:'iframe'},selfhosted:{getID:function(url){var extension=url.split('.').pop();var s=(extension==='mp4'||extension==='webm'||extension==='ogv'||extension==='3gp')?extension:null;return s;},markup:function(url){var extension=url.split('.').pop();return'<video controls class="nGY2ViewerMedia"><source src="'+url+'" type="video/'+extension+'" preload="auto">Your browser does not support the video tag (HTML 5).</video>';},kind:'video',selfhosted:true}};function AlbumGetMarkupOrApi(fnToCall,fnParam1,fnParam2){if(G.markupOrApiProcessed===true){DisplayAlbum('-1',0);return;}
if(G.O.items!==undefined&&G.O.items!==null){GetContentApiObject();}
else{if(G.O.$markup.length>0){GetContentMarkup(G.O.$markup);G.O.$markup=[];}
else{NanoConsoleLog(G,'error: no media to process.');return;}}
G.markupOrApiProcessed=true;if(fnToCall!==null&&fnToCall!==undefined){fnToCall(fnParam1,fnParam2,null);}}
function StartsWithProtocol(path){if(path==null||path==undefined){return false;}
var pattern=/^((http|https|ftp|ftps|file):\/\/)/;if(!pattern.test(path)){return false;}
return true;}
function GetContentApiObject(){var foundAlbumID=false;var nbTitles=0;var AlbumPostProcess=NGY2Tools.AlbumPostProcess.bind(G);G.I[0].contentIsLoaded=true;jQuery.each(G.O.items,function(i,item){var title='';title=GetI18nItem(item,'title');if(title===undefined){title='';}
var src='';if(item['src'+RetrieveCurWidth().toUpperCase()]!==undefined){src=item['src'+RetrieveCurWidth().toUpperCase()];}
else{src=item.src;}
if(!StartsWithProtocol(src)){src=G.O.itemsBaseURL+src;}
var thumbsrc='';if(item.srct!==undefined&&item.srct.length>0){thumbsrc=item.srct;if(!StartsWithProtocol(thumbsrc)){thumbsrc=G.O.itemsBaseURL+thumbsrc;}}
else{thumbsrc=src;}
var thumbsrcX2='';if(item.srct2x!==undefined&&item.srct2x.length>0){thumbsrcX2=item.srct2x;if(!StartsWithProtocol(thumbsrcX2)){thumbsrcX2=G.O.itemsBaseURL+thumbsrcX2;}}
else{if(thumbsrc!=''){thumbsrcX2=thumbsrc;}
else{thumbsrcX2=src;}}
if(G.O.thumbnailLabel.get('title')!=''){title=GetImageTitle(src);}
var description='';description=GetI18nItem(item,'description');if(description===undefined){description='';}
var tags=GetI18nItem(item,'tags');if(tags===undefined){tags='';}
var albumID=0;if(item.albumID!==undefined){albumID=item.albumID;foundAlbumID=true;}
var ID=null;if(item.ID!==undefined){ID=item.ID;}
var kind='image';if(item.kind!==undefined&&item.kind.length>0){kind=item.kind;}
var newItem=NGY2Item.New(G,title,description,ID,albumID,kind,tags);if(title!=''){nbTitles++;}
newItem.setMediaURL(src,'img');jQuery.each(mediaList,function(n,media){var id=media.getID(src);if(id!=null){if(typeof media.url=='function'){src=media.url(id);}
if(typeof media.thumbUrl=='function'){thumbsrc=media.thumbUrl(id);}
newItem.mediaKind=media.kind;newItem.mediaMarkup=(media.selfhosted)?media.markup(src):media.markup(id);return false;}});if(item.imageWidth!==undefined){newItem.imageWidth=item.width;}
if(item.imageHeight!==undefined){newItem.imageHeight=item.height;}
var tw=item.imgtWidth!==undefined?item.imgtWidth:0;var th=item.imgtHeight!==undefined?item.imgtHeight:0;newItem.thumbs={url:{l1:{xs:thumbsrc,sm:thumbsrc,me:thumbsrc,la:thumbsrc,xl:thumbsrc},lN:{xs:thumbsrc,sm:thumbsrc,me:thumbsrc,la:thumbsrc,xl:thumbsrc}},width:{l1:{xs:tw,sm:tw,me:tw,la:tw,xl:tw},lN:{xs:tw,sm:tw,me:tw,la:tw,xl:tw}},height:{l1:{xs:th,sm:th,me:th,la:th,xl:th},lN:{xs:th,sm:th,me:th,la:th,xl:th}}};if(newItem.mediaKind=='img'){var lst=['xs','sm','me','la','xl'];for(var i=0;i<lst.length;i++){var turl=item['srct'+lst[i].toUpperCase()];if(turl!==undefined){if(!StartsWithProtocol(turl)){turl=G.O.itemsBaseURL+turl;}
newItem.url.l1[lst[i]]=turl;newItem.url.lN[lst[i]]=turl;}
var tw=item['imgt'+lst[i].toUpperCase()+'Width'];if(tw!=undefined){newItem.width.l1[lst[i]]=parseInt(tw);newItem.width.lN[lst[i]]=parseInt(tw);}
var th=item['imgt'+lst[i].toUpperCase()+'Height'];if(th!=undefined){newItem.height.l1[lst[i]]=parseInt(th);newItem.height.lN[lst[i]]=parseInt(th);}}}
if(item.imageDominantColors!==undefined){newItem.imageDominantColors=item.imageDominantColors;}
if(item.imageDominantColor!==undefined){newItem.imageDominantColor=item.imageDominantColor;}
if(item.destURL!==undefined&&item.destURL.length>0){newItem.destinationURL=item.destURL;}
if(item.downloadURL!==undefined&&item.downloadURL.length>0){newItem.downloadURL=item.downloadURL;}
if(item.exifModel!==undefined){newItem.exif.model=item.exifModel;}
if(item.exifFlash!==undefined){newItem.exif.flash=item.exifFlash;}
if(item.exifFocalLength!==undefined){newItem.exif.focallength=item.exifFocalLength;}
if(item.exifFStop!==undefined){newItem.exif.fstop=item.exifFStop;}
if(item.exifExposure!==undefined){newItem.exif.exposure=item.exifExposure;}
if(item.exifIso!==undefined){newItem.exif.iso=item.exifIso;}
if(item.exifTime!==undefined){newItem.exif.time=item.exifTime;}
if(item.exifLocation!==undefined){newItem.exif.location=item.exifLocation;}
if(item.customData!==null){newItem.customData=cloneJSObject(item.customData);}
newItem.contentIsLoaded=true;var fu=G.O.fnProcessData;if(fu!==null){typeof fu=='function'?fu(newItem,'api',item):window[fu](newItem,'api',item);}
AlbumPostProcess(albumID);});if(nbTitles==0){G.O.thumbnailLabel.display=false;}}
function GetContentMarkup($elements){var foundAlbumID=false;var nbTitles=0;var AlbumPostProcess=NGY2Tools.AlbumPostProcess.bind(G);G.I[0].contentIsLoaded=true;jQuery.each($elements,function(i,item){var data={'data-ngdesc':'','data-ngid':null,'data-ngkind':'image','data-ngtags':null,'data-ngdest':'','data-ngthumbimgwidth':0,'data-ngthumbimgheight':0,'data-ngimagewidth':0,'data-ngimageheight':0,'data-ngimagedominantcolors':null,'data-ngimagedominantcolor':null,'data-ngexifmodel':'','data-ngexifflash':'','data-ngexiffocallength':'','data-ngexiffstop':'','data-ngexifexposure':'','data-ngexifiso':'','data-ngexiftime':'','data-ngexiflocation':''};[].forEach.call(item.attributes,function(attr){data[attr.name.toLowerCase()]=attr.value;});var src='',st=RetrieveCurWidth().toUpperCase();if(data.hasOwnProperty('data-ngsrc'+st)){src=data['data-ngsrc'+st];}
if(src==''){src=data['href'];}
if(!StartsWithProtocol(src)){src=G.O.itemsBaseURL+src;}
var thumbsrc='';if(data.hasOwnProperty('data-ngthumb')){thumbsrc=data['data-ngthumb'];if(!StartsWithProtocol(thumbsrc)){thumbsrc=G.O.itemsBaseURL+thumbsrc;}}
else{thumbsrc=src;}
var thumbsrcX2='';if(data.hasOwnProperty('data-ngthumb2x')){thumbsrcX2=data['data-ngthumb2x'];if(!StartsWithProtocol(thumbsrcX2)){thumbsrcX2=G.O.itemsBaseURL+thumbsrcX2;}}
var description=data['data-ngdesc'];var ID=data['id'];if(ID==undefined){ID=data['data-ngid'];}
var kind=data['data-ngkind'];var tags=data['data-ngtags'];var albumID='0';if(data.hasOwnProperty('data-ngalbumid')){albumID=data['data-ngalbumid'];foundAlbumID=true;}
var title=jQuery(item).text();if(!(G.O.thumbnailLabel.get('title')==''||G.O.thumbnailLabel.get('title')==undefined)){title=GetImageTitle(src);}
var newItem=NGY2Item.New(G,title,description,ID,albumID,kind,tags);if(title!=''){nbTitles++;}
newItem.setMediaURL(src,'img');newItem.mediaKind='img';jQuery.each(mediaList,function(n,media){var id=media.getID(src);if(id!=null){if(typeof media.url=='function'){src=media.url(id);}
if(typeof media.thumbUrl=='function'){thumbsrc=media.thumbUrl(id);}
newItem.mediaKind=media.kind;newItem.mediaMarkup=(media.selfhosted)?media.markup(src):media.markup(id);return false;}});newItem.imageWidth=parseInt(data['data-ngimagewidth']);newItem.imageHeight=parseInt(data['data-ngimageheight']);var tw=parseInt(data['data-ngthumbimgwidth']);var th=parseInt(data['data-ngthumbimgheight']);newItem.thumbs={url:{l1:{xs:thumbsrc,sm:thumbsrc,me:thumbsrc,la:thumbsrc,xl:thumbsrc},lN:{xs:thumbsrc,sm:thumbsrc,me:thumbsrc,la:thumbsrc,xl:thumbsrc}},width:{l1:{xs:tw,sm:tw,me:tw,la:tw,xl:tw},lN:{xs:tw,sm:tw,me:tw,la:tw,xl:tw}},height:{l1:{xs:th,sm:th,me:th,la:th,xl:th},lN:{xs:th,sm:th,me:th,la:th,xl:th}}};if(newItem.mediaKind=='img'){var lst=['xs','sm','me','la','xl'];for(var i=0;i<lst.length;i++){if(data.hasOwnProperty('data-ngthumb'+lst[i])){var turl=data['data-ngthumb'+lst[i]];if(!StartsWithProtocol(turl)){turl=G.O.itemsBaseURL+turl;}
newItem.url.l1[lst[i]]=turl;newItem.url.lN[lst[i]]=turl;}
if(data.hasOwnProperty('data-ngthumb'+lst[i]+'width')){var tw=parseInt(data['data-ngthumb'+lst[i]+'width']);newItem.width.l1[lst[i]]=tw;newItem.width.lN[lst[i]]=tw;}
if(data.hasOwnProperty('data-ngthumb'+lst[i]+'height')){var th=parseInt('data-ngthumb'+lst[i]+'height');newItem.height.l1[lst[i]]=th;newItem.height.lN[lst[i]]=th;}}}
newItem.imageDominantColors=data['data-ngimagedominantcolors'];newItem.imageDominantColor=data['data-ngimagedominantcolors'];newItem.destinationURL=data['data-ngdest'];newItem.downloadURL=data['data-ngdownloadurl'];newItem.exif.model=data['data-ngexifmodel'];newItem.exif.flash=data['data-ngexifflash'];newItem.exif.focallength=data['data-ngexiffocallength'];newItem.exif.fstop=data['data-ngexiffstop'];newItem.exif.exposure=data['data-ngexifexposure'];newItem.exif.iso=data['data-ngexifiso'];newItem.exif.time=data['data-ngexiftime'];newItem.exif.location=data['data-ngexiflocation'];newItem.contentIsLoaded=true;if(jQuery(item).data('customdata')!==undefined){newItem.customData=cloneJSObject(jQuery(item).data('customdata'));}
if(jQuery(item).data('ngcustomdata')!==undefined){newItem.customData=cloneJSObject(jQuery(item).data('ngcustomdata'));}
var fu=G.O.fnProcessData;if(fu!==null){typeof fu=='function'?fu(newItem,'markup',item):window[fu](newItem,'markup',item);}
AlbumPostProcess(albumID);});if(nbTitles==0){G.O.thumbnailLabel.display=false;}}
function DefineVariables(){if(G.O.kind.toUpperCase()=='PICASA'||G.O.kind.toUpperCase()=='GOOGLE'){G.O.kind='google2';}
G.GOM.cache.viewport=getViewport();G.GOM.curWidth=RetrieveCurWidth();jQuery.extend(true,G.tn.toolbar.image,G.O.thumbnailToolbarImage);jQuery.extend(true,G.tn.toolbar.album,G.O.thumbnailToolbarAlbum);var t=['image','album'];var pos=['topLeft','topRight','bottomLeft','bottomRight']
for(var i=0;i<t.length;i++){for(var j=0;j<pos.length;j++){G.tn.toolbar[t[i]][pos[j]]=G.tn.toolbar[t[i]][pos[j]].toUpperCase();}}
G.O.thumbnailLabel.get=function(opt){if(G.GOM.curNavLevel=='l1'&&G.O.thumbnailL1Label!==undefined&&G.O.thumbnailL1Label[opt]!==undefined){return G.O.thumbnailL1Label[opt];}
else{return G.O.thumbnailLabel[opt];}};G.O.thumbnailLabel.set=function(opt,value){if(G.GOM.curNavLevel=='l1'&&G.O.thumbnailL1Label!==undefined&&G.O.thumbnailL1Label[opt]!==undefined){G.O.thumbnailL1Label[opt]=value;}
else{G.O.thumbnailLabel[opt]=value;}};if(G.O.blackList!=''){G.blackList=G.O.blackList.toUpperCase().split('|');}
if(G.O.whiteList!=''){G.whiteList=G.O.whiteList.toUpperCase().split('|');}
if(G.O.albumList2!==undefined&&G.O.albumList2!==null&&G.O.albumList2.constructor===Array){var l=G.O.albumList2.length;for(var i=0;i<l;i++){G.albumList.push(G.O.albumList2[i]);}}
if(G.O.albumList2!==undefined&&typeof G.O.albumList2=='string'){G.albumList.push(G.O.albumList2);}
G.tn.opt.lN.crop=G.O.thumbnailCrop;G.tn.opt.l1.crop=G.O.thumbnailL1Crop!=null?G.O.thumbnailL1Crop:G.O.thumbnailCrop;function ThumbnailOpt(lN,l1,opt){G.tn.opt.lN[opt]=G.O[lN];G.tn.opt.l1[opt]=G.O[lN];if(toType(G.O[l1])=='number'){G.tn.opt.l1[opt]=G.O[l1];}}
ThumbnailOpt('thumbnailStacks','thumbnailL1Stacks','stacks');ThumbnailOpt('thumbnailStacksTranslateX','thumbnailL1StacksTranslateX','stacksTranslateX');ThumbnailOpt('thumbnailStacksTranslateY','thumbnailL1StacksTranslateY','stacksTranslateY');ThumbnailOpt('thumbnailStacksTranslateZ','thumbnailL1StacksTranslateZ','stacksTranslateZ');ThumbnailOpt('thumbnailStacksRotateX','thumbnailL1StacksRotateX','stacksRotateX');ThumbnailOpt('thumbnailStacksRotateY','thumbnailL1StacksRotateY','stacksRotateY');ThumbnailOpt('thumbnailStacksRotateZ','thumbnailL1StacksRotateZ','stacksRotateZ');ThumbnailOpt('thumbnailStacksScale','thumbnailL1StacksScale','stacksScale');ThumbnailOpt('thumbnailGutterWidth','thumbnailL1GutterWidth','gutterWidth');ThumbnailOpt('thumbnailGutterHeight','thumbnailL1GutterHeight','gutterHeight');ThumbnailOpt('thumbnailBaseGridHeight','thumbnailL1BaseGridHeight','baseGridHeight');G.galleryDisplayMode.lN=G.O.galleryDisplayMode.toUpperCase();G.galleryDisplayMode.l1=G.O.galleryL1DisplayMode!=null?G.O.galleryL1DisplayMode.toUpperCase():G.O.galleryDisplayMode.toUpperCase();G.galleryMaxRows.lN=G.O.galleryMaxRows;G.galleryMaxRows.l1=toType(G.O.galleryL1MaxRows)=='number'?G.O.galleryL1MaxRows:G.O.galleryMaxRows;G.galleryLastRowFull.lN=G.O.galleryLastRowFull;G.galleryLastRowFull.l1=G.O.galleryL1LastRowFull!=null?G.O.galleryL1LastRowFull:G.O.galleryLastRowFull;G.gallerySorting.lN=G.O.gallerySorting.toUpperCase();G.gallerySorting.l1=G.O.galleryL1Sorting!=null?G.O.galleryL1Sorting.toUpperCase():G.gallerySorting.lN;G.galleryDisplayTransition.lN=G.O.galleryDisplayTransition.toUpperCase();G.galleryDisplayTransition.l1=G.O.galleryL1DisplayTransition!=null?G.O.galleryL1DisplayTransition.toUpperCase():G.galleryDisplayTransition.lN;G.galleryDisplayTransitionDuration.lN=G.O.galleryDisplayTransitionDuration;G.galleryDisplayTransitionDuration.l1=G.O.galleryL1DisplayTransitionDuration!=null?G.O.galleryL1DisplayTransitionDuration:G.galleryDisplayTransitionDuration.lN;G.galleryMaxItems.lN=G.O.galleryMaxItems;G.galleryMaxItems.l1=toType(G.O.galleryL1MaxItems)=='number'?G.O.galleryL1MaxItems:G.O.galleryMaxItems;G.galleryFilterTags.lN=G.O.galleryFilterTags;G.galleryFilterTags.l1=G.O.galleryL1FilterTags!=null?G.O.galleryL1FilterTags:G.O.galleryFilterTags;G.O.galleryPaginationMode=G.O.galleryPaginationMode.toUpperCase();if(toType(G.O.slideshowDelay)=='number'&&G.O.slideshowDelay>=2000){G.VOM.slideshowDelay=G.O.slideshowDelay;}
else{NanoConsoleLog(G,'Parameter "slideshowDelay" must be an integer >= 2000 ms.');}
if(typeof G.O.thumbnailDisplayTransition=='boolean'){if(G.O.thumbnailDisplayTransition===true){G.tn.opt.lN.displayTransition='FADEIN';G.tn.opt.l1.displayTransition='FADEIN';}
else{G.tn.opt.lN.displayTransition='NONE';G.tn.opt.l1.displayTransition='NONE';}}
if(G.O.fnThumbnailDisplayEffect!==''){G.tn.opt.lN.displayTransition='CUSTOM';G.tn.opt.l1.displayTransition='CUSTOM';}
if(G.O.fnThumbnailL1DisplayEffect!==''){G.tn.opt.l1.displayTransition='CUSTOM';}
function thumbnailDisplayTransitionParse(cfg,level){if(typeof cfg=='string'){var st=cfg.split('_');if(st.length==1){G.tn.opt[level]['displayTransition']=cfg.toUpperCase();}
if(st.length==2){G.tn.opt[level]['displayTransition']=st[0].toUpperCase();G.tn.opt[level]['displayTransitionStartVal']=Number(st[1]);}
if(st.length==3){G.tn.opt[level]['displayTransition']=st[0].toUpperCase();G.tn.opt[level]['displayTransitionStartVal']=Number(st[1]);G.tn.opt[level]['displayTransitionEasing']=st[2];}}}
thumbnailDisplayTransitionParse(G.O.thumbnailDisplayTransition,'lN');thumbnailDisplayTransitionParse(G.O.thumbnailDisplayTransition,'l1');thumbnailDisplayTransitionParse(G.O.thumbnailL1DisplayTransition,'l1');ThumbnailOpt('thumbnailDisplayTransitionDuration','thumbnailL1DisplayTransitionDuration','displayTransitionDuration');ThumbnailOpt('thumbnailDisplayInterval','thumbnailL1DisplayInterval','displayInterval');if(G.O.thumbnailSizeSM!==undefined){G.O.breakpointSizeSM=G.O.thumbnailSizeSM;}
if(G.O.thumbnailSizeME!==undefined){G.O.breakpointSizeME=G.O.thumbnailSizeME;}
if(G.O.thumbnailSizeLA!==undefined){G.O.breakpointSizeLA=G.O.thumbnailSizeLA;}
if(G.O.thumbnailSizeXL!==undefined){G.O.breakpointSizeXL=G.O.thumbnailSizeXL;}
if(G.O.thumbnailL1BuildInit2!==undefined){var t1=G.O.thumbnailL1BuildInit2.split('|');for(var i=0;i<t1.length;i++){var o1=t1[i].trim().split('_');if(o1.length==3){var i1=NewTBuildInit();i1.element=ThumbnailOverEffectsGetCSSElement(o1[0],'');i1.property=o1[1];i1.value=o1[2];G.tn.buildInit.level1.push(i1);}}}
if(G.O.thumbnailBuildInit2!==undefined){var t1=G.O.thumbnailBuildInit2.split('|');for(var i=0;i<t1.length;i++){var o1=t1[i].trim().split('_');if(o1.length==3){var i1=NewTBuildInit();i1.element=ThumbnailOverEffectsGetCSSElement(o1[0],'');i1.property=o1[1];i1.value=o1[2];G.tn.buildInit.std.push(i1);}}}
var tL1HE=G.O.thumbnailL1HoverEffect2;if(tL1HE!==undefined){switch(toType(tL1HE)){case'string':var tmp=tL1HE.split('|');for(var i=0;i<tmp.length;i++){var oDef=NewTHoverEffect();oDef=ThumbnailHoverEffectExtract(tmp[i].trim(),oDef);if(oDef!=null){G.tn.hoverEffects.level1.push(oDef);}}
break;case'object':var oDef=NewTHoverEffect();oDef=jQuery.extend(oDef,tL1HE);oDef=ThumbnailHoverEffectExtract(oDef.name,oDef);if(oDef!=null){G.tn.hoverEffects.level1.push(oDef);}
break;case'array':for(var i=0;i<tL1HE.length;i++){var oDef=NewTHoverEffect();oDef=jQuery.extend(oDef,tL1HE[i]);oDef=ThumbnailHoverEffectExtract(oDef.name,oDef);if(oDef!=null){G.tn.hoverEffects.level1.push(oDef);}}
break;case'null':break;default:NanoAlert(G,'incorrect parameter for "thumbnailL1HoverEffect2".');}}
G.tn.hoverEffects.level1=ThumbnailOverEffectsPreset(G.tn.hoverEffects.level1);var tHE=G.O.thumbnailHoverEffect2;switch(toType(tHE)){case'string':var tmp=tHE.split('|');for(var i=0;i<tmp.length;i++){var oDef=NewTHoverEffect();oDef=ThumbnailHoverEffectExtract(tmp[i].trim(),oDef);if(oDef!=null){G.tn.hoverEffects.std.push(oDef);}}
break;case'object':var oDef=NewTHoverEffect();oDef=jQuery.extend(oDef,tHE);oDef=ThumbnailHoverEffectExtract(oDef.name,oDef);if(oDef!=null){G.tn.hoverEffects.std.push(oDef);}
break;case'array':for(var i=0;i<tHE.length;i++){var oDef=NewTHoverEffect();oDef=jQuery.extend(oDef,tHE[i]);oDef=ThumbnailHoverEffectExtract(oDef.name,oDef);if(oDef!=null){G.tn.hoverEffects.std.push(oDef);}}
break;case'null':break;default:NanoAlert(G,'incorrect parameter for "thumbnailHoverEffect2".');}
G.tn.hoverEffects.std=ThumbnailOverEffectsPreset(G.tn.hoverEffects.std);if(G.O.touchAnimationL1==undefined){G.O.touchAnimationL1=G.O.touchAnimation;}
if(G.tn.hoverEffects.std.length==0){if(G.tn.hoverEffects.level1.length==0){G.O.touchAnimationL1=false;}
G.O.touchAnimation=false;}
if(G.O.thumbnailHeight==0||G.O.thumbnailHeight==''){G.O.thumbnailHeight='auto';}
if(G.O.thumbnailWidth==0||G.O.thumbnailWidth==''){G.O.thumbnailWidth='auto';}
if(G.O.thumbnailL1Height==0||G.O.thumbnailL1Height==''){G.O.thumbnailL1Height='auto';}
if(G.O.thumbnailL1Width==0||G.O.thumbnailL1Width==''){G.O.thumbnailL1Width='auto';}
function ThumbnailSizes(srcOpt,onlyl1,opt){if(G.O[srcOpt]==null){return;}
if(toType(G.O[srcOpt])=='number'){ThumbnailsSetSize(opt,'l1',G.O[srcOpt],'u');if(!onlyl1){ThumbnailsSetSize(opt,'lN',G.O[srcOpt],'u');}}
else{var ws=G.O[srcOpt].split(' ');var v='auto';if(ws[0].substring(0,4)!='auto'){v=parseInt(ws[0]);}
var c='u';if(ws[0].charAt(ws[0].length-1)=='C'){c='c';}
ThumbnailsSetSize(opt,'l1',v,c);if(!onlyl1){ThumbnailsSetSize(opt,'lN',v,c);}
for(var i=1;i<ws.length;i++){var r=ws[i].substring(0,2).toLowerCase();if(/xs|sm|me|la|xl/i.test(r)){var w=ws[i].substring(2);var v='auto';if(w.substring(0,4)!='auto'){v=parseInt(w);}
var c='u';if(w.charAt(w.length-1)=='C'){c='c';}
G.tn.settings[opt]['l1'][r]=v;G.tn.settings[opt]['l1'][r+'c']=c;if(!onlyl1){G.tn.settings[opt]['lN'][r]=v;G.tn.settings[opt]['lN'][r+'c']=c;}}}}}
ThumbnailSizes('thumbnailWidth',false,'width');ThumbnailSizes('thumbnailL1Width',true,'width');ThumbnailSizes('thumbnailHeight',false,'height');ThumbnailSizes('thumbnailL1Height',true,'height');G.O.thumbnailBorderHorizontal=parseInt(G.O.thumbnailBorderHorizontal);G.O.thumbnailBorderVertical=parseInt(G.O.thumbnailBorderVertical);G.O.thumbnailLabelHeight=parseInt(G.O.thumbnailLabelHeight);if(G.O.galleryMosaic!=undefined){G.tn.settings.mosaic.l1.xs=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.l1.sm=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.l1.me=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.l1.la=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.l1.xl=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.lN.xs=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.lN.sm=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.lN.me=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.lN.la=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaic.lN.xl=JSON.parse(JSON.stringify(G.O.galleryMosaic));G.tn.settings.mosaicCalcFactor('l1','xs');G.tn.settings.mosaicCalcFactor('l1','sm');G.tn.settings.mosaicCalcFactor('l1','me');G.tn.settings.mosaicCalcFactor('l1','la');G.tn.settings.mosaicCalcFactor('l1','xl');G.tn.settings.mosaicCalcFactor('lN','xs');G.tn.settings.mosaicCalcFactor('lN','sm');G.tn.settings.mosaicCalcFactor('lN','me');G.tn.settings.mosaicCalcFactor('lN','la');G.tn.settings.mosaicCalcFactor('lN','xl');}
if(G.O.galleryL1Mosaic!=undefined){G.tn.settings.mosaic.l1.xs=JSON.parse(JSON.stringify(G.O.galleryL1Mosaic));G.tn.settings.mosaic.l1.sm=JSON.parse(JSON.stringify(G.O.galleryL1Mosaic));G.tn.settings.mosaic.l1.me=JSON.parse(JSON.stringify(G.O.galleryL1Mosaic));G.tn.settings.mosaic.l1.la=JSON.parse(JSON.stringify(G.O.galleryL1Mosaic));G.tn.settings.mosaic.l1.xl=JSON.parse(JSON.stringify(G.O.galleryL1Mosaic));G.tn.settings.mosaicCalcFactor('l1','xs');G.tn.settings.mosaicCalcFactor('l1','sm');G.tn.settings.mosaicCalcFactor('l1','me');G.tn.settings.mosaicCalcFactor('l1','la');G.tn.settings.mosaicCalcFactor('l1','xl');}
for(var w=0;w<G.tn.settings.mosaic.l1;w++){if(G.O['galleryMosaic'+G.tn.settings.mosaic.l1[w].toUpperCase()]!=undefined){G.tn.settings.mosaic.lN[tn.settings.mosaic.l1[w]]=JSON.parse(JSON.stringify(G.O['galleryMosaic'+G.tn.settings.mosaic.l1[w].toUpperCase()]));G.tn.settings.mosaic.l1[tn.settings.mosaic.l1[w]]=JSON.parse(JSON.stringify(G.O['galleryMosaic'+G.tn.settings.mosaic.l1[w].toUpperCase()]));G.tn.settings.mosaicCalcFactor('l1',G.tn.settings.mosaic.l1[w]);G.tn.settings.mosaicCalcFactor('lN',G.tn.settings.mosaic.l1[w]);}}
for(var w=0;w<G.tn.settings.mosaic.l1;w++){if(G.O['galleryL1Mosaic'+G.tn.settings.mosaic.l1[w].toUpperCase()]!=undefined){G.tn.settings.mosaic.l1[tn.settings.mosaic.l1[w]]=JSON.parse(JSON.stringify(G.O['galleryL1Mosaic'+G.tn.settings.mosaic.l1[w].toUpperCase()]));G.tn.settings.mosaicCalcFactor('l1',G.tn.settings.mosaic.l1[w]);}}
G.O.imageTransition=G.O.imageTransition.toUpperCase();G.layout.SetEngine();switch(G.O.kind){case'':break;default:jQuery.nanogallery2['data_'+G.O.kind](G,'Init');}}
function ThumbnailHoverEffectExtract(name,effect){var easings=['easeInQuad','easeOutQuad','easeInOutQuad','easeInCubic','easeOutCubic','easeInOutCubic','easeInQuart','easeOutQuart','easeInOutQuart','easeInQuint','easeOutQuint','easeInOutQuint','easeInSine','easeOutSine','easeInOutSine','easeInExpo','easeOutExpo','easeInOutExpo','easeInCirc','easeOutCirc','easeInOutCirc','easeOutBounce','easeInBack','easeOutBack','easeInOutBack','elastic','bounce'];var sp=name.split('_');if(sp.length>=4){effect.name='';effect.type=sp[1];effect.from=sp[2];effect.to=sp[3];if(sp.length>=5){for(var n=4;n<sp.length;n++){var v=sp[n];var foundEasing=false;for(var e=0;e<easings.length;e++){if(v==easings[e]){foundEasing=true;effect.easing=v;break;}}
if(foundEasing===true){continue;}
v=v.toUpperCase();if(v=='HOVERIN'){effect.hoverout=false;continue;}
if(v=='HOVEROUT'){effect.hoverin=false;continue;}
if(v=='KEYFRAME'){effect.firstKeyframe=false;continue;}
var num=parseInt(v.replace(/[^0-9\.]/g,''),10);if(num>0){if(v.indexOf('DURATION')>=0){effect.duration=num;continue;}
if(v.indexOf('DURATIONBACK')>=0){effect.durationBack=num;continue;}
if(v.indexOf('DELAY')>=0){effect.delay=num;continue;}
if(v.indexOf('DELAYBACK')>=0){effect.delayBack=num;continue;}
effect.duration=num;}}}
effect.element=ThumbnailOverEffectsGetCSSElement(sp[0],effect.type);}
else{effect.name=name;}
return effect;}
function ThumbnailOverEffectsGetCSSElement(element,property){var r=element;switch(element){case'image':if(property=='blur'||property=='brightness'||property=='grayscale'||property=='sepia'||property=='contrast'||property=='opacity'||property=='saturate'){r='.nGY2GThumbnailImage';}
else{r='.nGY2GThumbnailImage';}
break;case'thumbnail':r='.nGY2GThumbnail';break;case'label':r='.nGY2GThumbnailLabel';break;case'title':r='.nGY2GThumbnailTitle';break;case'description':r='.nGY2GThumbnailDescription';break;case'tools':r='.nGY2GThumbnailIcons';break;case'customlayer':r='.nGY2GThumbnailCustomLayer';break;}
return r;}
function ThumbnailOverEffectsPreset(effects){var newEffects=[];for(var i=0;i<effects.length;i++){switch(effects[i].name.toUpperCase()){case'BORDERLIGHTER':var rgb=ColorHelperToRGB(GalleryThemeGetCurrent().thumbnail.borderColor);name='thumbnail_borderColor_'+rgb+'_'+ShadeBlendConvert(0.5,rgb);newEffects.push(ThumbnailHoverEffectExtract(name,effects[i]));break;case'BORDERDARKER':var rgb=ColorHelperToRGB(GalleryThemeGetCurrent().thumbnail.borderColor);name='thumbnail_borderColor_'+rgb+'_'+ShadeBlendConvert(-0.5,rgb);newEffects.push(ThumbnailHoverEffectExtract(name,effects[i]));break;case'SCALE120':newEffects.push(ThumbnailHoverEffectExtract('thumbnail_scale_1.00_1.20',effects[i]));break;case'LABELAPPEAR':case'LABELAPPEAR75':newEffects.push(ThumbnailHoverEffectExtract('label_opacity_0.00_1.00',effects[i]));break;case'TOOLSAPPEAR':newEffects.push(ThumbnailHoverEffectExtract('tools_opacity_0_1',effects[i]));break;case'TOOLSSLIDEDOWN':newEffects.push(ThumbnailHoverEffectExtract('tools_translateY_-100%_0%',effects[i]));break;case'TOOLSSLIDEUP':newEffects.push(ThumbnailHoverEffectExtract('tools_translateY_100%_0%',effects[i]));break;case'LABELOPACITY50':newEffects.push(ThumbnailHoverEffectExtract('label_opacity_1.00_0.50',effects[i]));break;case'LABELSLIDEUPTOP':case'LABELSLIDEUP':newEffects.push(ThumbnailHoverEffectExtract('label_translateY_100%_0%',effects[i]));break;case'LABELSLIDEDOWN':newEffects.push(ThumbnailHoverEffectExtract('label_translateY_-100%_0%',effects[i]));break;case'SCALELABELOVERIMAGE':newEffects.push(ThumbnailHoverEffectExtract('label_scale_0.00_1.00',effects[i]));var n=cloneJSObject(effects[i]);newEffects.push(ThumbnailHoverEffectExtract('image_scale_1.00_0.00',n));break;case'OVERSCALE':case'OVERSCALEOUTSIDE':name='label_scale_0_100';newEffects.push(ThumbnailHoverEffectExtract('label_scale_2.00_1.00',effects[i]));var n=cloneJSObject(effects[i]);newEffects.push(ThumbnailHoverEffectExtract('label_opacity_0.00_1.00',n));n=cloneJSObject(effects[i]);newEffects.push(ThumbnailHoverEffectExtract('image_scale_1.00_0.00',n));n=cloneJSObject(effects[i]);newEffects.push(ThumbnailHoverEffectExtract('image_opacity_1.00_0.00',n));break;case'DESCRIPTIONAPPEAR':newEffects.push(ThumbnailHoverEffectExtract('description_opacity_0_1',effects[i]));break;case'SLIDERIGHT':newEffects.push(ThumbnailHoverEffectExtract('image_translateX_0%_100%',effects[i]));newEffects.push(ThumbnailHoverEffectExtract('label_translateX_-100%_0%',cloneJSObject(effects[i])));break;case'SLIDELEFT':newEffects.push(ThumbnailHoverEffectExtract('image_translateX_0%_-100%',effects[i]));newEffects.push(ThumbnailHoverEffectExtract('label_translateX_100%_0%',cloneJSObject(effects[i])));break;case'SLIDEUP':newEffects.push(ThumbnailHoverEffectExtract('image_translateY_0%_-100%',effects[i]));newEffects.push(ThumbnailHoverEffectExtract('label_translateY_100%_0%',cloneJSObject(effects[i])));break;case'SLIDEDOWN':newEffects.push(ThumbnailHoverEffectExtract('image_translateY_0%_100%',effects[i]));newEffects.push(ThumbnailHoverEffectExtract('label_translateY_-100%_0%',cloneJSObject(effects[i])));break;case'IMAGESCALE150':case'IMAGESCALE150OUTSIDE':newEffects.push(ThumbnailHoverEffectExtract('image_scale_1.00_1.50',effects[i]));break;case'IMAGESCALEIN80':newEffects.push(ThumbnailHoverEffectExtract('image_scale_1.20_1.00',effects[i]));break;case'IMAGESLIDERIGHT':newEffects.push(ThumbnailHoverEffectExtract('image_translateX_0%_100%',effects[i]));break;case'IMAGESLIDELEFT':newEffects.push(ThumbnailHoverEffectExtract('image_translateX_0%_-100%',effects[i]));break;case'IMAGESLIDEUP':newEffects.push(ThumbnailHoverEffectExtract('image_translateY_0%_-100%',effects[i]));break;case'IMAGESLIDEDOWN':newEffects.push(ThumbnailHoverEffectExtract('image_translateY_0%_100%',effects[i]));break;case'LABELSLIDEUP':case'LABELSLIDEUPTOP':newEffects.push(ThumbnailHoverEffectExtract('label_translateY_100%_0%',effects[i]));break;case'LABELSLIDEUPDOWN':newEffects.push(ThumbnailHoverEffectExtract('label_translateY_0%_100%',effects[i]));break;case'DESCRIPTIONSLIDEUP':newEffects.push(ThumbnailHoverEffectExtract('description_translateY_110%_0%',effects[i]));break;case'IMAGEBLURON':newEffects.push(ThumbnailHoverEffectExtract('image_blur_2.00px_0.00px',effects[i]));break;case'IMAGEBLUROFF':newEffects.push(ThumbnailHoverEffectExtract('image_blur_0.00px_2.00px',effects[i]));break;case'IMAGEGRAYON':newEffects.push(ThumbnailHoverEffectExtract('image_grayscale_0%_100%',effects[i]));break;case'IMAGEGRAYOFF':newEffects.push(ThumbnailHoverEffectExtract('image_grayscale_100%_0%',effects[i]));break;case'IMAGESEPIAON':newEffects.push(ThumbnailHoverEffectExtract('image_sepia_100%_1%',effects[i]));break;case'IMAGESEPIAOFF':newEffects.push(ThumbnailHoverEffectExtract('image_sepia_1%_100%',effects[i]));break;default:newEffects.push(effects[i]);break;}}
return newEffects;}
function NewTHoverEffect(){var oDef={name:'',element:'',type:'',from:'',to:'',hoverin:true,hoverout:true,firstKeyframe:true,delay:0,delayBack:0,duration:400,durationBack:300,easing:'easeOutQuart',easingBack:'easeOutQuart',animParam:null};return oDef;}
function NewTBuildInit(){var oDef={element:'',property:'',value:''};return oDef;}
function ThumbnailStyle(cfg,level){switch(cfg.position){case'onBottom':G.tn.style[level]['label']='bottom:0; ';break;case'overImageOnTop':G.tn.style[level]['label']='top:0; position:absolute;';break;case'overImageOnMiddle':G.tn.style[level]['label']='top:0; bottom:0;';G.tn.style[level]['title']='position:absolute; bottom:50%;';G.tn.style[level]['desc']='position:absolute; top:50%;';break;case'custom':break;case'overImageOnBottom':default:G.O.thumbnailLabel.position='overImageOnBottom';G.tn.style[level].label='bottom:0; position:absolute;';break;}
if(cfg.position!='onBottom'){if(cfg.titleMultiLine){G.tn.style[level]['title']='white-space:normal;';}
if(cfg.descriptionMultiLine){G.tn.style[level]['desc']='white-space:normal;';}}
switch(cfg.align){case'right':G.tn.style[level].label+='text-align:right;';break;case'left':G.tn.style[level].label+='text-align:left;';break;default:G.tn.style[level].label+='text-align:center;';break;}
if(cfg.titleFontSize!=undefined&&cfg.titleFontSize!=''){G.tn.style[level].title+='font-size:'+cfg.titleFontSize+';';}
if(cfg.descriptionFontSize!=undefined&&cfg.descriptionFontSize!=''){G.tn.style[level].desc+='font-size:'+cfg.descriptionFontSize+';';}
if(cfg.displayDescription==false){G.tn.style[level].desc+='display:none;';}}
function ThumbnailDefCaches(){ThumbnailStyle(G.O.thumbnailLabel,'lN');ThumbnailStyle(G.O.thumbnailLabel,'l1');if(G.O.thumbnailL1Label&&G.O.thumbnailL1Label.display){ThumbnailStyle(G.O.thumbnailL1Label,'l1');}
G.tn.borderWidth=G.O.thumbnailBorderHorizontal;G.tn.borderHeight=G.O.thumbnailBorderVertical;var lst=['xs','sm','me','la','xl'];for(var i=0;i<lst.length;i++){var w=G.tn.settings.width.lN[lst[i]];if(w!='auto'){G.tn.defaultSize.width.lN[lst[i]]=w;G.tn.defaultSize.width.l1[lst[i]]=w;}
else{var h=G.tn.settings.height.lN[lst[i]];G.tn.defaultSize.width.lN[lst[i]]=h;G.tn.defaultSize.width.l1[lst[i]]=h;}}
for(var i=0;i<lst.length;i++){var h=G.tn.settings.height.lN[lst[i]];if(h!='auto'){G.tn.defaultSize.height.lN[lst[i]]=h;G.tn.defaultSize.height.l1[lst[i]]=h;}
else{var w=G.tn.settings.width.lN[lst[i]];G.tn.defaultSize.height.lN[lst[i]]=w;G.tn.defaultSize.height.l1[lst[i]]=w;}}
for(var i=0;i<lst.length;i++){var w=G.tn.settings.width.l1[lst[i]];if(w!='auto'){G.tn.defaultSize.width.l1[lst[i]]=w;}
else{var h=G.tn.settings.height.l1[lst[i]];G.tn.defaultSize.width.l1[lst[i]]=h;}}
for(var i=0;i<lst.length;i++){var h=G.tn.settings.height.l1[lst[i]];if(h!='auto'){G.tn.defaultSize.height.l1[lst[i]]=h;}
else{var w=G.tn.settings.width.l1[lst[i]];G.tn.defaultSize.height.l1[lst[i]]=w;}}}
function ThumbnailsSetSize(dir,level,v,crop){G.tn.settings[dir][level]['xs']=v;G.tn.settings[dir][level]['sm']=v;G.tn.settings[dir][level]['me']=v;G.tn.settings[dir][level]['la']=v;G.tn.settings[dir][level]['xl']=v;G.tn.settings[dir][level]['xsc']=crop;G.tn.settings[dir][level]['smc']=crop;G.tn.settings[dir][level]['mec']=crop;G.tn.settings[dir][level]['lac']=crop;G.tn.settings[dir][level]['xlc']=crop;}
function GalleryThemeGetCurrent(){var cs=null;switch(toType(G.O.galleryTheme)){case'object':cs=G.galleryTheme_dark;jQuery.extend(true,cs,G.O.galleryTheme);break;case'string':switch(G.O.galleryTheme){case'light':cs=G.galleryTheme_light;break;case'default':case'dark':case'none':default:cs=G.galleryTheme_dark;}
break;default:cs=G.galleryTheme_dark;}
return cs;}
function SetGalleryTheme(){if(typeof G.O.colorScheme!=='undefined'){G.O.galleryTheme=G.O.colorScheme;}
var cs=null;var galleryTheme='';switch(toType(G.O.galleryTheme)){case'object':cs=G.galleryTheme_dark;jQuery.extend(true,cs,G.O.galleryTheme);galleryTheme='nanogallery_gallerytheme_custom_'+G.baseEltID;break;case'string':switch(G.O.galleryTheme){case'light':cs=G.galleryTheme_light;galleryTheme='nanogallery_gallerytheme_light_'+G.baseEltID;break;case'default':case'dark':case'none':default:cs=G.galleryTheme_dark;galleryTheme='nanogallery_gallerytheme_dark_'+G.baseEltID;}
break;default:NanoAlert(G,'Error in galleryTheme parameter.');return;}
var s1='.'+galleryTheme+' ';var s=s1+'.nGY2Navigationbar { background:'+cs.navigationBar.background+'; }'+'\n';if(cs.navigationBar.border!==undefined&&cs.navigationBar.border!==''){s+=s1+'.nGY2Navigationbar { border:'+cs.navigationBar.border+'; }'+'\n';}
if(cs.navigationBar.borderTop!==undefined&&cs.navigationBar.borderTop!==''){s+=s1+'.nGY2Navigationbar { border-top:'+cs.navigationBar.borderTop+'; }'+'\n';}
if(cs.navigationBar.borderBottom!==undefined&&cs.navigationBar.borderBottom!==''){s+=s1+'.nGY2Navigationbar { border-bottom:'+cs.navigationBar.borderBottom+'; }'+'\n';}
if(cs.navigationBar.borderRight!==undefined&&cs.navigationBar.borderRight!==''){s+=s1+'.nGY2Navigationbar { border-right:'+cs.navigationBar.borderRight+'; }'+'\n';}
if(cs.navigationBar.borderLeft!==undefined&&cs.navigationBar.borderLeft!==''){s+=s1+'.nGY2Navigationbar { border-left:'+cs.navigationBar.borderLeft+'; }'+'\n';}
s+=s1+'.nGY2Breadcrumb { background:'+cs.navigationBreadcrumb.background+'; border-radius:'+cs.navigationBreadcrumb.borderRadius+'; }'+'\n';s+=s1+'.nGY2Breadcrumb .oneItem  { color:'+cs.navigationBreadcrumb.color+'; }'+'\n';s+=s1+'.nGY2Breadcrumb .oneItem:hover { color:'+cs.navigationBreadcrumb.colorHover+'; }'+'\n';s+=s1+'.nGY2NavFilterUnselected { color:'+cs.navigationFilter.color+'; background:'+cs.navigationFilter.background+'; border-radius:'+cs.navigationFilter.borderRadius+'; }'+'\n';s+=s1+'.nGY2NavFilterSelected { color:'+cs.navigationFilter.colorSelected+'; background:'+cs.navigationFilter.backgroundSelected+'; border-radius:'+cs.navigationFilter.borderRadius+'; }'+'\n';s+=s1+'.nGY2NavFilterSelectAll { color:'+cs.navigationFilter.colorSelected+'; background:'+cs.navigationFilter.background+'; border-radius:'+cs.navigationFilter.borderRadius+'; }'+'\n';s+=s1+'.nGY2GThumbnail { background:'+cs.thumbnail.background+'; border-color:'+cs.thumbnail.borderColor+'; border-top-width:'+G.O.thumbnailBorderVertical+'px; border-right-width:'+G.O.thumbnailBorderHorizontal+'px; border-bottom-width:'+G.O.thumbnailBorderVertical+'px; border-left-width:'+G.O.thumbnailBorderHorizontal+'px;}'+'\n';s+=s1+'.nGY2GThumbnailStack { background:'+cs.thumbnail.stackBackground+'; }'+'\n';s+=s1+'.nGY2TnImgBack { background:'+cs.thumbnail.background+'; background-image:'+cs.thumbnail.backgroundImage+'; }'+'\n';s+=s1+'.nGY2GThumbnailAlbumUp { background:'+cs.thumbnail.background+'; background-image:'+cs.thumbnail.backgroundImage+'; color:'+cs.thumbnail.titleColor+'; }'+'\n';s+=s1+'.nGY2GThumbnailIconsFullThumbnail { color:'+cs.thumbnail.titleColor+'; }\n';s+=s1+'.nGY2GThumbnailLabel { background:'+cs.thumbnail.labelBackground+'; opacity:'+cs.thumbnail.labelOpacity+'; }'+'\n';s+=s1+'.nGY2GThumbnailImageTitle  { color:'+cs.thumbnail.titleColor+'; background-color:'+cs.thumbnail.titleBgColor+'; '+(cs.thumbnail.titleShadow==''?'':'Text-Shadow:'+cs.thumbnail.titleShadow+';')+' }'+'\n';s+=s1+'.nGY2GThumbnailAlbumTitle { color:'+cs.thumbnail.titleColor+'; background-color:'+cs.thumbnail.titleBgColor+'; '+(cs.thumbnail.titleShadow==''?'':'Text-Shadow:'+cs.thumbnail.titleShadow+';')+' }'+'\n';s+=s1+'.nGY2GThumbnailDescription { color:'+cs.thumbnail.descriptionColor+'; background-color:'+cs.thumbnail.descriptionBgColor+'; '+(cs.thumbnail.descriptionShadow==''?'':'Text-Shadow:'+cs.thumbnail.descriptionShadow+';')+' }'+'\n';s+=s1+'.nGY2GThumbnailIcons { padding:'+cs.thumbnailIcon.padding+'; }\n';s+=s1+'.nGY2GThumbnailIcon { color:'+cs.thumbnailIcon.color+'; }\n';s+=s1+'.nGY2GThumbnailIconTextBadge { background-color:'+cs.thumbnailIcon.color+'; }\n';if(G.O.galleryPaginationMode!='NUMBERS'){s+=s1+'.nGY2paginationDot { border:'+cs.pagination.shapeBorder+'; background:'+cs.pagination.shapeColor+';}\n';s+=s1+'.nGY2paginationDotCurrentPage { border:'+cs.pagination.shapeBorder+'; background:'+cs.pagination.shapeSelectedColor+';}\n';s+=s1+'.nGY2paginationRectangle { border:'+cs.pagination.shapeBorder+'; background:'+cs.pagination.shapeColor+';}\n';s+=s1+'.nGY2paginationRectangleCurrentPage { border:'+cs.pagination.shapeBorder+'; background:'+cs.pagination.shapeSelectedColor+';}\n';}else{s+=s1+'.nGY2paginationItem { background:'+cs.pagination.background+'; color:'+cs.pagination.color+'; border-radius:'+cs.pagination.borderRadius+'; }\n';s+=s1+'.nGY2paginationItemCurrentPage { background:'+cs.pagination.background+'; color:'+cs.pagination.color+'; border-radius:'+cs.pagination.borderRadius+'; }\n';s+=s1+'.nGY2PaginationPrev { background:'+cs.pagination.background+'; color:'+cs.pagination.color+'; border-radius:'+cs.pagination.borderRadius+'; }\n';s+=s1+'.nGY2PaginationNext { background:'+cs.pagination.background+'; color:'+cs.pagination.color+'; border-radius:'+cs.pagination.borderRadius+'; }\n';s+=s1+'.nGY2paginationItemCurrentPage { background:'+cs.pagination.backgroundSelected+'; }\n';}
s+=s1+'.nGY2GalleryMoreButtonAnnotation { background:'+cs.thumbnail.background+'; border-color:'+cs.thumbnail.borderColor+'; border-top-width:'+G.O.thumbnailBorderVertical+'px; border-right-width:'+G.O.thumbnailBorderHorizontal+'px; border-bottom-width:'+G.O.thumbnailBorderVertical+'px; border-left-width:'+G.O.thumbnailBorderHorizontal+'px;}\n';s+=s1+'.nGY2GalleryMoreButtonAnnotation  { color:'+cs.thumbnail.titleColor+'; '+(cs.thumbnail.titleShadow==''?'':'Text-Shadow:'+cs.thumbnail.titleShadow)+'; }\n';jQuery('head').append('<style id="ngycs_'+G.baseEltID+'">'+s+'</style>');G.$E.base.addClass(galleryTheme);};function SetViewerTheme(){if(G.VOM.viewerTheme!=''){G.VOM.$cont.addClass(G.VOM.viewerTheme);return;}
if(typeof G.O.colorSchemeViewer!=='undefined'){G.O.viewerTheme=G.O.colorSchemeViewer;}
var cs=null;switch(toType(G.O.viewerTheme)){case'object':cs=G.viewerTheme_dark;jQuery.extend(true,cs,G.O.viewerTheme);G.VOM.viewerTheme='nanogallery_viewertheme_custom_'+G.baseEltID;break;case'string':switch(G.O.viewerTheme){case'none':return;break;case'light':cs=G.viewerTheme_light;G.VOM.viewerTheme='nanogallery_viewertheme_light_'+G.baseEltID;break;case'border':cs=G.viewerTheme_border;G.VOM.viewerTheme='nanogallery_viewertheme_border_'+G.baseEltID;break;case'dark':case'default':cs=G.viewerTheme_dark;G.VOM.viewerTheme='nanogallery_viewertheme_dark_'+G.baseEltID;break;}
break;default:NanoAlert(G,'Error in viewerTheme parameter.');return;}
var s1='.'+G.VOM.viewerTheme+' ';var s=s1+'.nGY2Viewer { background:'+cs.background+'; }'+'\n';s+=s1+'.nGY2ViewerMedia { border:'+cs.imageBorder+'; box-shadow:'+cs.imageBoxShadow+'; }'+'\n';s+=s1+'.nGY2Viewer .toolbarBackground { background:'+cs.barBackground+'; }'+'\n';s+=s1+'.nGY2Viewer .nGY2ViewerToolsTopLeft { background:'+cs.barBackground+'; }'+'\n';s+=s1+'.nGY2Viewer .nGY2ViewerToolsTopRight { background:'+cs.barBackground+'; }'+'\n';s+=s1+'.nGY2Viewer .nGY2ViewerAreaNext { background:'+cs.barBackground+'; }'+'\n';s+=s1+'.nGY2Viewer .nGY2ViewerAreaPrevious { background:'+cs.barBackground+'; }'+'\n';s+=s1+'.nGY2Viewer .toolbar { border:'+cs.barBorder+'; color:'+cs.barColor+'; }'+'\n';s+=s1+'.nGY2Viewer .toolbar .previousButton:after { color:'+cs.barColor+'; }'+'\n';s+=s1+'.nGY2Viewer .toolbar .nextButton:after { color:'+cs.barColor+'; }'+'\n';s+=s1+'.nGY2Viewer .toolbar .closeButton:after { color:'+cs.barColor+'; }'+'\n';s+=s1+'.nGY2Viewer .toolbar .label .title { color:'+cs.barColor+'; }'+'\n';s+=s1+'.nGY2Viewer .toolbar .label .description { color:'+cs.barDescriptionColor+'; }'+'\n';jQuery('head').append('<style>'+s+'</style>');G.VOM.$cont.addClass(G.VOM.viewerTheme);};function SetPolyFills(){if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};}
(function(){var lastTime=0;var vendors=['ms','moz','webkit','o'];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame'];}
if(!window.requestAnimationFrame)
window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};if(!window.cancelAnimationFrame)
window.cancelAnimationFrame=function(id){clearTimeout(id);};}());Array.prototype.removeIf=function(callback){var i=this.length;while(i--){if(callback(this[i],i)){this.splice(i,1);}}};if(!String.prototype.startsWith){String.prototype.startsWith=function(searchString,position){position=position||0;return this.indexOf(searchString,position)===position;};}}
function GalleryClicked(e){var r=GalleryEventRetrieveElementl(e,false);if(r.GOMidx==-1){return'exit';}
var idx=G.GOM.items[r.GOMidx].thumbnailIdx;if(G.GOM.slider.hostIdx==r.GOMidx){idx=G.GOM.items[G.GOM.slider.currentIdx].thumbnailIdx;}
switch(r.action){case'OPEN':ThumbnailOpen(idx,false);return'exit';break;case'DISPLAY':ThumbnailOpen(idx,true);return'exit';break;case'TOGGLESELECT':ThumbnailSelectionToggle(idx);return'exit';break;case'SHARE':PopupShare(idx);return'exit';break;case'DOWNLOAD':DownloadImage(idx);return'exit';break;case'INFO':ItemDisplayInfo(G.I[idx]);return'exit';break;case'CART':AddToCart(idx);return'exit';break;default:var fu=G.O.fnThumbnailToolCustAction;if(fu!==null){typeof fu=='function'?fu(r.action,G.I[idx]):window[fu](r.action,G.I[idx]);}
break;}}
function DownloadImage(idx){if(G.I[idx].mediaKind!='img'){return;}
var url=G.I[idx].src;if(G.I[idx].downloadURL!=undefined&&G.I[idx].downloadURL!=''){url=G.I[idx].downloadURL;}
var a=document.createElement('a');a.href=url;a.download=url.split('/').pop();a.target='_blank';a.style.display='none';document.body.appendChild(a);a.click();document.body.removeChild(a);}
function AddToCart(idx){var found=false;for(var i=0;i<G.shoppingCart.length;i++){if(G.shoppingCart[i].idx==idx){G.shoppingCart[i].cnt++;var fu=G.O.fnShoppingCartUpdated;if(fu!==null){typeof fu=='function'?fu(G.shoppingCart,G.I[idx]):window[fu](G.shoppingCart,G.I[idx]);}
TriggerCustomEvent('shoppingCartUpdated');return;}}
if(!found){G.shoppingCart.push({idx:idx,ID:G.I[idx].GetID(),cnt:1});var fu=G.O.fnShoppingCartUpdated;if(fu!==null){typeof fu=='function'?fu(G.shoppingCart,G.I[idx]):window[fu](G.shoppingCart,G.I[idx]);}
TriggerCustomEvent('shoppingCartUpdated');}}
function ThumbnailSelectionClear(){G.GOM.nbSelected=0;for(var i=0,nbTn=G.GOM.items.length;i<nbTn;i++){var item=G.I[G.GOM.items[i].thumbnailIdx];if(item.selected){item.selected=false;var fu=G.O.fnThumbnailSelection;if(fu!==null){typeof fu=='function'?fu(item.$elt,item,G.I):window[fu](item.$elt,item,G.I);}}
item.selected=false;}}
function ThumbnailSelectionToggle(idx){var item=G.I[idx];if(item.selected===true){ThumbnailSelectionSet(item,false);G.GOM.nbSelected--;TriggerCustomEvent('itemUnSelected');}
else{ThumbnailSelectionSet(item,true);G.GOM.nbSelected++;TriggerCustomEvent('itemSelected');}}
function ThumbnailSelectionSet(item,selected){item.selected=selected;ThumbnailSelectionSetIcon(item);var fu=G.O.fnThumbnailSelection;if(fu!==null){typeof fu=='function'?fu(item.$elt,item,G.I):window[fu](item.$elt,item,G.I);}}
function ThumbnailSelectionSetIcon(item){if(item.$elt==null){return;}
var $sub=item.$getElt('.nGY2GThumbnail');var $icon=item.$getElt('.nGY2GThumbnailIconImageSelect');if(item.selected===true){$sub.addClass('nGY2GThumbnailSubSelected');$icon.addClass('nGY2ThumbnailSelected');$icon.removeClass('nGY2ThumbnailUnselected');$icon.html(G.O.icons.thumbnailSelected);}
else{$sub.removeClass('nGY2GThumbnailSubSelected');$icon.removeClass('nGY2ThumbnailSelected');$icon.addClass('nGY2ThumbnailUnselected');$icon.html(G.O.icons.thumbnailUnselected);}}
function PopupShare(idx){var item=G.I[idx];var currentURL=document.location.protocol+'//'+document.location.hostname+document.location.pathname;var newLocationHash='#nanogallery/'+G.baseEltID+'/';if(item.kind=='image'){newLocationHash+=item.albumID+'/'+item.GetID();}
else{newLocationHash+=item.GetID();}
var content='';content+='<div class="nGY2PopupOneItem" style="text-align:center;" data-share="facebook">'+G.O.icons.shareFacebook+'</div>';content+='<div class="nGY2PopupOneItem" style="text-align:center;" data-share="pinterest">'+G.O.icons.sharePinterest+'</div>';content+='<div class="nGY2PopupOneItem" style="text-align:center;" data-share="tumblr">'+G.O.icons.shareTumblr+'</div>';content+='<div class="nGY2PopupOneItem" style="text-align:center;" data-share="twitter">'+G.O.icons.shareTwitter+'</div>';content+='<div class="nGY2PopupOneItem" style="text-align:center;" data-share="vk">'+G.O.icons.shareVK+'</div>';content+='<div class="nGY2PopupOneItem" style="text-align:center;" data-share="mail">'+G.O.icons.shareMail+'</div>';content+='<div class="nGY2PopupOneItem" style="text-align:center;"></div>';content+='<input class="nGY2PopupOneItemText" readonly type="text" value="'+currentURL+newLocationHash+'" style="width:100%;text-align:center;">';content+='<br>';currentURL=encodeURIComponent(document.location.protocol+'//'+document.location.hostname+document.location.pathname+newLocationHash);var currentTitle=item.title;var currentTn=item.thumbImg().src;Popup('Share to:',content,'Center');G.popup.$elt.find('.nGY2PopupOneItem').on('click',function(e){e.stopPropagation();var shareURL='';var found=true;switch(jQuery(this).attr('data-share').toUpperCase()){case'FACEBOOK':shareURL='https://www.facebook.com/sharer.php?u='+currentURL;break;case'VK':shareURL='http://vk.com/share.php?url='+currentURL;break;case'GOOGLEPLUS':shareURL="https://plus.google.com/share?url="+currentURL;break;case'TWITTER':shareURL='https://twitter.com/intent/tweet?text='+currentTitle+'url='+currentURL;break;case'PINTEREST':shareURL='https://pinterest.com/pin/create/button/?media='+currentTn+'&url='+currentURL+'&description='+currentTitle;break;case'TUMBLR':shareURL='http://www.tumblr.com/share/link?url='+currentURL+'&name='+currentTitle;break;case'MAIL':shareURL='mailto:?subject='+currentTitle+'&body='+currentURL;break;default:found=false;break;}
if(found){window.open(shareURL,"","height=550,width=500,left=100,top=100,menubar=0");G.popup.close();}});}
function Popup(title,content,align){var pp='<div class="nGY2Popup" style="opacity:0;"><div class="nGY2PopupContent'+align+'">';pp+='<div class="nGY2PopupCloseButton">'+G.O.icons.buttonClose+'</div>';pp+='<div class="nGY2PopupTitle">'+title+'</div>';pp+=content;pp+='</div></div>';G.popup.$elt=jQuery(pp).appendTo('body');setElementOnTop(G.VOM.$viewer,G.popup.$elt);G.popup.isDisplayed=true;var tweenable=new NGTweenable();tweenable.tween({from:{opacity:0},to:{opacity:1},easing:'easeInOutSine',duration:250,step:function(state,att){G.popup.$elt.css(state);}});G.popup.$elt.find('.nGY2PopupCloseButton').on('click',function(e){e.stopPropagation();G.popup.close();});}
function GalleryMouseEnter(e){if(!G.VOM.viewerDisplayed&&G.GOM.albumIdx!=-1){var r=GalleryEventRetrieveElementl(e,true);if(r.GOMidx!=-1){var target=e.target||e.srcElement;ThumbnailHover(r.GOMidx);}}}
function GalleryMouseLeave(e){if(!G.VOM.viewerDisplayed&&G.GOM.albumIdx!=-1){var r=GalleryEventRetrieveElementl(e,true);if(r.GOMidx!=-1){var target=e.target||e.srcElement;ThumbnailHoverOut(r.GOMidx);}}}
function GalleryEventRetrieveElementl(e,ignoreSubItems){var r={action:'NONE',GOMidx:-1};if(e==undefined){return r;}
var target=e.target||e.srcElement;while(target!=G.$E.conTnParent[0]){if(jQuery(target).hasClass('nGY2GThumbnail')){if(r.action=='NONE'){r.action='OPEN';}
r.GOMidx=jQuery(target).data('index');return r;}
if(!ignoreSubItems){var a=jQuery(target).data('ngy2action');if(a!=''&&a!=undefined){r.action=a;}}
if(target.parentNode==null){return r;}
target=target.parentNode;}
return r;}
function ThumbnailOpen(idx,ignoreSelected){var item=G.I[idx];var fu=G.O.fnThumbnailClicked;if(fu!==null){typeof fu=='function'?fu(item.$elt,item):window[fu](item.$elt,item);}
if(item.destinationURL!==undefined&&item.destinationURL.length>0){window.location=item.destinationURL;return;}
switch(item.kind){case'image':if(ignoreSelected===false&&G.GOM.nbSelected>0){ThumbnailSelectionToggle(idx);}
else{DisplayPhotoIdx(idx);}
break;case'album':if(ignoreSelected===false&&G.GOM.nbSelected>0){ThumbnailSelectionToggle(idx);}
else{if(G.O.thumbnailAlbumDisplayImage&&idx!=0){DisplayFirstMediaInAlbum(idx);return;}
else{DisplayAlbum('-1',item.GetID());}}
break;case'albumUp':var parent=NGY2Item.Get(G,item.albumID);DisplayAlbum('-1',parent.albumID);break;}}
function DisplayFirstMediaInAlbum(albumIdx){if(G.O.debugMode){console.log('#DisplayFirstPhotoInAlbum : '+albumIdx);}
var item=G.I[albumIdx];var l=G.I.length;for(var i=0;i<l;i++){if(G.I[i].albumID==item.GetID()){DisplayPhotoIdx(i);return;}}
AlbumGetContent(item.GetID(),DisplayFirstMediaInAlbum,albumIdx,null);}
function OpenOriginal(item){switch(G.O.kind){case'flickr':var sU='https://www.flickr.com/photos/'+G.O.userID+'/'+item.GetID();if(item.albumID!='0'){sU+='/in/album-'+item.albumID+'/';}
window.open(sU,'_blank');break;case'picasa':case'google':case'google2':default:var sU=item.responsiveURL();window.open(sU,'_blank');break;}}
function DisplayPhotoIdx(ngy2ItemIdx){if(!G.O.thumbnailOpenImage){return;}
if(G.O.thumbnailOpenOriginal){OpenOriginal(G.I[ngy2ItemIdx]);return;}
var items=[];G.VOM.currItemIdx=0;G.VOM.items=[];G.VOM.albumID=G.I[ngy2ItemIdx].albumID;var vimg=new VImg(ngy2ItemIdx);G.VOM.items.push(vimg);items.push(G.I[ngy2ItemIdx]);var l=G.I.length;for(var idx=ngy2ItemIdx+1;idx<l;idx++){var item=G.I[idx];if(item.kind=='image'&&item.isToDisplay(G.VOM.albumID)&&item.destinationURL==''){var vimg=new VImg(idx);G.VOM.items.push(vimg);items.push(item);}}
var last=G.VOM.items.length;var cnt=1;for(var idx=0;idx<ngy2ItemIdx;idx++){var item=G.I[idx];if(item.kind=='image'&&item.isToDisplay(G.VOM.albumID)&&item.destinationURL==''){var vimg=new VImg(idx);vimg.mediaNumber=cnt;G.VOM.items.push(vimg);items.push(item);cnt++;}}
for(var i=0;i<last;i++){G.VOM.items[i].mediaNumber=cnt;cnt++;}
var fu=G.O.fnThumbnailOpen;if(fu!==null){typeof fu=='function'?fu(items):window[fu](items);return;}
if(!G.VOM.viewerDisplayed){OpenInternalViewer();}
else{G.VOM.$mediaCurrent.empty();var item=G.VOM.NGY2Item(0);var spreloader='<div class="nGY2ViewerMediaLoaderDisplayed"></div>';if(item.mediaKind=='img'&&item.imageWidth!=0&&item.imageHeight!=0){spreloader='<div class="nGY2ViewerMediaLoaderHidden"></div>';}
G.VOM.$mediaCurrent.append(spreloader+item.mediaMarkup);ViewerSetMediaVisibility(G.VOM.NGY2Item(1),G.VOM.$mediaNext,0);ViewerSetMediaVisibility(G.VOM.NGY2Item(-1),G.VOM.$mediaPrevious,0);if(item.mediaKind=='img'){G.VOM.ImageLoader.loadImage(VieweImgSizeRetrieved,item);}
DisplayInternalViewer(0,'');}}
function ViewerZoomStart(){if(G.O.viewerZoom&&!G.VOM.viewerMediaIsChanged){var item=G.VOM.NGY2Item(0);if(item.imageHeight>0&&item.imageWidth>0){if(G.VOM.zoom.isZooming===false){G.VOM.zoom.userFactor=1;G.VOM.zoom.isZooming=true;}
return true;}}}
function ViewerZoomIn(zoomIn){if(zoomIn){G.VOM.zoom.userFactor+=0.1;ViewerZoomMax();}
else{G.VOM.zoom.userFactor-=0.1;ViewerZoomMin();}
ViewerMediaSetPosAndZoom();}
function ViewerZoomMax(){if(G.VOM.zoom.userFactor>3){G.VOM.zoom.userFactor=3;}}
function ViewerZoomMin(){if(G.VOM.zoom.userFactor<0.2){G.VOM.zoom.userFactor=0.2;}}
function ViewerMediaSetPosAndZoom(){if(!G.VOM.zoom.isZooming){G.VOM.zoom.userFactor=1;}
ViewerMediaSetPosAndZoomOne(G.VOM.NGY2Item(0),G.VOM.$mediaCurrent,true);ViewerMediaSetPosAndZoomOne(G.VOM.NGY2Item(-1),G.VOM.$mediaPrevious,false);ViewerMediaSetPosAndZoomOne(G.VOM.NGY2Item(1),G.VOM.$mediaNext,false);}
function ViewerMediaCenterNotImg($mediaContainer){var $media=$mediaContainer.children().eq(1);$media.css({'height':'80%'});$media.css({'width':'90%'});$media[0].style[G.CSStransformName]='translate(0px, "50%") ';}
function ViewerMediaSetPosAndZoomOne(item,$img,isCurrent){if(item.mediaKind!='img'){ViewerMediaCenterNotImg($img);return;}
if(item.imageHeight==0||item.imageWidth==0){ViewerSetMediaVisibility(item,$img,0);return;}
var zoomUserFactor=isCurrent==true?G.VOM.zoom.userFactor:1;var dpr=1;if(G.O.viewerImageDisplay=='bestImageQuality'){dpr=window.devicePixelRatio;}
var zoomBaseFactorW=(G.VOM.window.lastWidth-G.VOM.padding.V)/(item.imageWidth/dpr);var zoomBaseFactorH=(G.VOM.window.lastHeight-G.VOM.padding.H)/(item.imageHeight/dpr);var zoomBaseFactor=Math.min(zoomBaseFactorW,zoomBaseFactorH);if(zoomBaseFactor>1&&G.O.viewerImageDisplay!='upscale'){zoomBaseFactor=1;}
var imageCurrentHeight=(item.imageHeight/dpr)*zoomUserFactor*zoomBaseFactor;var imageCurrentWidth=(item.imageWidth/dpr)*zoomUserFactor*zoomBaseFactor;$img.children().eq(1).css({'height':imageCurrentHeight});$img.children().eq(1).css({'width':imageCurrentWidth});var posX=0;if(imageCurrentWidth>G.VOM.window.lastWidth){posX=-(imageCurrentWidth-G.VOM.window.lastWidth)/2;}
var posY=0;if(imageCurrentHeight>G.VOM.window.lastHeight){posY=(imageCurrentHeight-G.VOM.window.lastHeight)/2;}
posY=0;if(isCurrent){if(!G.VOM.zoom.isZooming){G.VOM.panPosX=0;G.VOM.panPosY=0;}
G.VOM.zoom.posX=posX;G.VOM.zoom.posY=posY;ViewerImagePanSetPosition(G.VOM.panPosX,G.VOM.panPosY,$img,false);}
else{ViewerMediaPanX(G.VOM.swipePosX);$img.children().eq(1)[0].style[G.CSStransformName]='translate(0px, 0px) rotate('+item.rotationAngle+'deg)';}}
function ViewerImagePanSetPosition(posX,posY,imageContainer,savePosition){if(savePosition){G.VOM.panPosX=posX;G.VOM.panPosY=posY;}
posX+=G.VOM.zoom.posX;posY+=G.VOM.zoom.posY;imageContainer.children().eq(1)[0].style[G.CSStransformName]='translate('+posX+'px, '+posY+'px) rotate('+G.VOM.NGY2Item(0).rotationAngle+'deg)';}
function OpenInternalViewer(){G.VOM.viewerDisplayed=true;G.GOM.firstDisplay=false;G.VOM.saveOverflowX=window.getComputedStyle(document.body)['overflow-x'];G.VOM.saveOverflowY=window.getComputedStyle(document.body)['overflow-y'];jQuery('body').css({overflow:'hidden'});G.VOM.$cont=jQuery('<div  class="nGY2 nGY2ViewerContainer" style="opacity:1"></div>').appendTo('body');SetViewerTheme();G.VOM.$viewer=jQuery('<div class="nGY2Viewer" style="opacity:0" itemscope itemtype="http://schema.org/ImageObject"></div>').appendTo(G.VOM.$cont);G.VOM.$viewer.css({msTouchAction:'none',touchAction:'none'});G.VOM.currItemIdx=0;var sMedia='<div class="nGY2ViewerMediaPan"><div class="nGY2ViewerMediaLoaderDisplayed"></div>'+G.VOM.NGY2Item(-1).mediaMarkup+'</div>';sMedia+='<div class="nGY2ViewerMediaPan"><div class="nGY2ViewerMediaLoaderDisplayed"></div>'+G.VOM.NGY2Item(0).mediaMarkup+'</div>';sMedia+='<div class="nGY2ViewerMediaPan"><div class="nGY2ViewerMediaLoaderDisplayed"></div>'+G.VOM.NGY2Item(1).mediaMarkup+'</div>';var sNav='';var iconP=G.O.icons.viewerImgPrevious;if(iconP!=undefined&&iconP!=''){sNav+='<div class="nGY2ViewerAreaPrevious ngy2viewerToolAction" data-ngy2action="previous">'+iconP+'</div>';}
var iconN=G.O.icons.viewerImgNext;if(iconN!=undefined&&iconN!=''){sNav+='<div class="nGY2ViewerAreaNext ngy2viewerToolAction" data-ngy2action="next">'+iconN+'</div>';}
G.VOM.$content=jQuery('<div class="nGY2ViewerContent">'+sMedia+sNav+'</div>').appendTo(G.VOM.$viewer);var $mediaPan=G.VOM.$content.find('.nGY2ViewerMediaPan');G.VOM.$mediaPrevious=$mediaPan.eq(0);G.VOM.$mediaCurrent=$mediaPan.eq(1);G.VOM.$mediaNext=$mediaPan.eq(2);G.VOM.ImageLoader.loadImage(VieweImgSizeRetrieved,G.VOM.NGY2Item(0));G.VOM.ImageLoader.loadImage(VieweImgSizeRetrieved,G.VOM.NGY2Item(-1));G.VOM.ImageLoader.loadImage(VieweImgSizeRetrieved,G.VOM.NGY2Item(1));G.VOM.padding.H=parseInt(G.VOM.$content.css("padding-left"))+parseInt(G.VOM.$content.css("padding-right"));G.VOM.padding.V=parseInt(G.VOM.$content.css("padding-top"))+parseInt(G.VOM.$content.css("padding-bottom"));var vtbBg1='';var vtbBg2=' toolbarBackground';if(G.O.viewerToolbar.fullWidth){vtbBg1=' toolbarBackground';vtbBg2='';}
var vtbAlign='text-align:center;';switch(G.O.viewerToolbar.align){case'left':vtbAlign='text-align:left;';break;case'right':vtbAlign='text-align:right;';break;}
var sTB='<div class="toolbarContainer nGEvent'+vtbBg1+'" style="visibility:'+(G.O.viewerToolbar.display?"visible":"hidden")+';'+vtbAlign+'"><div class="toolbar nGEvent'+vtbBg2+'"></div></div>';G.VOM.$toolbar=jQuery(sTB).appendTo(G.VOM.$viewer);if(G.VOM.toolbarMode=='min'||(G.O.viewerToolbar.autoMinimize>0&&G.O.viewerToolbar.autoMinimize>=G.GOM.cache.viewport.w)){ViewerToolbarForVisibilityMin();}
else{ViewerToolbarForVisibilityStd();}
if(G.O.viewerTools.topLeft!=''){var sTopLeft='<div class="nGY2ViewerToolsTopLeft nGEvent"><div class="toolbar nGEvent">';var sTL=G.O.viewerTools.topLeft.split(',');for(var i=0,sTLL=sTL.length;i<sTLL;i++){sTopLeft+=ToolbarAddElt(sTL[i]);}
sTopLeft+='</div></div>';G.VOM.$toolbarTL=jQuery(sTopLeft).appendTo(G.VOM.$viewer);}
if(G.O.viewerTools.topRight!=''){var sTopRight='<div class="nGY2ViewerToolsTopRight nGEvent"><div class="toolbar nGEvent">';var sTR=G.O.viewerTools.topRight.split(',');for(var i=0,sTRL=sTR.length;i<sTRL;i++){sTopRight+=ToolbarAddElt(sTR[i]);}
sTopRight+='</div></div>';G.VOM.$toolbarTR=jQuery(sTopRight).appendTo(G.VOM.$viewer);}
ViewerToolsOn();if(G.O.viewerDisplayLogo){G.$E.vwLogo=jQuery('<div class="nGY2 nGY2ViewerLogo"></div>').appendTo(G.VOM.$viewer);}
if(ngscreenfull.enabled&&G.O.viewerFullscreen){ngscreenfull.request();}
setElementOnTop('',G.VOM.$viewer);ResizeInternalViewer(true);G.VOM.timeImgChanged=new Date().getTime();var tweenable=new NGTweenable();tweenable.tween({from:{opacity:0,posY:G.VOM.window.lastHeight*.5},to:{opacity:1,posY:0},delay:30,duration:500,easing:'easeOutQuart',step:function(state){G.VOM.$viewer.css('opacity',state.opacity);G.VOM.$viewer[0].style[G.CSStransformName]='translateY('+(state.posY)+'px) ';}});ViewerMediaPanX(0);ViewerSetEvents();DisplayInternalViewer(0,'');if(G.O.slideshowAutoStart){G.VOM.playSlideshow=false;SlideshowToggle();}}
function ViewerEvents(){if(!G.VOM.viewerDisplayed||G.VOM.viewerMediaIsChanged||G.VOM.NGY2Item(0).mediaKind!='img'){return false;}
return true;}
function ViewerSetEvents(){if(G.VOM.hammertime==null){G.VOM.hammertime=new NGHammer.Manager(G.VOM.$cont[0],{recognizers:[[NGHammer.Pinch,{enable:true}],[NGHammer.Pan,{direction:NGHammer.DIRECTION_ALL}]]});G.VOM.hammertime.on('pan',function(ev){if(!ViewerEvents()){return;}
if(G.VOM.zoom.isZooming){ViewerImagePanSetPosition(G.VOM.panPosX+ev.deltaX,G.VOM.panPosY+ev.deltaY,G.VOM.$mediaCurrent,false);if(G.VOM.toolbarsDisplayed==true){G.VOM.toolsHide();}}
else{if(ev.deltaY>G.VOM.panThreshold&&Math.abs(ev.deltaX)<G.VOM.panThreshold&&!G.VOM.panXOnly){ViewerMediaPanX(0);var dist=Math.min(ev.deltaY,200);G.VOM.$viewer[0].style[G.CSStransformName]='translateY('+dist+'px) ';G.VOM.$viewer.css('opacity',1-dist/200/2);}
else{if(Math.abs(ev.deltaX)>G.VOM.panThreshold){G.VOM.panXOnly=true;}
ViewerMediaPanX(ev.deltaX);G.VOM.$viewer[0].style[G.CSStransformName]='translateY(0px)';G.VOM.$viewer.css('opacity',1);}}});G.VOM.hammertime.on('panend',function(ev){if(!ViewerEvents()){return;}
if(G.VOM.zoom.isZooming){G.VOM.timeImgChanged=new Date().getTime();ViewerImagePanSetPosition(G.VOM.panPosX+ev.deltaX,G.VOM.panPosY+ev.deltaY,G.VOM.$mediaCurrent,true);}
else{var panY=false;if(!G.VOM.panXOnly){if(ev.deltaY>50&&Math.abs(ev.deltaX)<50){CloseInternalViewer(G.VOM.currItemIdx);panY=true;}}
if(!panY){if(Math.abs(ev.deltaX)<50){ViewerMediaPanX(0);}
else{ev.deltaX>50?DisplayPreviousMedia():DisplayNextMedia();}}}
G.VOM.panXOnly=false;});if(G.O.viewerZoom){G.VOM.hammertime.add(new NGHammer.Tap({event:'doubletap',taps:2}));G.VOM.hammertime.add(new NGHammer.Tap({event:'singletap'}));G.VOM.hammertime.get('doubletap').recognizeWith('singletap');G.VOM.hammertime.get('singletap').requireFailure('doubletap');G.VOM.hammertime.on('singletap',function(ev){if(!ViewerEvents()){return;}
StopPropagationPreventDefault(ev.srcEvent);if(G.VOM.toolbarsDisplayed==false){debounce(ViewerToolsUnHide,100,false)();}
else{if(ev.target.className.indexOf('nGY2ViewerMedia')!==-1){if(ev.srcEvent.pageX<(G.GOM.cache.viewport.w/2)){DisplayPreviousMedia();}
else{DisplayNextMedia();}}}});G.VOM.hammertime.on('doubletap',function(ev){if(!ViewerEvents()){return;}
StopPropagationPreventDefault(ev.srcEvent);if(ev.target.className.indexOf('nGY2ViewerMedia')!==-1){if(G.VOM.zoom.isZooming){G.VOM.zoom.isZooming=false;ResizeInternalViewer(true);}
else{if(ViewerZoomStart()){G.VOM.zoom.userFactor=1.5;ViewerMediaSetPosAndZoom();}}}});G.VOM.hammertime.on('pinchend',function(ev){ev.srcEvent.stopPropagation();ev.srcEvent.preventDefault();G.VOM.timeImgChanged=new Date().getTime();});G.VOM.hammertime.on('pinch',function(ev){ev.srcEvent.stopPropagation();ev.srcEvent.preventDefault();if(ViewerZoomStart()){G.VOM.zoom.userFactor=ev.scale;ViewerZoomMax();ViewerZoomMin();ViewerMediaSetPosAndZoom();}});}
else{G.VOM.hammertime.on('tap',function(ev){if(!ViewerEvents()){return;}
StopPropagationPreventDefault(ev.srcEvent);if(G.VOM.toolbarsDisplayed==false){debounce(ViewerToolsUnHide,100,false)();}
else{if(ev.target.className.indexOf('nGY2ViewerMedia')!==-1){if(ev.srcEvent.pageX<(G.GOM.cache.viewport.w/2)){DisplayPreviousMedia();}
else{DisplayNextMedia();}}}});}}}
function StopPropagationPreventDefault(e){e.stopPropagation();e.preventDefault();}
function ViewerToolsHide(){if(G.VOM.viewerDisplayed){G.VOM.toolbarsDisplayed=false;ViewerToolsOpacity(0);}}
function ViewerToolsUnHide(){if(G.VOM.viewerDisplayed){G.VOM.toolbarsDisplayed=true;ViewerToolsOpacity(1);G.VOM.toolsHide();}}
function ViewerToolsOpacity(op){if(G.VOM.$toolbar!=null){G.VOM.$toolbar.css('opacity',op);}
if(G.VOM.$toolbarTL!=null){G.VOM.$toolbarTL.css('opacity',op);}
if(G.VOM.$toolbarTR!=null){G.VOM.$toolbarTR.css('opacity',op);}
G.VOM.$content.find('.nGY2ViewerAreaNext').css('opacity',op);G.VOM.$content.find('.nGY2ViewerAreaPrevious').css('opacity',op);}
function ViewerToolsOn(){G.VOM.$viewer.off('touchstart click','.ngy2viewerToolAction',ViewerToolsAction);G.VOM.$viewer.on('touchstart click','.ngy2viewerToolAction',ViewerToolsAction);}
function ViewerToolsAction(e){if((new Date().getTime())-G.timeLastTouchStart<300){return;}
G.timeLastTouchStart=new Date().getTime();var $this=$(this);var ngy2action=$this.data('ngy2action');if(ngy2action==undefined){return;}
switch(ngy2action){case'next':StopPropagationPreventDefault(e);DisplayNextMedia();break;case'previous':StopPropagationPreventDefault(e);DisplayPreviousMedia();break;case'playPause':e.stopPropagation();SlideshowToggle();break;case'zoomIn':StopPropagationPreventDefault(e);if(ViewerZoomStart()){ViewerZoomIn(true);}
break;case'zoomOut':StopPropagationPreventDefault(e);if(ViewerZoomStart()){ViewerZoomIn(false);}
break;case'minimize':StopPropagationPreventDefault(e);if(G.VOM.toolbarMode=='std'){ViewerToolbarForVisibilityMin();}
else{ViewerToolbarForVisibilityStd();}
break;case'fullScreen':e.stopPropagation();if(ngscreenfull.enabled){ngscreenfull.toggle();}
break;case'info':e.stopPropagation();ItemDisplayInfo(G.VOM.NGY2Item(0));break;case'close':StopPropagationPreventDefault(e);if((new Date().getTime())-G.VOM.timeImgChanged<400){return;}
CloseInternalViewer(G.VOM.currItemIdx);break;case'download':StopPropagationPreventDefault(e);DownloadImage(G.VOM.items[G.VOM.currItemIdx].ngy2ItemIdx);break;case'share':StopPropagationPreventDefault(e);PopupShare(G.VOM.items[G.VOM.currItemIdx].ngy2ItemIdx);break;case'linkOriginal':StopPropagationPreventDefault(e);OpenOriginal(G.VOM.NGY2Item(0));break;case'rotateLeft':StopPropagationPreventDefault(e);ViewerImageRotate(-90);break;case'rotateRight':StopPropagationPreventDefault(e);ViewerImageRotate(90);break;}
var fu=G.O.fnImgToolbarCustClick;if(ngy2action.indexOf('custom')==0&&fu!==null){typeof fu=='function'?fu(ngy2action,$this,G.VOM.NGY2Item(0)):window[fu](ngy2action,$this,G.VOM.NGY2Item(0));}}
function ViewerImageRotate(angle){var item=G.VOM.NGY2Item(0);if(item.mediaKind=='img'){item.rotationAngle+=angle;item.rotationAngle=item.rotationAngle%360;if(item.rotationAngle<0){item.rotationAngle+=360;}
ViewerMediaPanX(0);ViewerMediaSetPosAndZoomOne(G.VOM.NGY2Item(0),G.VOM.$mediaCurrent,true);}}
function ItemDisplayInfo(item){var content='<div class="nGY2PopupOneItemText">'+item.title+'</div>';content+='<div class="nGY2PopupOneItemText">'+item.description+'</div>';if(item.author!=''){content+='<div class="nGY2PopupOneItemText">'+G.O.icons.user+' '+item.author+'</div>';}
if(item.exif.model!=''){content+='<div class="nGY2PopupOneItemText">'+G.O.icons.config+' '+item.exif.model+'</div>';}
var sexif='';sexif+=item.exif.flash==''?'':' &nbsp; '+item.exif.flash;sexif+=item.exif.focallength==''?'':' &nbsp; '+item.exif.focallength+'mm';sexif+=item.exif.fstop==''?'':' &nbsp; f'+item.exif.fstop;sexif+=item.exif.exposure==''?'':' &nbsp; '+item.exif.exposure+'s';sexif+=item.exif.iso==''?'':' &nbsp; '+item.exif.iso+' ISO';if(item.exif.time!=''){sexif+=' &nbsp; '+item.exif.time;}
content+='<div class="nGY2PopupOneItemText">'+sexif+'</div>';if(item.exif.location!=''){content+='<div class="nGY2PopupOneItemText">'+G.O.icons.location+' <a href="http://maps.google.com/maps?z=12&t=m&q='+encodeURIComponent(item.exif.location)+'" target="_blank">'+item.exif.location+'</a></div>';content+='<iframe width="300" height="150" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?&amp;t=m&amp;q='+encodeURIComponent(item.exif.location)+'&amp;output=embed"></iframe>';}
Popup(G.O.icons.viewerInfo,content,'Left');}
function ToolbarAddElt(elt){var r='<div class="ngbt ngy2viewerToolAction ',e=elt.replace(/^\s+|\s+$/g,'');switch(e){case'minimizeButton':var ic=G.O.icons.viewerToolbarMin;if(G.VOM.toolbarMode=='min'){ic=G.O.icons.viewerToolbarStd;}
r+='minimizeButton nGEvent" data-ngy2action="minimize">'+ic+'</div>';break;case'previousButton':r+='previousButton nGEvent" data-ngy2action="previous">'+G.O.icons.viewerPrevious+'</div>';break;case'pageCounter':r+='pageCounter nGEvent"></div>';break;case'nextButton':r+='nextButton nGEvent" data-ngy2action="next">'+G.O.icons.viewerNext+'</div>';break;case'playPauseButton':r+='playButton playPauseButton nGEvent" data-ngy2action="playPause">'+G.O.icons.viewerPlay+'</div>';break;case'rotateLeft':r+='rotateLeftButton nGEvent" data-ngy2action="rotateLeft">'+G.O.icons.viewerRotateLeft+'</div>';break;case'rotateRight':r+='rotateRightButton nGEvent" data-ngy2action="rotateRight">'+G.O.icons.viewerRotateRight+'</div>';break;case'downloadButton':r+='downloadButton nGEvent" data-ngy2action="download">'+G.O.icons.viewerDownload+'</div>';break;case'zoomButton':r+='nGEvent" data-ngy2action="zoomIn">'+G.O.icons.viewerZoomIn+'</div><div class="ngbt ngy2viewerToolAction nGEvent" data-ngy2action="zoomOut">'+G.O.icons.viewerZoomOut+'</div>';break;case'fullscreenButton':var s=G.O.icons.viewerFullscreenOn;if(ngscreenfull.enabled&&G.VOM.viewerIsFullscreen){s=G.O.icons.viewerFullscreenOff;}
r+='setFullscreenButton fullscreenButton nGEvent" data-ngy2action="fullScreen">'+s+'</div>';break;case'infoButton':r+='infoButton nGEvent" data-ngy2action="info">'+G.O.icons.viewerInfo+'</div>';break;case'linkOriginalButton':r+='linkOriginalButton nGEvent" data-ngy2action="linkOriginal">'+G.O.icons.viewerLinkOriginal+'</div>';break;case'closeButton':r+='closeButton nGEvent" data-ngy2action="close">'+G.O.icons.buttonClose+'</div>';break;case'shareButton':r+='nGEvent" data-ngy2action="share">'+G.O.icons.viewerShare+'</div>';break;case'label':r+='"><div class="title nGEvent" itemprop="name"></div><div class="description nGEvent" itemprop="description"></div></div>';break;default:if(e.indexOf('custom')==0){var t='';var fu=G.O.fnImgToolbarCustInit;if(fu!==null){typeof fu=='function'?fu(e):window[fu](e);}
if(t==undefined||t==''){var n=e.substring(6);t=G.O.icons['viewerCustomTool'+n];}
r+='ngy2CustomBtn '+e+' nGEvent" data-ngy2action="'+e+'">'+t+'</div>';}
else{r='';}
break;}
return r;}
function SlideshowToggle(){if(G.VOM.playSlideshow){window.clearTimeout(G.VOM.playSlideshowTimerID);G.VOM.playSlideshow=false;G.VOM.$viewer.find('.playPauseButton').html(G.O.icons.viewerPlay);}
else{G.VOM.playSlideshow=true;DisplayNextMedia();G.VOM.$viewer.find('.playPauseButton').html(G.O.icons.viewerPause);}}
function ViewerToolbarForVisibilityStd(){G.VOM.toolbarMode='std';var sTB='';var t=G.O.viewerToolbar.standard.split(',');for(var i=0,lt=t.length;i<lt;i++){sTB+=ToolbarAddElt(t[i]);}
G.VOM.$toolbar.find('.toolbar').html(sTB);ViewerToolbarElementContent();}
function ViewerToolbarForVisibilityMin(){if(G.O.viewerToolbar.minimized==undefined||G.O.viewerToolbar.minimized==''){ViewerToolbarForVisibilityStd();}
else{G.VOM.toolbarMode='min';var sTB='';var t=G.O.viewerToolbar.minimized.split(',');for(var i=0,lt=t.length;i<lt;i++){sTB+=ToolbarAddElt(t[i]);}
G.VOM.$toolbar.find('.toolbar').html(sTB);ViewerToolbarElementContent();}}
function ViewerToolbarElementContent(){var vomIdx=G.VOM.currItemIdx;if(vomIdx==null){return;}
var item=G.VOM.NGY2Item(0);var setTxt=false;if(item.title!==undefined&&item.title!=''){G.VOM.$viewer.find('.ngy2viewerToolAction').find('.title').html(item.title);setTxt=true;}
else{G.VOM.$viewer.find('.ngy2viewerToolAction').find('.title').html('');}
if(item.description!==undefined&&item.description!=''){G.VOM.$viewer.find('.ngy2viewerToolAction').find('.description').html(item.description);setTxt=true;}
else{G.VOM.$viewer.find('.ngy2viewerToolAction').find('.description').html('');}
if(setTxt){G.VOM.$viewer.find('.ngy2viewerToolAction').find('.label').show();}
else{G.VOM.$viewer.find('.ngy2viewerToolAction').find('.label').hide();}
var viewerMaxImages=G.VOM.items.length;if(viewerMaxImages>0){G.VOM.$viewer.find('.pageCounter').html((G.VOM.items[vomIdx].mediaNumber)+'/'+viewerMaxImages);}
var $cu=G.VOM.$viewer.find('.ngy2CustomBtn');var fu=G.O.fnImgToolbarCustDisplay;if($cu.length>0&&fu!==null){typeof fu=='function'?fu($cu,item):window[fu]($cu,item);}
ViewerToolsOn();}
function ViewerMediaPanX(posX){G.VOM.swipePosX=posX;if(G.CSStransformName==null){}
else{G.VOM.$mediaCurrent[0].style[G.CSStransformName]='translate('+posX+'px, 0px)';var itemPrevious=G.VOM.NGY2Item(-1);var itemNext=G.VOM.NGY2Item(1);if(G.O.imageTransition.startsWith('SWIPE')){if(itemPrevious.mediaTransition()){ViewerSetMediaVisibility(G.VOM.NGY2Item(-1),G.VOM.$mediaPrevious,1);}
if(itemNext.mediaTransition()){ViewerSetMediaVisibility(G.VOM.NGY2Item(1),G.VOM.$mediaNext,1);}
var sc=Math.min(Math.max(Math.abs(posX)/G.VOM.window.lastWidth,.8),1);if(G.O.imageTransition=='SWIPE'){sc=1;}
if(posX>0){var dir=G.VOM.window.lastWidth;if(itemPrevious.mediaTransition()){G.VOM.$mediaPrevious[0].style[G.CSStransformName]='translate('+(-dir+posX)+'px, 0px) scale('+sc+')';}
if(itemNext.mediaTransition()){G.VOM.$mediaNext[0].style[G.CSStransformName]='translate('+(dir)+'px, 0px) scale('+sc+')';}}
else{var dir=-G.VOM.window.lastWidth;if(itemNext.mediaTransition()){G.VOM.$mediaNext[0].style[G.CSStransformName]='translate('+(-dir+posX)+'px, 0px) scale('+sc+')';}
if(itemPrevious.mediaTransition()){G.VOM.$mediaPrevious[0].style[G.CSStransformName]='translate('+(dir)+'px, 0px) scale('+sc+')';}}}
if(G.O.imageTransition=='SLIDEAPPEAR'){G.VOM.$mediaPrevious[0].style[G.CSStransformName]='';G.VOM.$mediaNext[0].style[G.CSStransformName]='';if(posX<0){var o=(-posX)/G.VOM.window.lastWidth;if(itemNext.mediaTransition()){ViewerSetMediaVisibility(itemNext,G.VOM.$mediaNext,o);}
if(itemPrevious.mediaTransition()){ViewerSetMediaVisibility(itemPrevious,G.VOM.$mediaPrevious,0);}}
else{var o=posX/G.VOM.window.lastWidth;if(itemPrevious.mediaTransition()){ViewerSetMediaVisibility(itemPrevious,G.VOM.$mediaPrevious,o);}
if(itemNext.mediaTransition()){ViewerSetMediaVisibility(itemNext,G.VOM.$mediaNext,0);}}}}}
function DisplayNextMedia(){if(G.VOM.viewerMediaIsChanged||((new Date().getTime())-G.VOM.timeImgChanged<300)){return;}
TriggerCustomEvent('lightboxNextImage');DisplayInternalViewer(G.VOM.IdxNext(),'nextImage');};function DisplayPreviousMedia(){if(G.VOM.viewerMediaIsChanged||((new Date().getTime())-G.VOM.timeImgChanged<300)){return;}
if(G.VOM.playSlideshow){SlideshowToggle();}
TriggerCustomEvent('lightboxPreviousImage');DisplayInternalViewer(G.VOM.IdxPrevious(),'previousImage');};function DisplayInternalViewer(newVomIdx,displayType){if(G.VOM.playSlideshow){window.clearTimeout(G.VOM.playSlideshowTimerID);}
var itemOld=G.VOM.NGY2Item(0);var itemNew=G.I[G.VOM.items[newVomIdx].ngy2ItemIdx];var $new=(displayType=='nextImage'?G.VOM.$mediaNext:G.VOM.$mediaPrevious);if(displayType=='nextImage'){ViewerSetMediaVisibility(G.VOM.NGY2Item(-1),G.VOM.$mediaPrevious,0);}
else{ViewerSetMediaVisibility(G.VOM.NGY2Item(1),G.VOM.$mediaNext,0);}
G.VOM.timeImgChanged=new Date().getTime();G.VOM.viewerMediaIsChanged=true;G.VOM.zoom.isZooming=false;ResizeInternalViewer(true);if(G.O.debugMode&&console.timeline){console.timeline('nanogallery2_viewer');}
SetLocationHash(itemNew.albumID,itemNew.GetID());var vP=G.GOM.cache.viewport;var dur=400*(vP.w-Math.abs(G.VOM.swipePosX))/vP.w;if(displayType==''){ViewerSetMediaVisibility(G.VOM.NGY2Item(0),G.VOM.$mediaCurrent,1);if(G.CSStransformName==null){ViewerSetMediaVisibility(itemNew,$new,1);DisplayInternalViewerComplete(displayType,newVomIdx);}
else{ViewerSetMediaVisibility(itemNew,$new,0);new NGTweenable().tween({from:{opacity:0},to:{opacity:1},attachment:{dT:displayType,item:itemOld},easing:'easeInOutSine',delay:30,duration:400,step:function(state,att){G.VOM.$content.css('opacity',state.opacity);},finish:function(state,att){ViewerToolsUnHide();DisplayInternalViewerComplete(att.dT,newVomIdx);}});}}
else{if(G.CSStransformName==null){ViewerSetMediaVisibility(itemNew,$new,1);ViewerSetMediaVisibility(G.VOM.NGY2Item(0),G.VOM.$mediaCurrent,1);DisplayInternalViewerComplete(displayType,newVomIdx);}
else{switch(G.O.imageTransition){case'SWIPE':case'SWIPE2':var dir=(displayType=='nextImage'?-vP.w:vP.w);$new[0].style[G.CSStransformName]='translate('+(-dir)+'px, 0px) '
new NGTweenable().tween({from:{t:G.VOM.swipePosX},to:{t:(displayType=='nextImage'?-vP.w:vP.w)},attachment:{dT:displayType,$e:$new,itemNew:itemNew,itemOld:itemOld,dir:dir},delay:30,duration:dur,easing:(G.O.imageTransition=='swipe'?'easeInOutSine':'easeInOutCubic'),step:function(state,att){ViewerSetMediaVisibility(G.VOM.NGY2Item(0),G.VOM.$mediaCurrent,1);G.VOM.$mediaCurrent[0].style[G.CSStransformName]='translate('+state.t+'px, 0px)';if(att.itemNew.mediaTransition()){ViewerSetMediaVisibility(att.itemNew,att.$e,1);var sc=Math.min(Math.max((Math.abs(state.t))/G.VOM.window.lastWidth,.8),1);if(G.O.imageTransition=='SWIPE'){sc=1;}
att.$e[0].style[G.CSStransformName]='translate('+(-att.dir+state.t)+'px, 0px) scale('+sc+')';}},finish:function(state,att){G.VOM.$mediaCurrent[0].style[G.CSStransformName]='';att.$e[0].style[G.CSStransformName]='';DisplayInternalViewerComplete(att.dT,newVomIdx);}});break;case'SLIDEAPPEAR':default:var dir=(displayType=='nextImage'?-vP.w:vP.w);var op=(Math.abs(G.VOM.swipePosX))/G.VOM.window.lastWidth;$new[0].style[G.CSStransformName]='';new NGTweenable().tween({from:{o:op,t:G.VOM.swipePosX},to:{o:1,t:(displayType=='nextImage'?-vP.w:vP.w)},attachment:{dT:displayType,$e:$new,itemNew:itemNew,itemOld:itemOld,dir:dir},delay:30,duration:dur,easing:'easeInOutSine',step:function(state,att){G.VOM.$mediaCurrent[0].style[G.CSStransformName]='translate('+state.t+'px, 0px)';if(att.itemNew.mediaTransition()){ViewerSetMediaVisibility(att.itemNew,att.$e,state.o);}},finish:function(state,att){G.VOM.$mediaCurrent[0].style[G.CSStransformName]='';DisplayInternalViewerComplete(att.dT,newVomIdx);}});break;}}}}
function DisplayInternalViewerComplete(displayType,newVomIdx){G.VOM.currItemIdx=newVomIdx;var ngy2item=G.VOM.NGY2Item(0);ViewerToolbarElementContent();if(G.O.debugMode&&console.timeline){console.timelineEnd('nanogallery2_viewer');}
var fu=G.O.fnImgDisplayed;if(fu!==null){typeof fu=='function'?fu(ngy2item):window[fu](ngy2item);}
G.VOM.swipePosX=0;if(displayType!=''){G.VOM.$mediaCurrent.removeClass('imgCurrent');var $tmp=G.VOM.$mediaCurrent;switch(displayType){case'nextImage':G.VOM.$mediaCurrent=G.VOM.$mediaNext;G.VOM.$mediaNext=$tmp;break;case'previousImage':G.VOM.$mediaCurrent=G.VOM.$mediaPrevious;G.VOM.$mediaPrevious=$tmp;break;}}
G.VOM.$mediaCurrent.addClass('imgCurrent');var $pans=G.VOM.$content.find('.nGY2ViewerMediaPan');G.VOM.$mediaCurrent.insertAfter($pans.last());if(ngy2item.mediaKind=='img'&&ngy2item.imageWidth==0){ViewerSetMediaVisibility(G.VOM.NGY2Item(0),G.VOM.$mediaCurrent,0);}
else{G.VOM.$mediaCurrent.children().eq(0).attr('class','nGY2ViewerMediaLoaderHidden');ViewerSetMediaVisibility(G.VOM.NGY2Item(0),G.VOM.$mediaCurrent,1);}
G.VOM.$mediaNext.empty();var nextItem=G.VOM.NGY2Item(1);var spreloader='<div class="nGY2ViewerMediaLoaderDisplayed"></div>';if(nextItem.mediaKind=='img'&&nextItem.imageWidth!=0&&nextItem.imageHeight!=0){spreloader='<div class="nGY2ViewerMediaLoaderHidden"></div>';}
G.VOM.$mediaNext.append(spreloader+nextItem.mediaMarkup);ViewerSetMediaVisibility(nextItem,G.VOM.$mediaNext,0);if(nextItem.mediaKind=='img'){G.VOM.ImageLoader.loadImage(VieweImgSizeRetrieved,nextItem);}
else{ViewerMediaCenterNotImg(G.VOM.$mediaNext);}
G.VOM.$mediaPrevious.empty();var previousItem=G.VOM.NGY2Item(-1);spreloader='<div class="nGY2ViewerMediaLoaderDisplayed"></div>';if(previousItem.mediaKind=='img'&&previousItem.imageWidth!=0&&previousItem.imageHeight!=0){spreloader='<div class="nGY2ViewerMediaLoaderHidden"></div>';}
G.VOM.$mediaPrevious.append(spreloader+previousItem.mediaMarkup);ViewerSetMediaVisibility(previousItem,G.VOM.$mediaPrevious,0);if(previousItem.mediaKind=='img'){G.VOM.ImageLoader.loadImage(VieweImgSizeRetrieved,previousItem);}
else{ViewerMediaCenterNotImg(G.VOM.$mediaPrevious);}
if(G.VOM.playSlideshow){G.VOM.$mediaCurrent.children().eq(1).ngimagesLoaded().always(function(instance){if(G.VOM.playSlideshow){G.VOM.playSlideshowTimerID=window.setTimeout(function(){DisplayNextMedia();},G.VOM.slideshowDelay);}});}
ResizeInternalViewer();G.VOM.viewerMediaIsChanged=false;TriggerCustomEvent('lightboxImageDisplayed');}
function VieweImgSizeRetrieved(w,h,item,n){item.imageWidth=w;item.imageHeight=h;if(G.VOM.NGY2Item(0)==item){G.VOM.$mediaCurrent.children().eq(0).attr('class','nGY2ViewerMediaLoaderHidden');ViewerSetMediaVisibility(G.VOM.NGY2Item(0),G.VOM.$mediaCurrent,1);G.VOM.zoom.userFactor=1;}
if(G.VOM.NGY2Item(1)==item){G.VOM.$mediaNext.children().eq(0).attr('class','nGY2ViewerMediaLoaderHidden');}
if(G.VOM.NGY2Item(-1)==item){G.VOM.$mediaPrevious.children().eq(0).attr('class','nGY2ViewerMediaLoaderHidden');}
ViewerMediaSetPosAndZoom();}
function ViewerSetMediaVisibility(item,$media,opacity){if(item.mediaKind=='img'&&item.imageWidth==0){$media.children().eq(1).css({opacity:0,visibility:'hidden'});return;}
if(opacity==0){$media.children().css({opacity:0,visibility:'hidden'});}
else{$media.children().css({opacity:opacity,visibility:'visible'});}}
function CloseInternalViewer(vomIdx){G.VOM.viewerMediaIsChanged=false;if(G.VOM.viewerDisplayed){jQuery('body').css({overflowX:G.VOM.saveOverflowX,overflowY:G.VOM.saveOverflowY});if(G.VOM.playSlideshow){window.clearTimeout(G.VOM.playSlideshowTimerID);G.VOM.playSlideshow=false;}
G.VOM.hammertime.destroy();G.VOM.hammertime=null;if(ngscreenfull.enabled&&G.VOM.viewerIsFullscreen){G.VOM.viewerIsFullscreen=false;ngscreenfull.exit();}
G.VOM.$cont.hide(0).off().show(0).html('').remove();G.VOM.viewerDisplayed=false;if(G.O.thumbnailAlbumDisplayImage){if(vomIdx==null){}
else{var item=G.I[G.VOM.items[vomIdx].ngy2ItemIdx];var parent=NGY2Item.Get(G,item.albumID);if(G.GOM.albumIdx!=parent.albumID){DisplayAlbum('-1',parent.albumID);}
else{GalleryResize();SetLocationHash('','');ThumbnailHoverReInitAll();}}}
else{if(vomIdx!=null){if(G.GOM.albumIdx==-1){DisplayAlbum('',G.I[G.VOM.items[vomIdx].ngy2ItemIdx].albumID);}
else{GalleryResize();SetLocationHash(G.I[G.VOM.items[vomIdx].ngy2ItemIdx].albumID,'');ThumbnailHoverReInitAll();}}}
G.VOM.timeImgChanged=new Date().getTime();}}
function ResizeInternalViewer(forceUpdate){forceUpdate=typeof forceUpdate!=='undefined'?forceUpdate:false;if(G.VOM.$toolbar===null){return;}
var windowsW=G.VOM.$viewer.width();var windowsH=G.VOM.$viewer.height();var $elt=G.VOM.$mediaCurrent.children().eq(1);if($elt==null||G.VOM.currItemIdx==-1){return;}
if(!forceUpdate&&G.VOM.window.lastWidth==windowsW&&G.VOM.window.lastHeight==windowsH){return;}
G.VOM.window.lastWidth=windowsW;G.VOM.window.lastHeight=windowsH;var $tb=G.VOM.$toolbar.find('.toolbar');var tb_OHt=$tb.outerHeight(true);switch(G.O.viewerToolbar.position){case'topOverImage':G.VOM.$content.css({height:windowsH,width:windowsW,top:0});G.VOM.$toolbar.css({top:0,bottom:''});break;case'top':windowsH-=tb_OHt;G.VOM.$content.css({height:windowsH,width:windowsW,top:tb_OHt});G.VOM.$toolbar.css({top:0});break;case'bottomOverImage':G.VOM.$content.css({height:windowsH,width:windowsW,bottom:0,top:0});G.VOM.$toolbar.css({bottom:0});break;case'bottom':default:windowsH-=tb_OHt;G.VOM.$content.css({width:windowsW,top:0,bottom:tb_OHt});G.VOM.$toolbar.css({bottom:0});break;}
if(!G.VOM.viewerMediaIsChanged&&G.VOM.zoom.isZooming){ViewerMediaSetPosAndZoom();}
else{if(!G.VOM.zoom.isZooming&&(G.VOM.zoom.userFactor!=0||G.VOM.panPosX!=0||G.VOM.panPosY!=0||G.VOM.zoom.posX!=0||G.VOM.zoom.posY!=0)){G.VOM.zoom.isZooming=true;new NGTweenable().tween({from:{userFactor:G.VOM.zoom.userFactor,panPosX:G.VOM.panPosX,panPosY:G.VOM.panPosY,zoomPosX:G.VOM.zoom.posX,zoomPosY:G.VOM.zoom.posY},to:{userFactor:1,panPosX:0,panPosY:0,zoomPosX:0,zoomPosY:0},easing:'easeInOutSine',delay:0,duration:150,step:function(state){G.VOM.zoom.userFactor=state.userFactor;G.VOM.panPosX=state.panPosX;G.VOM.panPosY=state.panPosY;G.VOM.zoom.posX=state.zoomPosX;G.VOM.zoom.posY=state.zoomPosY;ViewerMediaSetPosAndZoom();},finish:function(state){G.VOM.zoom.isZooming=false;}});}
else{G.VOM.zoom.userFactor=1;G.VOM.zoom.isZooming=false;G.VOM.panPosX=0;G.VOM.panPosY=0;G.VOM.zoom.posX=0;G.VOM.zoom.posY=0;ViewerMediaSetPosAndZoom();}}}
function BuildSkeleton(){var $elements=G.$E.base.children('a');if($elements.length>0){G.O.$markup=$elements;}
G.$E.base.text('');G.$E.base.addClass('ngy2_container');var sRTL='';if(G.O.RTL){sRTL='style="text-align:right;direction:rtl;"';}
G.$E.base.addClass(G.O.theme)
SetGalleryTheme();if(G.O.thumbnailLabel.get('hideIcons')){G.O.icons.thumbnailAlbum='';G.O.icons.thumbnailImage='';}
var styleNavigation="";if(G.O.navigationFontSize!=undefined&&G.O.navigationFontSize!=''){styleNavigation=' style="font-size:'+G.O.navigationFontSize+';"';}
G.$E.conNavigationBar=jQuery('<div class="nGY2Navigationbar" '+styleNavigation+'></div>').appendTo(G.$E.base);G.$E.conLoadingB=jQuery('<div class="nanoGalleryLBarOff"><div></div><div></div><div></div><div></div><div></div></div>').appendTo(G.$E.base);G.$E.conTnParent=jQuery('<div class="nGY2Gallery"></div>').appendTo(G.$E.base);G.$E.conTn=jQuery('<div class="nGY2GallerySub"></div>').appendTo(G.$E.conTnParent);switch(G.O.thumbnailAlignment){case'left':G.$E.conTnParent.css({'text-align':'left'});break;case'right':G.$E.conTnParent.css({'text-align':'right'});break;}
if(G.O.galleryBuildInit2!==undefined){var t1=G.O.galleryBuildInit2.split('|');for(var i=0;i<t1.length;i++){var o1=t1[i].split('_');if(o1.length==2){G.$E.conTn.css(o1[0],o1[1]);}}}
var effects=G.tn.hoverEffects.std.concat(G.tn.hoverEffects.level1);for(var j=0;j<effects.length;j++){switch(effects[j].type){case'scale':case'rotateZ':case'rotateX':case'rotateY':case'translateX':case'translateY':if(effects[j].element=='.nGY2GThumbnail'){G.$E.base.css('overflow','visible');G.$E.base.find('.nGY2GallerySub').css('overflow','visible');G.$E.conTnParent.css('overflow','visible');}
break;}}
G.$E.conTnBottom=jQuery('<div class="nGY2GalleryBottom" '+styleNavigation+'></div>').appendTo(G.$E.conTnParent);if(G.O.portable){var logo='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH4QgDBCAWVVC/hwAABRxJREFUSMetll9oVFcexz/nnDvJRBmSzWTrmD9uNGZsHta0/qFIFQTxRcnCBgTFNlX0YR8W+1AK9lGwCBJYgn0KKr5136S4gpUQTR4caJRslcxYWV3iaphQapJJppO5957z60Mmk4mN1q75wg/OPefc+/v9vt/fueenKEFEqICqsNWAVNiCA7XwaS0iZeejo6OIiCltdIBdJXMLOYp5/PjxsoTVS5nr0mYDJIE/lObeBhaYAn4oJbboAwBvBedHJicnPx8YGGh/8eJF1dvKoJSShoYGf//+/Zl4PP4l8M2yIEoSLErx6c2bN6W1tXVRglWzLVu2SCqVEhE5LiI457SIoEREW2udMaZtcnLy+2QyWZ3L5XRHR4f+4MNdoBUahUJhcWilmZ/NE4ZhOQHn3LIi1lqjtS6vjY6O8uTJE9vc3MyDBw+mYrHYn0Uk63me8gCtlHLA7uHh4bW5XC7oePddPTQ8xHffDjM/PYe3thqMws35iAcHPj5ENBp9Yxmy2Sw7d+40z549C+7du9ewb9++D6y13wDaK+kE0DAzMyNKKbXtvfd5EfzM+Ef/4C+8x23+wzPm+IhtfMf3/Ksuyl+7u9FaY63l+vXrpFIpCoUCmzdvpquri9bWVoIgQClFIpFg48aNPH/+XE9NTQkQLTGmvEXKRERprZWIEIYhQRjQbN6hmUb+tCaPNnM055v40f3If7XBGMPT8af0fNLD0NDQsozPnDlDb28vx44dIwxDRARrLSKCKmUbiUQQkWWnoLJ20UpjFYAjVA6rBJTFV5ZIJIIfBBw4eICxsTHq6uo4dOgQ8XicgYEB7t69y/Hjx4nH43R1dVHB8q+w4hlXSmGd5edwmjCco5DLkZ+aJvTnyIdTrFmzhn9+/TVjY2M0NTVx+/Zt+vv7OXfuHKlUip6eHgBOnz6N7/vlYl0JKzIw78/T+sdGbn6yjf5ZS2HtJgIP+mcC5kySI1uSXPjqAlprTp06RWdnJ8ViEaUUVVVVnD9/nqtXr5LJZHj48CFbt279fQEEYUisZi2fXel9bWU750gmkwRBgNYaz/Ow1lJfX088Hmd2dpZcLvdaBl4pgQChH4B1iHU4a8E6Qj9ARGhpaUFrzeDgIJFIBGMM1lqMMWQyGSYmJohEIqxfv/7314CIoADtGTAaZTTaLI2VUhw+fBjnHBcvXuTy5cs45/A8j3Q6zcmTJ/F9n71799LW1rbgSOs3D+B1lBljcM7R3d3N0aNHKRQKnDhxgs7OTnbt2sX27dsZGRkhHo/T19e3+Kt/fQ1YawFwzolSCs/zUEqVtX1VcJcuXSKRSNDf3086nS6v79mzh76+Pjo6OigWi1RXV2OMWZC29PL8/PxSAL7vE41Gf4rFYkpEePToEb7vU1VVxW+ht7eXs2fPcv/+fQqFAps2baKlpaW8Xl1dTS6XY3x8HBFxtbW1BiiW4hAlInp8fNxt2LChPZvN/ru9vT2Sz+e93bt3qx07diwrzJWYcM5RU1NDNBots5bP53HOlS+kO3fuMDIy4hKJhKTT6ena2tqtxWJxoqamRr98HX9x7do1qaurExYaiXCVzK5bt04GBwdFRP728nVcWZAO+Hsmk/nsxo0bTTMzM5FXHZ83hYhQX1/vHzx48H9tbW1ngSsVvpYCmJ2dJRaLKRbapjpgOxB7K+9LmAbuAnOAnpiYcI2NjUsRLlo2myUMQ1M5t5rmnDO3bt1aNlfmd4W2XL/0/H8pUDF2rNCW/wLRuCkxx8V6wgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wOC0wM1QwNDozMjoyMi0wNDowMO7mdkwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDgtMDNUMDQ6MzI6MjItMDQ6MDCfu87wAAAAAElFTkSuQmCC';var st="font-weight:bold !important;color: #FF0075 !important;font-size: 14px !important;text-transform: lowercase !important;cursor:pointer !important;text-align: center !important;Text-Shadow: #000000 1px 0px 0px, #000000 1px 1px 0px, #000000 1px -1px 0px, #000000 -1px 1px 0px, #000000 -1px 0px 0px, #000000 -1px -1px 0px, #000000 0px 1px 0px, #000000 0px -1px 0px !important;";G.$E.ngy2i=jQuery('<div class="nGY2PortInfo"><a href="http://nano.gallery" target="_blank" title="nanogallery2 | easy photo gallery for your website" style="'+st+'"><img src="'+logo+'" style="height:32px !important;width:initial !important;box-shadow: none !important;vertical-align: middle !important;"/> &nbsp; nanogallery2</a></div>').appendTo(G.$E.base);G.$E.ngy2i.find('a').on({mouseenter:function(){jQuery(this).attr('style',st);},mouseleave:function(){jQuery(this).attr('style',st);}});}
G.$E.conConsole=jQuery('<div class="nGY2ConsoleParent"></div>').appendTo(G.$E.base);i18n();ThumbnailDefCaches();switch(G.tn.opt.Get('displayTransition')){case'SCALEDOWN':case'RANDOMSCALE':default:G.$E.base.css('overflow','visible');G.$E.conTnParent.css('overflow','visible');G.$E.conTn.css('overflow','visible');break;}}
function TriggerCustomEvent(eventName){var eN=eventName+'.nanogallery2';var event=null;try{event=new Event(eN);}catch(e){event=document.createEvent('Event');event.initEvent(eN,false,false);}
G.$E.base.trigger(eN,event);}
function SetGlobalEvents(){G.$E.conTnParent.on({mouseenter:GalleryMouseEnter,mouseleave:GalleryMouseLeave},".nGY2GThumbnail");G.GOM.hammertime=new NGHammer(G.$E.conTn[0]);G.GOM.hammertime.on('pan',function(ev){if(!G.VOM.viewerDisplayed){if(G.O.paginationSwipe&&G.layout.support.rows&&G.galleryDisplayMode.Get()=='PAGINATION'){if(Math.abs(ev.deltaY)>G.GOM.panThreshold){G.GOM.panYOnly=true;}
if(!G.GOM.panYOnly){G.$E.conTn.css(G.CSStransformName,'translate('+(ev.deltaX)+'px,0px)');}}}});G.GOM.hammertime.on('panend',function(ev){if(!G.VOM.viewerDisplayed){if(G.O.paginationSwipe&&G.layout.support.rows&&G.galleryDisplayMode.Get()=='PAGINATION'){if(!G.GOM.panYOnly){if(ev.deltaX>50){paginationPreviousPage();return;}
if(ev.deltaX<-50){paginationNextPage();return;}}
G.GOM.panYOnly=false;G.$E.conTn.css(G.CSStransformName,'translate(0px,0px)');}}});G.GOM.hammertime.on('tap',function(ev){if(!G.VOM.viewerDisplayed){ev.srcEvent.stopPropagation();ev.srcEvent.preventDefault();if(ev.pointerType=='mouse'){if(GalleryClicked(ev.srcEvent)=='exit'){return;}}
else{var r=GalleryEventRetrieveElementl(ev.srcEvent,false);if(r.GOMidx==-1){return;}
if(r.action!='NONE'&&r.action!='OPEN'){GalleryClicked(ev.srcEvent);return;}
if(G.GOM.slider.hostIdx==r.GOMidx){ThumbnailHoverOutAll();ThumbnailOpen(G.GOM.items[G.GOM.slider.currentIdx].thumbnailIdx,true);return;}
if((G.GOM.curNavLevel=='l1'&&G.O.touchAnimationL1==false)||(G.GOM.curNavLevel=='lN'&&G.O.touchAnimation==false)){ThumbnailOpen(G.GOM.items[r.GOMidx].thumbnailIdx,true);return;}
if(G.O.touchAutoOpenDelay>0){ThumbnailHoverOutAll();ThumbnailHover(r.GOMidx);window.clearInterval(G.touchAutoOpenDelayTimerID);G.touchAutoOpenDelayTimerID=window.setInterval(function(){window.clearInterval(G.touchAutoOpenDelayTimerID);ThumbnailOpen(G.GOM.items[r.GOMidx].thumbnailIdx,true);},G.O.touchAutoOpenDelay);}
else{if(!G.I[G.GOM.items[r.GOMidx].thumbnailIdx].hovered){ThumbnailHoverOutAll();ThumbnailHover(r.GOMidx);}
else{ThumbnailOpen(G.GOM.items[r.GOMidx].thumbnailIdx,true);}}}}});if(G.O.locationHash){jQuery(window).on('hashchange.nanogallery2.'+G.baseEltID,function(){ProcessLocationHash();});}
jQuery(window).on('resize.nanogallery2.'+G.baseEltID+' orientationChange.nanogallery2.'+G.baseEltID,debounce(ResizeWindowEvent,G.O.eventsDebounceDelay,false));jQuery(window).on('scroll.nanogallery2.'+G.baseEltID,debounce(OnScrollEvent,G.O.eventsDebounceDelay,false));G.VOM.toolsHide=debounce(ViewerToolsHide,G.O.viewerHideToolsDelay,false);jQuery(document).keyup(function(e){if(G.popup.isDisplayed){switch(e.keyCode){case 27:G.popup.close();break;}}
else{if(G.VOM.viewerDisplayed){ViewerToolsUnHide();switch(e.keyCode){case 27:case 40:CloseInternalViewer(G.VOM.currItemIdx);break;case 32:case 13:SlideshowToggle();break;case 38:case 39:case 33:DisplayNextMedia();break;case 37:case 34:DisplayPreviousMedia();break;case 35:case 36:}}}});jQuery(window).bind('mousewheel wheel',function(e){if(G.VOM.viewerDisplayed){var deltaY=0;e.preventDefault();if(ViewerZoomStart()){if(e.originalEvent.deltaY){deltaY=e.originalEvent.deltaY;}else if(e.originalEvent.wheelDelta){deltaY=-e.originalEvent.wheelDelta;}
ViewerZoomIn(deltaY<=0?true:false);}}});jQuery(window).bind('mousemove',function(e){if(G.VOM.viewerDisplayed){debounce(ViewerToolsUnHide,100,false)();}});if(ngscreenfull.enabled){ngscreenfull.onchange(function(){if(G.VOM.viewerDisplayed){if(ngscreenfull.isFullscreen){G.VOM.viewerIsFullscreen=true;G.VOM.$viewer.find('.fullscreenButton').html(G.O.icons.viewerFullscreenOff);}
else{G.VOM.viewerIsFullscreen=false;G.VOM.$viewer.find('.fullscreenButton').html(G.O.icons.viewerFullscreenOn);}}});}}
function ProcessLocationHash(){if(!G.O.locationHash){return false;}
var curGal='#nanogallery/'+G.baseEltID+'/',newLocationHash=location.hash;if(G.O.debugMode){console.log('------------------------ PROCESS LOCATION HASH');console.log('newLocationHash1: '+newLocationHash);console.log('G.locationHashLastUsed: '+G.locationHashLastUsed);}
if(newLocationHash==''){if(G.locationHashLastUsed!==''){if(G.O.debugMode){console.log('display root album');}
G.locationHashLastUsed='';if(G.O.debugMode){console.log('new3 G.locationHashLastUsed: '+G.locationHashLastUsed);}
DisplayAlbum('','0');return true;}}
if(newLocationHash==G.locationHashLastUsed){return;}
if(newLocationHash.indexOf(curGal)==0){var IDs=parseIDs(newLocationHash.substring(curGal.length));if(IDs.imageID!='0'){if(G.O.debugMode){console.log('display image: '+IDs.albumID+'-'+IDs.imageID);}
DisplayPhoto(IDs.imageID,IDs.albumID);return true;}
else{if(G.O.debugMode){console.log('display album: '+IDs.albumID);}
DisplayAlbum('-1',IDs.albumID);return true;}}
return false;}
function SetLocationHash(albumID,imageID){if(!G.O.locationHash){return false;}
if(G.O.debugMode){console.log('------------------------ SET LOCATION HASH');}
if(imageID==''&&(albumID=='-1'||albumID=='0'||G.O.album==albumID)){if(location.hash!=''){if("pushState"in history){history.pushState("",document.title,window.location.pathname+window.location.search);}
else{location.hash='';}}
G.locationHashLastUsed='';if(G.O.debugMode){console.log('new2 G.locationHashLastUsed: '+G.locationHashLastUsed);}
return;}
var newLocationHash='#'+'nanogallery/'+G.baseEltID+'/'+albumID;if(imageID!=''){newLocationHash+='/'+imageID;}
var lH=location.hash;if(G.O.debugMode){console.log('newLocationHash2: '+newLocationHash);console.log('location.hash: '+lH);}
G.locationHashLastUsed=newLocationHash;if(G.O.debugMode){console.log('new G.locationHashLastUsed: '+G.locationHashLastUsed);}
if(lH==''||lH!=newLocationHash){try{top.location.hash=newLocationHash;}
catch(e){G.O.locationHash=false;}}}
function ResizeWindowEvent(){CacheViewport();if(G.VOM.viewerDisplayed){ResizeInternalViewer();}
else{if(G.galleryResizeEventEnabled){var nw=RetrieveCurWidth();if(G.GOM.albumIdx!=-1&&(G.tn.settings.height[G.GOM.curNavLevel][G.GOM.curWidth]!=G.tn.settings.height[G.GOM.curNavLevel][nw]||G.tn.settings.width[G.GOM.curNavLevel][G.GOM.curWidth]!=G.tn.settings.width[G.GOM.curNavLevel][nw])){G.GOM.curWidth=nw;G.GOM.pagination.currentPage=0;GalleryRender(G.GOM.albumIdx);}
else{GalleryResize();}}}}
function OnScrollEvent_OLD(){if(!G.VOM.viewerDisplayed){if(G.galleryResizeEventEnabled){GalleryResize();}
return;}}
function OnScrollEvent(){if(!G.VOM.viewerDisplayed){GalleryResizeOnScrollEvent();}}
function GalleryResizeOnScrollEvent(){if(G.galleryResizeEventEnabled==false){window.setTimeout(GalleryResizeOnScrollEvent,10);}else{GalleryResize();}}
function i18n(){G.i18nLang=(navigator.language||navigator.userLanguage).toUpperCase();if(G.i18nLang==='UNDEFINED'){G.i18nLang='';}
var llang=-('_'+G.i18nLang).length;if(toType(G.O.i18n)=='object'){for(var key in G.O.i18n){var s=key.substr(llang);if(s==('_'+G.i18nLang)){G.i18nTranslations[key.substr(0,key.length-s.length)]=G.O.i18n[key];}
else{G.i18nTranslations[key]=G.O.i18n[key];}}}}
function GetI18nItem(item,property){var s='';if(G.i18nLang!=''){if(item[property+'_'+G.i18nLang]!==undefined&&item[property+'_'+G.i18nLang].length>0){s=item[property+'_'+G.i18nLang];return s;}}
s=item[property];return s;}
function RetrieveCurWidth(){var vpW=G.GOM.cache.viewport.w;if(G.O.breakpointSizeSM>0&&vpW<G.O.breakpointSizeSM){return'xs';}
if(G.O.breakpointSizeME>0&&vpW<G.O.breakpointSizeME){return'sm';}
if(G.O.breakpointSizeLA>0&&vpW<G.O.breakpointSizeLA){return'me';}
if(G.O.breakpointSizeXL>0&&vpW<G.O.breakpointSizeXL){return'la';}
return'xl';}
function browserNotification(){var m='Your browser version is not supported anymore. The image gallery cannot be displayed. <br><br>Please update to a more recent one. Download:<br>';m+='&nbsp;&nbsp;&nbsp; <a href="http://www.google.com/chrome/?hl=en-US)">Chrome</a><br>';m+='&nbsp;&nbsp;&nbsp; <a href="http://www.mozilla.com/firefox/)">Firefox</a><br>';m+='&nbsp;&nbsp;&nbsp; <a href="http://www.microsoft.com/windows/internet-explorer/default.aspx">Internet Explorer</a><br>';m+='&nbsp;&nbsp;&nbsp; <a href="http://www.apple.com/safari/download/">Safari</a>';NanoAlert(G,m,false);}
function FirstSupportedPropertyName(prefixedPropertyNames){var tempDiv=document.createElement("div");for(var i=0;i<prefixedPropertyNames.length;++i){if(typeof tempDiv.style[prefixedPropertyNames[i]]!='undefined')
return prefixedPropertyNames[i];}
return null;}}
(function(global,factory){global.ngEvEmitter=factory();}(typeof window!='undefined'?window:this,function(){function ngEvEmitter(){}
var proto=ngEvEmitter.prototype;proto.on=function(eventName,listener){if(!eventName||!listener){return;}
var events=this._events=this._events||{};var listeners=events[eventName]=events[eventName]||[];if(listeners.indexOf(listener)==-1){listeners.push(listener);}
return this;};proto.once=function(eventName,listener){if(!eventName||!listener){return;}
this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};var onceListeners=onceEvents[eventName]=onceEvents[eventName]||{};onceListeners[listener]=true;return this;};proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
var index=listeners.indexOf(listener);if(index!=-1){listeners.splice(index,1);}
return this;};proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
var i=0;var listener=listeners[i];args=args||[];var onceListeners=this._onceEvents&&this._onceEvents[eventName];while(listener){var isOnce=onceListeners&&onceListeners[listener];if(isOnce){this.off(eventName,listener);delete onceListeners[listener];}
listener.apply(this,args);i+=isOnce?0:1;listener=listeners[i];}
return this;};return ngEvEmitter;}));(function(window,factory){'use strict';window.ngimagesLoaded=factory(window,window.ngEvEmitter);})(window,function factory(window,ngEvEmitter){var $=jQuery;var console=window.console;function extend(a,b){for(var prop in b){a[prop]=b[prop];}
return a;}
function makeArray(obj){var ary=[];if(Array.isArray(obj)){ary=obj;}else if(typeof obj.length=='number'){for(var i=0;i<obj.length;i++){ary.push(obj[i]);}}else{ary.push(obj);}
return ary;}
function ngImagesLoaded(elem,options,onAlways){if(!(this instanceof ngImagesLoaded)){return new ngImagesLoaded(elem,options,onAlways);}
if(typeof elem=='string'){elem=document.querySelectorAll(elem);}
this.elements=makeArray(elem);this.options=extend({},this.options);if(typeof options=='function'){onAlways=options;}else{extend(this.options,options);}
if(onAlways){this.on('always',onAlways);}
this.getImages();if($){this.jqDeferred=new $.Deferred();}
setTimeout(function(){this.check();}.bind(this));}
ngImagesLoaded.prototype=Object.create(ngEvEmitter.prototype);ngImagesLoaded.prototype.options={};ngImagesLoaded.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this);};ngImagesLoaded.prototype.addElementImages=function(elem){if(elem.nodeName=='IMG'){this.addImage(elem);}
if(this.options.background===true){this.addElementBackgroundImages(elem);}
var nodeType=elem.nodeType;if(!nodeType||!elementNodeTypes[nodeType]){return;}
var childImgs=elem.querySelectorAll('img');for(var i=0;i<childImgs.length;i++){var img=childImgs[i];this.addImage(img);}
if(typeof this.options.background=='string'){var children=elem.querySelectorAll(this.options.background);for(i=0;i<children.length;i++){var child=children[i];this.addElementBackgroundImages(child);}}};var elementNodeTypes={1:true,9:true,11:true};ngImagesLoaded.prototype.addElementBackgroundImages=function(elem){var style=getComputedStyle(elem);if(!style){return;}
var reURL=/url\((['"])?(.*?)\1\)/gi;var matches=reURL.exec(style.backgroundImage);while(matches!==null){var url=matches&&matches[2];if(url){this.addBackground(url,elem);}
matches=reURL.exec(style.backgroundImage);}};ngImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage);};ngImagesLoaded.prototype.addBackground=function(url,elem){var background=new Background(url,elem);this.images.push(background);};ngImagesLoaded.prototype.check=function(){var _this=this;this.progressedCount=0;this.hasAnyBroken=false;if(!this.images.length){this.complete();return;}
function onProgress(image,elem,message){setTimeout(function(){_this.progress(image,elem,message);});}
this.images.forEach(function(loadingImage){loadingImage.once('progress',onProgress);loadingImage.check();});};ngImagesLoaded.prototype.progress=function(image,elem,message){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;this.emitEvent('progress',[this,image,elem]);if(this.jqDeferred&&this.jqDeferred.notify){this.jqDeferred.notify(this,image);}
if(this.progressedCount==this.images.length){this.complete();}
if(this.options.debug&&console){console.log('progress: '+message,image,elem);}};ngImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=true;this.emitEvent(eventName,[this]);this.emitEvent('always',[this]);if(this.jqDeferred){var jqMethod=this.hasAnyBroken?'reject':'resolve';this.jqDeferred[jqMethod](this);}};function LoadingImage(img){this.img=img;}
LoadingImage.prototype=Object.create(ngEvEmitter.prototype);LoadingImage.prototype.check=function(){var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return;}
this.proxyImage=new Image();this.proxyImage.addEventListener('load',this);this.proxyImage.addEventListener('error',this);this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.proxyImage.src=this.img.src;};LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth!==undefined;};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.img,message]);};LoadingImage.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};LoadingImage.prototype.onload=function(){this.confirm(true,'onload');this.unbindEvents();};LoadingImage.prototype.onerror=function(){this.confirm(false,'onerror');this.unbindEvents();};LoadingImage.prototype.unbindEvents=function(){this.proxyImage.removeEventListener('load',this);this.proxyImage.removeEventListener('error',this);this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);};function Background(url,element){this.url=url;this.element=element;this.img=new Image();}
Background.prototype=Object.create(LoadingImage.prototype);Background.prototype.check=function(){this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.img.src=this.url;var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');this.unbindEvents();}};Background.prototype.unbindEvents=function(){this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);};Background.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.element,message]);};ngImagesLoaded.makeJQueryPlugin=function(jQuery){jQuery=jQuery||window.jQuery;if(!jQuery){return;}
$=jQuery;$.fn.ngimagesLoaded=function(options,callback){var instance=new ngImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this));};};ngImagesLoaded.makeJQueryPlugin();return ngImagesLoaded;});(function(){'use strict';var document=typeof window!=='undefined'&&typeof window.document!=='undefined'?window.document:{};var isCommonjs=typeof module!=='undefined'&&module.exports;var keyboardAllowed=typeof Element!=='undefined'&&'ALLOW_KEYBOARD_INPUT'in Element;var fn=(function(){var val;var fnMap=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror'],['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror'],['webkitRequestFullScreen','webkitCancelFullScreen','webkitCurrentFullScreenElement','webkitCancelFullScreen','webkitfullscreenchange','webkitfullscreenerror'],['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror'],['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError']];var i=0;var l=fnMap.length;var ret={};for(;i<l;i++){val=fnMap[i];if(val&&val[1]in document){for(i=0;i<val.length;i++){ret[fnMap[0][i]]=val[i];}
return ret;}}
return false;})();var eventNameMap={change:fn.fullscreenchange,error:fn.fullscreenerror};var ngscreenfull={request:function(elem){return new Promise(function(resolve){var request=fn.requestFullscreen;var onFullScreenEntered=function(){this.off('change',onFullScreenEntered);resolve();}.bind(this);elem=elem||document.documentElement;if(/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)){elem[request]();}else{elem[request](keyboardAllowed?Element.ALLOW_KEYBOARD_INPUT:{});}
this.on('change',onFullScreenEntered);}.bind(this));},exit:function(){return new Promise(function(resolve){if(!this.isFullscreen){resolve();return;}
var onFullScreenExit=function(){this.off('change',onFullScreenExit);resolve();}.bind(this);document[fn.exitFullscreen]();this.on('change',onFullScreenExit);}.bind(this));},toggle:function(elem){return this.isFullscreen?this.exit():this.request(elem);},onchange:function(callback){this.on('change',callback);},onerror:function(callback){this.on('error',callback);},on:function(event,callback){var eventName=eventNameMap[event];if(eventName){document.addEventListener(eventName,callback,false);}},off:function(event,callback){var eventName=eventNameMap[event];if(eventName){document.removeEventListener(eventName,callback,false);}},raw:fn};if(!fn){if(isCommonjs){module.exports=false;}else{window.ngscreenfull=false;}
return;}
Object.defineProperties(ngscreenfull,{isFullscreen:{get:function(){return Boolean(document[fn.fullscreenElement]);}},element:{enumerable:true,get:function(){return document[fn.fullscreenElement];}},enabled:{enumerable:true,get:function(){return Boolean(document[fn.fullscreenEnabled]);}}});if(isCommonjs){module.exports=ngscreenfull;}else{window.ngscreenfull=ngscreenfull;}})();;(function(){var root=this||Function('return this')();var NGTweenable=(function(){'use strict';var formula;var DEFAULT_SCHEDULE_FUNCTION;var DEFAULT_EASING='linear';var DEFAULT_DURATION=500;var UPDATE_TIME=1000/60;var _now=Date.now?Date.now:function(){return+new Date();};var now=typeof SHIFTY_DEBUG_NOW!=='undefined'?SHIFTY_DEBUG_NOW:_now;if(typeof window!=='undefined'){DEFAULT_SCHEDULE_FUNCTION=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout;}else{DEFAULT_SCHEDULE_FUNCTION=setTimeout;}
function noop(){}
function each(obj,fn){var key;for(key in obj){if(Object.hasOwnProperty.call(obj,key)){fn(key);}}}
function shallowCopy(targetObj,srcObj){each(srcObj,function(prop){targetObj[prop]=srcObj[prop];});return targetObj;}
function defaults(target,src){each(src,function(prop){if(typeof target[prop]==='undefined'){target[prop]=src[prop];}});}
function tweenProps(forPosition,currentState,originalState,targetState,duration,timestamp,easing){var normalizedPosition=forPosition<timestamp?0:(forPosition-timestamp)/duration;var prop;var easingObjectProp;var easingFn;for(prop in currentState){if(currentState.hasOwnProperty(prop)){easingObjectProp=easing[prop];easingFn=typeof easingObjectProp==='function'?easingObjectProp:formula[easingObjectProp];currentState[prop]=tweenProp(originalState[prop],targetState[prop],easingFn,normalizedPosition);}}
return currentState;}
function tweenProp(start,end,easingFunc,position){return start+(end-start)*easingFunc(position);}
function applyFilter(tweenable,filterName){var filters=NGTweenable.prototype.filter;var args=tweenable._filterArgs;each(filters,function(name){if(typeof filters[name][filterName]!=='undefined'){filters[name][filterName].apply(tweenable,args);}});}
var timeoutHandler_endTime;var timeoutHandler_currentTime;var timeoutHandler_isEnded;var timeoutHandler_offset;function timeoutHandler(tweenable,timestamp,delay,duration,currentState,originalState,targetState,easing,step,schedule,opt_currentTimeOverride){timeoutHandler_endTime=timestamp+delay+duration;timeoutHandler_currentTime=Math.min(opt_currentTimeOverride||now(),timeoutHandler_endTime);timeoutHandler_isEnded=timeoutHandler_currentTime>=timeoutHandler_endTime;timeoutHandler_offset=duration-(timeoutHandler_endTime-timeoutHandler_currentTime);if(tweenable.isPlaying()){if(timeoutHandler_isEnded){step(targetState,tweenable._attachment,timeoutHandler_offset);tweenable.stop(true);}else{tweenable._scheduleId=schedule(tweenable._timeoutHandler,UPDATE_TIME);applyFilter(tweenable,'beforeTween');if(timeoutHandler_currentTime<(timestamp+delay)){tweenProps(1,currentState,originalState,targetState,1,1,easing);}else{tweenProps(timeoutHandler_currentTime,currentState,originalState,targetState,duration,timestamp+delay,easing);}
applyFilter(tweenable,'afterTween');step(currentState,tweenable._attachment,timeoutHandler_offset);}}}
function composeEasingObject(fromTweenParams,easing){var composedEasing={};var typeofEasing=typeof easing;if(typeofEasing==='string'||typeofEasing==='function'){each(fromTweenParams,function(prop){composedEasing[prop]=easing;});}else{each(fromTweenParams,function(prop){if(!composedEasing[prop]){composedEasing[prop]=easing[prop]||DEFAULT_EASING;}});}
return composedEasing;}
function NGTweenable(opt_initialState,opt_config){this._currentState=opt_initialState||{};this._configured=false;this._scheduleFunction=DEFAULT_SCHEDULE_FUNCTION;if(typeof opt_config!=='undefined'){this.setConfig(opt_config);}}
NGTweenable.prototype.tween=function(opt_config){if(this._isTweening){return this;}
if(opt_config!==undefined||!this._configured){this.setConfig(opt_config);}
this._timestamp=now();this._start(this.get(),this._attachment);return this.resume();};NGTweenable.prototype.setConfig=function(config){config=config||{};this._configured=true;this._attachment=config.attachment;this._pausedAtTime=null;this._scheduleId=null;this._delay=config.delay||0;this._start=config.start||noop;this._step=config.step||noop;this._finish=config.finish||noop;this._duration=config.duration||DEFAULT_DURATION;this._currentState=shallowCopy({},config.from||this.get());this._originalState=this.get();this._targetState=shallowCopy({},config.to||this.get());var self=this;this._timeoutHandler=function(){timeoutHandler(self,self._timestamp,self._delay,self._duration,self._currentState,self._originalState,self._targetState,self._easing,self._step,self._scheduleFunction);};var currentState=this._currentState;var targetState=this._targetState;defaults(targetState,currentState);this._easing=composeEasingObject(currentState,config.easing||DEFAULT_EASING);this._filterArgs=[currentState,this._originalState,targetState,this._easing];applyFilter(this,'tweenCreated');return this;};NGTweenable.prototype.get=function(){return shallowCopy({},this._currentState);};NGTweenable.prototype.set=function(state){this._currentState=state;};NGTweenable.prototype.pause=function(){this._pausedAtTime=now();this._isPaused=true;return this;};NGTweenable.prototype.resume=function(){if(this._isPaused){this._timestamp+=now()-this._pausedAtTime;}
this._isPaused=false;this._isTweening=true;this._timeoutHandler();return this;};NGTweenable.prototype.seek=function(millisecond){millisecond=Math.max(millisecond,0);var currentTime=now();if((this._timestamp+millisecond)===0){return this;}
this._timestamp=currentTime-millisecond;if(!this.isPlaying()){this._isTweening=true;this._isPaused=false;timeoutHandler(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,currentTime);this.pause();}
return this;};NGTweenable.prototype.stop=function(gotoEnd){this._isTweening=false;this._isPaused=false;this._timeoutHandler=noop;(root.cancelAnimationFrame||root.webkitCancelAnimationFrame||root.oCancelAnimationFrame||root.msCancelAnimationFrame||root.mozCancelRequestAnimationFrame||root.clearTimeout)(this._scheduleId);if(gotoEnd){applyFilter(this,'beforeTween');tweenProps(1,this._currentState,this._originalState,this._targetState,1,0,this._easing);applyFilter(this,'afterTween');applyFilter(this,'afterTweenEnd');this._finish.call(this,this._currentState,this._attachment);}
return this;};NGTweenable.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused;};NGTweenable.prototype.setScheduleFunction=function(scheduleFunction){this._scheduleFunction=scheduleFunction;};NGTweenable.prototype.dispose=function(){var prop;for(prop in this){if(this.hasOwnProperty(prop)){delete this[prop];}}};NGTweenable.prototype.filter={};NGTweenable.prototype.formula={linear:function(pos){return pos;}};formula=NGTweenable.prototype.formula;shallowCopy(NGTweenable,{'now':now,'each':each,'tweenProps':tweenProps,'tweenProp':tweenProp,'applyFilter':applyFilter,'shallowCopy':shallowCopy,'defaults':defaults,'composeEasingObject':composeEasingObject});if(typeof SHIFTY_DEBUG_NOW==='function'){root.timeoutHandler=timeoutHandler;}
if(typeof exports==='object'){module.exports=NGTweenable;}else if(typeof define==='function'&&define.amdDISABLED){define(function(){return NGTweenable;});}else if(typeof root.NGTweenable==='undefined'){root.NGTweenable=NGTweenable;}
return NGTweenable;}());;(function(){NGTweenable.shallowCopy(NGTweenable.prototype.formula,{easeInQuad:function(pos){return Math.pow(pos,2);},easeOutQuad:function(pos){return-(Math.pow((pos-1),2)-1);},easeInOutQuad:function(pos){if((pos/=0.5)<1){return 0.5*Math.pow(pos,2);}
return-0.5*((pos-=2)*pos-2);},easeInCubic:function(pos){return Math.pow(pos,3);},easeOutCubic:function(pos){return(Math.pow((pos-1),3)+1);},easeInOutCubic:function(pos){if((pos/=0.5)<1){return 0.5*Math.pow(pos,3);}
return 0.5*(Math.pow((pos-2),3)+2);},easeInQuart:function(pos){return Math.pow(pos,4);},easeOutQuart:function(pos){return-(Math.pow((pos-1),4)-1);},easeInOutQuart:function(pos){if((pos/=0.5)<1){return 0.5*Math.pow(pos,4);}
return-0.5*((pos-=2)*Math.pow(pos,3)-2);},easeInQuint:function(pos){return Math.pow(pos,5);},easeOutQuint:function(pos){return(Math.pow((pos-1),5)+1);},easeInOutQuint:function(pos){if((pos/=0.5)<1){return 0.5*Math.pow(pos,5);}
return 0.5*(Math.pow((pos-2),5)+2);},easeInSine:function(pos){return-Math.cos(pos*(Math.PI/2))+1;},easeOutSine:function(pos){return Math.sin(pos*(Math.PI/2));},easeInOutSine:function(pos){return(-0.5*(Math.cos(Math.PI*pos)-1));},easeInExpo:function(pos){return(pos===0)?0:Math.pow(2,10*(pos-1));},easeOutExpo:function(pos){return(pos===1)?1:-Math.pow(2,-10*pos)+1;},easeInOutExpo:function(pos){if(pos===0){return 0;}
if(pos===1){return 1;}
if((pos/=0.5)<1){return 0.5*Math.pow(2,10*(pos-1));}
return 0.5*(-Math.pow(2,-10*--pos)+2);},easeInCirc:function(pos){return-(Math.sqrt(1-(pos*pos))-1);},easeOutCirc:function(pos){return Math.sqrt(1-Math.pow((pos-1),2));},easeInOutCirc:function(pos){if((pos/=0.5)<1){return-0.5*(Math.sqrt(1-pos*pos)-1);}
return 0.5*(Math.sqrt(1-(pos-=2)*pos)+1);},easeOutBounce:function(pos){if((pos)<(1/2.75)){return(7.5625*pos*pos);}else if(pos<(2/2.75)){return(7.5625*(pos-=(1.5/2.75))*pos+0.75);}else if(pos<(2.5/2.75)){return(7.5625*(pos-=(2.25/2.75))*pos+0.9375);}else{return(7.5625*(pos-=(2.625/2.75))*pos+0.984375);}},easeInBack:function(pos){var s=1.70158;return(pos)*pos*((s+1)*pos-s);},easeOutBack:function(pos){var s=1.70158;return(pos=pos-1)*pos*((s+1)*pos+s)+1;},easeInOutBack:function(pos){var s=1.70158;if((pos/=0.5)<1){return 0.5*(pos*pos*(((s*=(1.525))+1)*pos-s));}
return 0.5*((pos-=2)*pos*(((s*=(1.525))+1)*pos+s)+2);},elastic:function(pos){return-1*Math.pow(4,-8*pos)*Math.sin((pos*6-1)*(2*Math.PI)/2)+1;},swingFromTo:function(pos){var s=1.70158;return((pos/=0.5)<1)?0.5*(pos*pos*(((s*=(1.525))+1)*pos-s)):0.5*((pos-=2)*pos*(((s*=(1.525))+1)*pos+s)+2);},swingFrom:function(pos){var s=1.70158;return pos*pos*((s+1)*pos-s);},swingTo:function(pos){var s=1.70158;return(pos-=1)*pos*((s+1)*pos+s)+1;},bounce:function(pos){if(pos<(1/2.75)){return(7.5625*pos*pos);}else if(pos<(2/2.75)){return(7.5625*(pos-=(1.5/2.75))*pos+0.75);}else if(pos<(2.5/2.75)){return(7.5625*(pos-=(2.25/2.75))*pos+0.9375);}else{return(7.5625*(pos-=(2.625/2.75))*pos+0.984375);}},bouncePast:function(pos){if(pos<(1/2.75)){return(7.5625*pos*pos);}else if(pos<(2/2.75)){return 2-(7.5625*(pos-=(1.5/2.75))*pos+0.75);}else if(pos<(2.5/2.75)){return 2-(7.5625*(pos-=(2.25/2.75))*pos+0.9375);}else{return 2-(7.5625*(pos-=(2.625/2.75))*pos+0.984375);}},easeFromTo:function(pos){if((pos/=0.5)<1){return 0.5*Math.pow(pos,4);}
return-0.5*((pos-=2)*Math.pow(pos,3)-2);},easeFrom:function(pos){return Math.pow(pos,4);},easeTo:function(pos){return Math.pow(pos,0.25);}});}());;(function(){function cubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var ax=0,bx=0,cx=0,ay=0,by=0,cy=0;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t;}
function sampleCurveY(t){return((ay*t+by)*t+cy)*t;}
function sampleCurveDerivativeX(t){return(3.0*ax*t+2.0*bx)*t+cx;}
function solveEpsilon(duration){return 1.0/(200.0*duration);}
function solve(x,epsilon){return sampleCurveY(solveCurveX(x,epsilon));}
function fabs(n){if(n>=0){return n;}else{return 0-n;}}
function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(fabs(x2)<epsilon){return t2;}
d2=sampleCurveDerivativeX(t2);if(fabs(d2)<1e-6){break;}
t2=t2-x2/d2;}
t0=0.0;t1=1.0;t2=x;if(t2<t0){return t0;}
if(t2>t1){return t1;}
while(t0<t1){x2=sampleCurveX(t2);if(fabs(x2-x)<epsilon){return t2;}
if(x>x2){t0=t2;}else{t1=t2;}
t2=(t1-t0)*0.5+t0;}
return t2;}
cx=3.0*p1x;bx=3.0*(p2x-p1x)-cx;ax=1.0-cx-bx;cy=3.0*p1y;by=3.0*(p2y-p1y)-cy;ay=1.0-cy-by;return solve(t,solveEpsilon(duration));}
function getCubicBezierTransition(x1,y1,x2,y2){return function(pos){return cubicBezierAtTime(pos,x1,y1,x2,y2,1);};}
NGTweenable.setBezierFunction=function(name,x1,y1,x2,y2){var cubicBezierTransition=getCubicBezierTransition(x1,y1,x2,y2);cubicBezierTransition.displayName=name;cubicBezierTransition.x1=x1;cubicBezierTransition.y1=y1;cubicBezierTransition.x2=x2;cubicBezierTransition.y2=y2;return NGTweenable.prototype.formula[name]=cubicBezierTransition;};NGTweenable.unsetBezierFunction=function(name){delete NGTweenable.prototype.formula[name];};})();;(function(){function getInterpolatedValues(from,current,targetState,position,easing,delay){return NGTweenable.tweenProps(position,current,from,targetState,1,delay,easing);}
var mockNGTweenable=new NGTweenable();mockNGTweenable._filterArgs=[];NGTweenable.interpolate=function(from,targetState,position,easing,opt_delay){var current=NGTweenable.shallowCopy({},from);var delay=opt_delay||0;var easingObject=NGTweenable.composeEasingObject(from,easing||'linear');mockNGTweenable.set({});var filterArgs=mockNGTweenable._filterArgs;filterArgs.length=0;filterArgs[0]=current;filterArgs[1]=from;filterArgs[2]=targetState;filterArgs[3]=easingObject;NGTweenable.applyFilter(mockNGTweenable,'tweenCreated');NGTweenable.applyFilter(mockNGTweenable,'beforeTween');var interpolatedValues=getInterpolatedValues(from,current,targetState,position,easingObject,delay);NGTweenable.applyFilter(mockNGTweenable,'afterTween');return interpolatedValues;};}());;(function(NGTweenable){var formatManifest;var R_NUMBER_COMPONENT=/(\d|\-|\.)/;var R_FORMAT_CHUNKS=/([^\-0-9\.]+)/g;var R_UNFORMATTED_VALUES=/[0-9.\-]+/g;var R_RGB=new RegExp('rgb\\('+R_UNFORMATTED_VALUES.source+(/,\s*/.source)+R_UNFORMATTED_VALUES.source+(/,\s*/.source)+R_UNFORMATTED_VALUES.source+'\\)','g');var R_RGB_PREFIX=/^.*\(/;var R_HEX=/#([0-9]|[a-f]){3,6}/gi;var VALUE_PLACEHOLDER='VAL';function getFormatChunksFrom(rawValues,prefix){var accumulator=[];var rawValuesLength=rawValues.length;var i;for(i=0;i<rawValuesLength;i++){accumulator.push('_'+prefix+'_'+i);}
return accumulator;}
function getFormatStringFrom(formattedString){var chunks=formattedString.match(R_FORMAT_CHUNKS);if(!chunks){chunks=['',''];}else if(chunks.length===1||formattedString.charAt(0).match(R_NUMBER_COMPONENT)){chunks.unshift('');}
return chunks.join(VALUE_PLACEHOLDER);}
function sanitizeObjectForHexProps(stateObject){NGTweenable.each(stateObject,function(prop){var currentProp=stateObject[prop];if(typeof currentProp==='string'&&currentProp.match(R_HEX)){stateObject[prop]=sanitizeHexChunksToRGB(currentProp);}});}
function sanitizeHexChunksToRGB(str){return filterStringChunks(R_HEX,str,convertHexToRGB);}
function convertHexToRGB(hexString){var rgbArr=hexToRGBArray(hexString);return'rgb('+rgbArr[0]+','+rgbArr[1]+','+rgbArr[2]+')';}
var hexToRGBArray_returnArray=[];function hexToRGBArray(hex){hex=hex.replace(/#/,'');if(hex.length===3){hex=hex.split('');hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];}
hexToRGBArray_returnArray[0]=hexToDec(hex.substr(0,2));hexToRGBArray_returnArray[1]=hexToDec(hex.substr(2,2));hexToRGBArray_returnArray[2]=hexToDec(hex.substr(4,2));return hexToRGBArray_returnArray;}
function hexToDec(hex){return parseInt(hex,16);}
function filterStringChunks(pattern,unfilteredString,filter){var pattenMatches=unfilteredString.match(pattern);var filteredString=unfilteredString.replace(pattern,VALUE_PLACEHOLDER);if(pattenMatches){var pattenMatchesLength=pattenMatches.length;var currentChunk;for(var i=0;i<pattenMatchesLength;i++){currentChunk=pattenMatches.shift();filteredString=filteredString.replace(VALUE_PLACEHOLDER,filter(currentChunk));}}
return filteredString;}
function sanitizeRGBChunks(formattedString){return filterStringChunks(R_RGB,formattedString,sanitizeRGBChunk);}
function sanitizeRGBChunk(rgbChunk){var numbers=rgbChunk.match(R_UNFORMATTED_VALUES);var numbersLength=numbers.length;var sanitizedString=rgbChunk.match(R_RGB_PREFIX)[0];for(var i=0;i<numbersLength;i++){sanitizedString+=parseInt(numbers[i],10)+',';}
sanitizedString=sanitizedString.slice(0,-1)+')';return sanitizedString;}
function getFormatManifests(stateObject){var manifestAccumulator={};NGTweenable.each(stateObject,function(prop){var currentProp=stateObject[prop];if(typeof currentProp==='string'){var rawValues=getValuesFrom(currentProp);manifestAccumulator[prop]={'formatString':getFormatStringFrom(currentProp),'chunkNames':getFormatChunksFrom(rawValues,prop)};}});return manifestAccumulator;}
function expandFormattedProperties(stateObject,formatManifests){NGTweenable.each(formatManifests,function(prop){var currentProp=stateObject[prop];var rawValues=getValuesFrom(currentProp);var rawValuesLength=rawValues.length;for(var i=0;i<rawValuesLength;i++){stateObject[formatManifests[prop].chunkNames[i]]=+rawValues[i];}
delete stateObject[prop];});}
function collapseFormattedProperties(stateObject,formatManifests){NGTweenable.each(formatManifests,function(prop){var currentProp=stateObject[prop];var formatChunks=extractPropertyChunks(stateObject,formatManifests[prop].chunkNames);var valuesList=getValuesList(formatChunks,formatManifests[prop].chunkNames);currentProp=getFormattedValues(formatManifests[prop].formatString,valuesList);stateObject[prop]=sanitizeRGBChunks(currentProp);});}
function extractPropertyChunks(stateObject,chunkNames){var extractedValues={};var currentChunkName,chunkNamesLength=chunkNames.length;for(var i=0;i<chunkNamesLength;i++){currentChunkName=chunkNames[i];extractedValues[currentChunkName]=stateObject[currentChunkName];delete stateObject[currentChunkName];}
return extractedValues;}
var getValuesList_accumulator=[];function getValuesList(stateObject,chunkNames){getValuesList_accumulator.length=0;var chunkNamesLength=chunkNames.length;for(var i=0;i<chunkNamesLength;i++){getValuesList_accumulator.push(stateObject[chunkNames[i]]);}
return getValuesList_accumulator;}
function getFormattedValues(formatString,rawValues){var formattedValueString=formatString;var rawValuesLength=rawValues.length;for(var i=0;i<rawValuesLength;i++){formattedValueString=formattedValueString.replace(VALUE_PLACEHOLDER,+rawValues[i].toFixed(4));}
return formattedValueString;}
function getValuesFrom(formattedString){return formattedString.match(R_UNFORMATTED_VALUES);}
function expandEasingObject(easingObject,tokenData){NGTweenable.each(tokenData,function(prop){var currentProp=tokenData[prop];var chunkNames=currentProp.chunkNames;var chunkLength=chunkNames.length;var easing=easingObject[prop];var i;if(typeof easing==='string'){var easingChunks=easing.split(' ');var lastEasingChunk=easingChunks[easingChunks.length-1];for(i=0;i<chunkLength;i++){easingObject[chunkNames[i]]=easingChunks[i]||lastEasingChunk;}}else{for(i=0;i<chunkLength;i++){easingObject[chunkNames[i]]=easing;}}
delete easingObject[prop];});}
function collapseEasingObject(easingObject,tokenData){NGTweenable.each(tokenData,function(prop){var currentProp=tokenData[prop];var chunkNames=currentProp.chunkNames;var chunkLength=chunkNames.length;var firstEasing=easingObject[chunkNames[0]];var typeofEasings=typeof firstEasing;if(typeofEasings==='string'){var composedEasingString='';for(var i=0;i<chunkLength;i++){composedEasingString+=' '+easingObject[chunkNames[i]];delete easingObject[chunkNames[i]];}
easingObject[prop]=composedEasingString.substr(1);}else{easingObject[prop]=firstEasing;}});}
NGTweenable.prototype.filter.token={'tweenCreated':function(currentState,fromState,toState,easingObject){sanitizeObjectForHexProps(currentState);sanitizeObjectForHexProps(fromState);sanitizeObjectForHexProps(toState);this._tokenData=getFormatManifests(currentState);},'beforeTween':function(currentState,fromState,toState,easingObject){expandEasingObject(easingObject,this._tokenData);expandFormattedProperties(currentState,this._tokenData);expandFormattedProperties(fromState,this._tokenData);expandFormattedProperties(toState,this._tokenData);},'afterTween':function(currentState,fromState,toState,easingObject){collapseFormattedProperties(currentState,this._tokenData);collapseFormattedProperties(fromState,this._tokenData);collapseFormattedProperties(toState,this._tokenData);collapseEasingObject(easingObject,this._tokenData);}};}(NGTweenable));}).call(null);(function(window,document,exportName,undefined){'use strict';var VENDOR_PREFIXES=['','webkit','Moz','MS','ms','o'];var TEST_ELEMENT=document.createElement('div');var TYPE_FUNCTION='function';var round=Math.round;var abs=Math.abs;var now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout);}
function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true;}
return false;}
function each(obj,iterator,context){var i;if(!obj){return;}
if(obj.forEach){obj.forEach(iterator,context);}else if(obj.length!==undefined){i=0;while(i<obj.length){iterator.call(context,obj[i],i,obj);i++;}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj);}}}
function deprecate(method,name,message){var deprecationMessage='DEPRECATED METHOD: '+name+'\n'+message+' AT \n';return function(){var e=new Error('get-stack-trace');var stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,'').replace(/^\s+at\s+/gm,'').replace(/^Object.<anonymous>\s*\(/gm,'{anonymous}()@'):'Unknown Stack Trace';var log=window.console&&(window.console.warn||window.console.log);if(log){log.call(window.console,deprecationMessage,stack);}
return method.apply(this,arguments);};}
var assign;if(typeof Object.assign!=='function'){assign=function assign(target){if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}
var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey];}}}}
return output;};}else{assign=Object.assign;}
var extend=deprecate(function extend(dest,src,merge){var keys=Object.keys(src);var i=0;while(i<keys.length){if(!merge||(merge&&dest[keys[i]]===undefined)){dest[keys[i]]=src[keys[i]];}
i++;}
return dest;},'extend','Use `assign`.');var merge=deprecate(function merge(dest,src){return extend(dest,src,true);},'merge','Use `assign`.');function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){assign(childP,properties);}}
function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments);};}
function boolOrFn(val,args){if(typeof val==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args);}
return val;}
function ifUndefined(val1,val2){return(val1===undefined)?val2:val1;}
function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,false);});}
function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,false);});}
function hasParent(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;}
function inStr(str,find){return str.indexOf(find)>-1;}
function splitStr(str){return str.trim().split(/\s+/g);}
function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find);}else{var i=0;while(i<src.length){if((findByKey&&src[i][findByKey]==find)||(!findByKey&&src[i]===find)){return i;}
i++;}
return-1;}}
function toArray(obj){return Array.prototype.slice.call(obj,0);}
function uniqueArray(src,key,sort){var results=[];var values=[];var i=0;while(i<src.length){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i]);}
values[i]=val;i++;}
if(sort){if(!key){results=results.sort();}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key];});}}
return results;}
function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);var i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i];prop=(prefix)?prefix+camelProp:property;if(prop in obj){return prop;}
i++;}
return undefined;}
var _uniqueId=1;function uniqueId(){return _uniqueId++;}
function getWindowForElement(element){var doc=element.ownerDocument||element;return(doc.defaultView||doc.parentWindow||window);}
var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH=('ontouchstart'in window);var SUPPORT_POINTER_EVENTS=false;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH='touch';var INPUT_TYPE_PEN='pen';var INPUT_TYPE_MOUSE='mouse';var INPUT_TYPE_KINECT='kinect';var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=['x','y'];var PROPS_CLIENT_XY=['clientX','clientY'];function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;this.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev);}};this.init();}
Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);}};function createInputInstance(manager){var Type;var inputClass=manager.options.inputClass;if(inputClass){Type=inputClass;}else if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput;}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput;}else if(!SUPPORT_TOUCH){Type=MouseInput;}else{Type=TouchMouseInput;}
return new(Type)(manager,inputHandler);}
function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=(eventType&INPUT_START&&(pointersLen-changedPointersLen===0));var isFinal=(eventType&(INPUT_END|INPUT_CANCEL)&&(pointersLen-changedPointersLen===0));input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={};}
input.eventType=eventType;computeInputData(manager,input);manager.emit('hammer.input',input);manager.recognize(input);manager.session.prevInput=input;}
function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;if(!session.firstInput){session.firstInput=simpleCloneInputData(input);}
if(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input);}else if(pointersLength===1){session.firstMultiple=false;}
var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x;input.overallVelocityY=overallVelocity.y;input.overallVelocity=(abs(overallVelocity.x)>abs(overallVelocity.y))?overallVelocity.x:overallVelocity.y;input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;input.maxPointers=!session.prevInput?input.pointers.length:((input.pointers.length>session.prevInput.maxPointers)?input.pointers.length:session.prevInput.maxPointers);computeIntervalInputData(session,input);var target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target;}
input.target=target;}
function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y};}
input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y);}
function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX;var deltaY=input.deltaY-last.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=(abs(v.x)>abs(v.y))?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input;}else{velocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction;}
input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction;}
function simpleCloneInputData(input){var pointers=[];var i=0;while(i<input.pointers.length){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)};i++;}
return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY};}
function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};}
var x=0,y=0,i=0;while(i<pointersLength){x+=pointers[i].clientX;y+=pointers[i].clientY;i++;}
return{x:round(x/pointersLength),y:round(y/pointersLength)};}
function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0};}
function getDirection(x,y){if(x===y){return DIRECTION_NONE;}
if(abs(x)>=abs(y)){return x<0?DIRECTION_LEFT:DIRECTION_RIGHT;}
return y<0?DIRECTION_UP:DIRECTION_DOWN;}
function getDistance(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt((x*x)+(y*y));}
function getAngle(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI;}
function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY);}
function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY);}
var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS='mousedown';var MOUSE_WINDOW_EVENTS='mousemove mouseup';function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.pressed=false;Input.apply(this,arguments);}
inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];if(eventType&INPUT_START&&ev.button===0){this.pressed=true;}
if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END;}
if(!this.pressed){return;}
if(eventType&INPUT_END){this.pressed=false;}
this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev});}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};var IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT};var POINTER_ELEMENT_EVENTS='pointerdown';var POINTER_WINDOW_EVENTS='pointermove pointerup pointercancel';if(window.MSPointerEvent&&!window.PointerEvent){POINTER_ELEMENT_EVENTS='MSPointerDown';POINTER_WINDOW_EVENTS='MSPointerMove MSPointerUp MSPointerCancel';}
function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=(this.manager.session.pointerEvents=[]);}
inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace('ms','');var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=(pointerType==INPUT_TYPE_TOUCH);var storeIndex=inArray(store,ev.pointerId,'pointerId');if(eventType&INPUT_START&&(ev.button===0||isTouch)){if(storeIndex<0){store.push(ev);storeIndex=store.length-1;}}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true;}
if(storeIndex<0){return;}
store[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){store.splice(storeIndex,1);}}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var SINGLE_TOUCH_TARGET_EVENTS='touchstart';var SINGLE_TOUCH_WINDOW_EVENTS='touchstart touchmove touchend touchcancel';function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS;this.evWin=SINGLE_TOUCH_WINDOW_EVENTS;this.started=false;Input.apply(this,arguments);}
inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START){this.started=true;}
if(!this.started){return;}
var touches=normalizeSingleTouches.call(this,ev,type);if(type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0){this.started=false;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function normalizeSingleTouches(ev,type){var all=toArray(ev.touches);var changed=toArray(ev.changedTouches);if(type&(INPUT_END|INPUT_CANCEL)){all=uniqueArray(all.concat(changed),'identifier',true);}
return[all,changed];}
var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS='touchstart touchmove touchend touchcancel';function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments);}
inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches];}
var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target);});if(type===INPUT_START){i=0;while(i<targetTouches.length){targetIds[targetTouches[i].identifier]=true;i++;}}
i=0;while(i<changedTouches.length){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i]);}
if(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier];}
i++;}
if(!changedTargetTouches.length){return;}
return[uniqueArray(targetTouches.concat(changedTargetTouches),'identifier',true),changedTargetTouches];}
var DEDUP_TIMEOUT=2500;var DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler);this.primaryTouch=null;this.lastTouches=[];}
inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=(inputData.pointerType==INPUT_TYPE_TOUCH),isMouse=(inputData.pointerType==INPUT_TYPE_MOUSE);if(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents){return;}
if(isTouch){recordTouches.call(this,inputEvent,inputData);}else if(isMouse&&isSyntheticEvent.call(this,inputData)){return;}
this.callback(manager,inputEvent,inputData);},destroy:function destroy(){this.touch.destroy();this.mouse.destroy();}});function recordTouches(eventType,eventData){if(eventType&INPUT_START){this.primaryTouch=eventData.changedPointers[0].identifier;setLastTouch.call(this,eventData);}else if(eventType&(INPUT_END|INPUT_CANCEL)){setLastTouch.call(this,eventData);}}
function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;var removeLastTouch=function(){var i=lts.indexOf(lastTouch);if(i>-1){lts.splice(i,1);}};setTimeout(removeLastTouch,DEDUP_TIMEOUT);}}
function isSyntheticEvent(eventData){var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY;for(var i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i];var dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE){return true;}}
return false;}
var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,'touchAction');var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;var TOUCH_ACTION_COMPUTE='compute';var TOUCH_ACTION_AUTO='auto';var TOUCH_ACTION_MANIPULATION='manipulation';var TOUCH_ACTION_NONE='none';var TOUCH_ACTION_PAN_X='pan-x';var TOUCH_ACTION_PAN_Y='pan-y';var TOUCH_ACTION_MAP=getTouchActionProps();function TouchAction(manager,value){this.manager=manager;this.set(value);}
TouchAction.prototype={set:function(value){if(value==TOUCH_ACTION_COMPUTE){value=this.compute();}
if(NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value;}
this.actions=value.toLowerCase().trim();},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction());}});return cleanTouchActions(actions.join(' '));},preventDefaults:function(input){var srcEvent=input.srcEvent;var direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return;}
var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){var isTapPointer=input.pointers.length===1;var isTapMovement=input.distance<2;var isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime){return;}}
if(hasPanX&&hasPanY){return;}
if(hasNone||(hasPanY&&direction&DIRECTION_HORIZONTAL)||(hasPanX&&direction&DIRECTION_VERTICAL)){return this.preventSrc(srcEvent);}},preventSrc:function(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault();}};function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE;}
var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY){return TOUCH_ACTION_NONE;}
if(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;}
if(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION;}
return TOUCH_ACTION_AUTO;}
function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION){return false;}
var touchMap={};var cssSupports=window.CSS&&window.CSS.supports;['auto','manipulation','pan-y','pan-x','pan-x pan-y','none'].forEach(function(val){touchMap[val]=cssSupports?window.CSS.supports('touch-action',val):true;});return touchMap;}
var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;function Recognizer(options){this.options=assign({},this.defaults,options||{});this.id=uniqueId();this.manager=null;this.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[];}
Recognizer.prototype={defaults:{},set:function(options){assign(this.options,options);this.manager&&this.manager.touchAction.update();return this;},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'recognizeWith',this)){return this;}
var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this);}
return this;},dropRecognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRecognizeWith',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this;},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'requireFailure',this)){return this;}
var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this);}
return this;},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRequireFailure',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1);}
return this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id];},emit:function(input){var self=this;var state=this.state;function emit(event){self.manager.emit(event,input);}
if(state<STATE_ENDED){emit(self.options.event+stateStr(state));}
emit(self.options.event);if(input.additionalEvent){emit(input.additionalEvent);}
if(state>=STATE_ENDED){emit(self.options.event+stateStr(state));}},tryEmit:function(input){if(this.canEmit()){return this.emit(input);}
this.state=STATE_FAILED;},canEmit:function(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false;}
i++;}
return true;},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return;}
if(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE;}
this.state=this.process(inputDataClone);if(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone);}},process:function(inputData){},getTouchAction:function(){},reset:function(){}};function stateStr(state){if(state&STATE_CANCELLED){return'cancel';}else if(state&STATE_ENDED){return'end';}else if(state&STATE_CHANGED){return'move';}else if(state&STATE_BEGAN){return'start';}
return'';}
function directionStr(direction){if(direction==DIRECTION_DOWN){return'down';}else if(direction==DIRECTION_UP){return'up';}else if(direction==DIRECTION_LEFT){return'left';}else if(direction==DIRECTION_RIGHT){return'right';}
return'';}
function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer);}
return otherRecognizer;}
function AttrRecognizer(){Recognizer.apply(this,arguments);}
inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers;},process:function(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED;}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED;}else if(!(state&STATE_BEGAN)){return STATE_BEGAN;}
return state|STATE_CHANGED;}
return STATE_FAILED;}});function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null;}
inherit(PanRecognizer,AttrRecognizer,{defaults:{event:'pan',threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction;var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y);}
if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X);}
return actions;},directionTest:function(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;if(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=(x===0)?DIRECTION_NONE:(x<0)?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX);}else{direction=(y===0)?DIRECTION_NONE:(y<0)?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY);}}
input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction;},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||(!(this.state&STATE_BEGAN)&&this.directionTest(input)));},emit:function(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){input.additionalEvent=this.options.event+direction;}
this._super.emit.call(this,input);}});function PinchRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN);},emit:function(input){if(input.scale!==1){var inOut=input.scale<1?'in':'out';input.additionalEvent=this.options.event+inOut;}
this._super.emit.call(this,input);}});function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null;}
inherit(PressRecognizer,Recognizer,{defaults:{event:'press',pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||(input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)){this.reset();}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.time,this);}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED;}
return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(input){if(this.state!==STATE_RECOGNIZED){return;}
if(input&&(input.eventType&INPUT_END)){this.manager.emit(this.options.event+'up',input);}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input);}}});function RotateRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN);}});function SwipeRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:'swipe',threshold:10,velocity:0.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this);},attrTest:function(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.overallVelocity;}else if(direction&DIRECTION_HORIZONTAL){velocity=input.overallVelocityX;}else if(direction&DIRECTION_VERTICAL){velocity=input.overallVelocityY;}
return this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END;},emit:function(input){var direction=directionStr(input.offsetDirection);if(direction){this.manager.emit(this.options.event+direction,input);}
this.manager.emit(this.options.event,input);}});function TapRecognizer(){Recognizer.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0;}
inherit(TapRecognizer,Recognizer,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if((input.eventType&INPUT_START)&&(this.count===0)){return this.failTimeout();}
if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout();}
var validInterval=this.pTime?(input.timeStamp-this.pTime<options.interval):true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1;}else{this.count+=1;}
this._input=input;var tapCount=this.count%options.taps;if(tapCount===0){if(!this.hasRequireFailures()){return STATE_RECOGNIZED;}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.interval,this);return STATE_BEGAN;}}}
return STATE_FAILED;},failTimeout:function(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED;},this.options.interval,this);return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input);}}});function NGHammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,NGHammer.defaults.preset);return new Manager(element,options);}
NGHammer.VERSION='2.0.7';NGHammer.defaults={domEvents:false,touchAction:TOUCH_ACTION_COMPUTE,enable:true,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},['rotate']],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},['swipe']],[TapRecognizer],[TapRecognizer,{event:'doubletap',taps:2},['tap']],[PressRecognizer]],cssProps:{userSelect:'none',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var STOP=1;var FORCED_STOP=2;function Manager(element,options){this.options=assign({},NGHammer.defaults,options||{});this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(this.options.recognizers,function(item){var recognizer=this.add(new(item[0])(item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[3]);},this);}
Manager.prototype={set:function(options){assign(this.options,options);if(options.touchAction){this.touchAction.update();}
if(options.inputTarget){this.input.destroy();this.input.target=options.inputTarget;this.input.init();}
return this;},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP;},recognize:function(inputData){var session=this.session;if(session.stopped){return;}
this.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;var curRecognizer=session.curRecognizer;if(!curRecognizer||(curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)){curRecognizer=session.curRecognizer=null;}
var i=0;while(i<recognizers.length){recognizer=recognizers[i];if(session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))){recognizer.recognize(inputData);}else{recognizer.reset();}
if(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer;}
i++;}},get:function(recognizer){if(recognizer instanceof Recognizer){return recognizer;}
var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i];}}
return null;},add:function(recognizer){if(invokeArrayArg(recognizer,'add',this)){return this;}
var existing=this.get(recognizer.options.event);if(existing){this.remove(existing);}
this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer;},remove:function(recognizer){if(invokeArrayArg(recognizer,'remove',this)){return this;}
recognizer=this.get(recognizer);if(recognizer){var recognizers=this.recognizers;var index=inArray(recognizers,recognizer);if(index!==-1){recognizers.splice(index,1);this.touchAction.update();}}
return this;},on:function(events,handler){if(events===undefined){return;}
if(handler===undefined){return;}
var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler);});return this;},off:function(events,handler){if(events===undefined){return;}
var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event];}else{handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1);}});return this;},emit:function(event,data){if(this.options.domEvents){triggerDomEvent(event,data);}
var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return;}
data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault();};var i=0;while(i<handlers.length){handlers[i](data);i++;}},destroy:function(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null;}};function toggleCssProps(manager,add){var element=manager.element;if(!element.style){return;}
var prop;each(manager.options.cssProps,function(value,name){prop=prefixed(element.style,name);if(add){manager.oldCssProps[prop]=element.style[prop];element.style[prop]=value;}else{element.style[prop]=manager.oldCssProps[prop]||'';}});if(!add){manager.oldCssProps={};}}
function triggerDomEvent(event,data){var gestureEvent=document.createEvent('Event');gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent);}
assign(NGHammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed});var freeGlobal=(typeof window!=='undefined'?window:(typeof self!=='undefined'?self:{}));freeGlobal.NGHammer=NGHammer;if(typeof define==='function'&&define.amdDISABLED){define(function(){return NGHammer;});}else if(typeof module!='undefined'&&module.exports){module.exports=NGHammer;}else{window[exportName]=NGHammer;}})(window,document,'NGHammer');}));(function(){'use strict';jQuery(document).ready(function(){var t=document.querySelectorAll('[data-nanogallery2]');for(var i=0;i<t.length;i++){jQuery(t[i]).nanogallery2(jQuery(t[i]).data('nanogallery2'));}});}).call(null);